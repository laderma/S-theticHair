"use strict";function parseWSURL(n){var e,a;if(e=url.parse(n),e.protocol=e.protocol||"ws:","ws:"===e.protocol)a=!1;else{if("wss:"!==e.protocol)throw new Error("Invalid protocol "+e.protocol+". It must be ws or wss");a=!0}return e.port=e.port||(a?443:80),e.path=e.path||"/",{path:e.path,port:e.port,secure:a,host:e.hostname}}var Server=require("./Server"),Connection=require("./Connection"),net=require("net"),tls=require("tls"),url=require("url");exports.createServer=function(n,e){return"function"!=typeof n&&arguments.length?new Server(Boolean(n.secure),n,e):new Server(!1,n)},exports.connect=function(n,e,a){var r;return"function"==typeof e&&(a=e,e=void 0),e=e||{},n=parseWSURL(n),e.port=n.port,e.host=n.host,r=n.secure?tls.connect(e):net.connect(e),new Connection(r,n,a)},exports.setBinaryFragmentation=function(n){Connection.binaryFragmentation=n},exports.setMaxBufferLength=function(n){Connection.maxBufferLength=n};