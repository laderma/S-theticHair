var fs=require("fs"),path=require("path");module.exports=function(e,n){var t={completionKey:"get-yargs-completions"};t.getCompletion=function(i){var a=[],o=process.argv[process.argv.length-1],s=process.argv.slice(process.argv.indexOf("--"+t.completionKey)+1),u=e.parse(s);return r?r.length<3?i(r(o,u)):r(o,u,function(e){i(e)}):(o.match(/^-/)||n.getCommands().forEach(function(e){a.push(e[0])}),o.match(/^-/)&&Object.keys(e.getOptions().key).forEach(function(e){a.push("--"+e)}),void i(a))},t.generateCompletionScript=function(e){var n=fs.readFileSync(path.resolve(__dirname,"../completion.sh.hbs"),"utf-8"),t=path.basename(e);return e.match(/\.js$/)&&(e="./"+e),n=n.replace(/{{app_name}}/g,t),n.replace(/{{app_path}}/g,e)};var r=null;return t.registerFunction=function(e){r=e},t};