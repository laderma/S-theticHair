module.exports=function(e,n){var t={};t.nonOptionCount=function(t){var r=e.getDemanded();r._&&t._.length<r._.count&&(void 0!==r._.msg?n.fail(r._.msg):n.fail("Not enough non-option arguments: got "+t._.length+", need at least "+r._.count))},t.missingArgumentValue=function(t){var r=e.getOptions();if(r.requiresArg.length>0){var i=[];if(r.requiresArg.forEach(function(e){var n=t[e];(n===!0||n===!1)&&i.push(e)}),1==i.length)n.fail("Missing argument value: "+i[0]);else if(i.length>1){var a="Missing argument values: "+i.join(", ");n.fail(a)}}},t.requiredArguments=function(t){var r=e.getDemanded(),i=null;if(Object.keys(r).forEach(function(e){t.hasOwnProperty(e)||(i=i||{},i[e]=r[e])}),i){var a=[];Object.keys(i).forEach(function(e){var n=i[e].msg;n&&a.indexOf(n)<0&&a.push(n)});var o=a.length?"\n"+a.join("\n"):"";n.fail("Missing required arguments: "+Object.keys(i).join(", ")+o)}},t.unknownArguments=function(t,r){var i=n.getDescriptions(),a=e.getDemanded(),o=[],s={};Object.keys(r).forEach(function(e){r[e].forEach(function(n){s[n]=e})}),Object.keys(t).forEach(function(e){"$0"===e||"_"===e||i.hasOwnProperty(e)||a.hasOwnProperty(e)||s.hasOwnProperty(e)||o.push(e)}),1==o.length?n.fail("Unknown argument: "+o[0]):o.length>1&&n.fail("Unknown arguments: "+o.join(", "))};var r=[];t.check=function(e){r.push(e)},t.customChecks=function(e,t){r.forEach(function(r){try{var i=r(e,t);i?"string"==typeof i&&n.fail(i):n.fail("Argument check failed: "+r.toString())}catch(a){n.fail(a)}})};var i={};return t.implies=function(e,n){"object"==typeof e?Object.keys(e).forEach(function(n){t.implies(n,e[n])}):i[e]=n},t.getImplied=function(){return i},t.implications=function(e){var t=[];if(Object.keys(i).forEach(function(n){var r,a=n,o=i[n],r=Number(n);n=isNaN(r)?n:r,"number"==typeof n?n=e._.length>=n:n.match(/^--no-.+/)?(n=n.match(/^--no-(.+)/)[1],n=!e[n]):n=e[n],r=Number(o),o=isNaN(r)?o:r,"number"==typeof o?o=e._.length>=o:o.match(/^--no-.+/)?(o=o.match(/^--no-(.+)/)[1],o=!e[o]):o=e[o],n&&!o&&t.push(a)}),t.length){var r="Implications failed:\n";t.forEach(function(e){r+="  "+e+" -> "+i[e]}),n.fail(r)}},t};