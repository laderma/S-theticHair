function Argv(e,n){function p(e){var n=Parser(e,o),s=n.argv,p=n.aliases;return s.$0=t.$0,t.parsed=n,h&&~s._.indexOf(h)&&(t.showCompletionScript(),f&&process.exit(0)),Object.keys(s).forEach(function(e){if(e===c)t.showHelp("log"),f&&process.exit(0);else if(e===l)i.showVersion(),f&&process.exit(0);else if(e===d)return void r.getCompletion(function(e){(e||[]).forEach(function(e){console.log(e)}),f&&process.exit(0)})}),a.nonOptionCount(s),a.missingArgumentValue(s),a.requiredArguments(s),u&&a.unknownArguments(s,p),a.customChecks(s,p),a.implications(s),m(s),s}function m(e){Object.keys(o.key).forEach(function(n){"undefined"==typeof e[n]&&(e[n]=void 0)})}e=e||[];var t={},r=null,i=null,a=null;n||(n=process.cwd()),t.$0=process.argv.slice(0,2).map(function(e){if(!~e.indexOf("node")){var t=rebase(n,e);return e.match(/^\//)&&t.length<e.length?t:e}}).join(" ").trim(),void 0!=process.env._&&process.argv[1]==process.env._&&(t.$0=process.env._.replace(path.dirname(process.execPath)+"/",""));var o;t.resetOptions=t.reset=function(){return o={array:[],"boolean":[],string:[],narg:{},key:{},alias:{},"default":{},defaultDescription:{},requiresArg:[],count:[],normalize:[],config:[]},i=Usage(t),a=Validation(t,i),r=Completion(t,i),s={},f=!0,u=!1,c=null,l=null,d=null,t},t.resetOptions(),t["boolean"]=function(e){return o["boolean"].push.apply(o["boolean"],[].concat(e)),t},t.array=function(e){return o.array.push.apply(o.array,[].concat(e)),t},t.nargs=function(e,n){return"object"==typeof e?Object.keys(e).forEach(function(n){t.nargs(n,e[n])}):o.narg[e]=n,t},t.normalize=function(e){return o.normalize.push.apply(o.normalize,[].concat(e)),t},t.config=function(e){return o.config.push.apply(o.config,[].concat(e)),t},t.example=function(e,n){return i.example(e,n),t},t.command=function(e,n){return i.command(e,n),t},t.string=function(e){return o.string.push.apply(o.string,[].concat(e)),t},t["default"]=function(e,n,r){return"object"==typeof e?Object.keys(e).forEach(function(n){t["default"](n,e[n])}):(o.defaultDescription[e]=r,o["default"][e]=n),t},t.alias=function(e,n){return"object"==typeof e?Object.keys(e).forEach(function(n){t.alias(n,e[n])}):o.alias[e]=(o.alias[e]||[]).concat(n),t},t.count=function(e){return o.count.push.apply(o.count,[].concat(e)),t};var s={};t.demand=t.required=t.require=function(e,n){return"number"==typeof e?(s._||(s._={count:0,msg:null}),s._.count+=e,s._.msg=n):Array.isArray(e)?e.forEach(function(e){t.demand(e,n)}):"string"==typeof n?s[e]={msg:n}:(n===!0||"undefined"==typeof n)&&(s[e]={msg:null}),t},t.getDemanded=function(){return s},t.requiresArg=function(e){return o.requiresArg.push.apply(o.requiresArg,[].concat(e)),t},t.implies=function(e,n){return a.implies(e,n),t},t.usage=function(e,n){return n||"object"!=typeof e||(n=e,e=null),i.usage(e),n&&t.options(n),t},t.epilogue=t.epilog=function(e){return i.epilog(e),t},t.fail=function(e){return i.failFn(e),t},t.check=function(e){return a.check(e),t},t.defaults=t["default"],t.describe=function(e,n){return i.describe(e,n),t},t.parse=function(e){return p(e)},t.option=t.options=function(e,n){if("object"==typeof e)Object.keys(e).forEach(function(n){t.options(n,e[n])});else{assert("object"==typeof n,"second argument to option must be an object"),o.key[e]=!0,n.alias&&t.alias(e,n.alias);var r=n.demand||n.required||n.require;r&&t.demand(e,r),"default"in n&&t["default"](e,n["default"]),"nargs"in n&&t.nargs(e,n.nargs),(n["boolean"]||"boolean"===n.type)&&(t["boolean"](e),n.alias&&t["boolean"](n.alias)),(n.array||"array"===n.type)&&(t.array(e),n.alias&&t.array(n.alias)),(n.string||"string"===n.type)&&(t.string(e),n.alias&&t.string(n.alias)),(n.count||"count"===n.type)&&t.count(e);var i=n.describe||n.description||n.desc;i&&t.describe(e,i),n.requiresArg&&t.requiresArg(e)}return t},t.getOptions=function(){return o},t.wrap=function(e){return i.wrap(e),t};var u=!1;t.strict=function(){return u=!0,t},t.getStrict=function(){return u},t.showHelp=function(e){return i.showHelp(e),t};var l=null;t.version=function(e,n,r){return l=n||"version",i.version(e),t.describe(l,r||"Show version number"),t};var c=null;t.addHelpOpt=function(e,n){return c=e,t.describe(e,n||"Show help"),t},t.showHelpOnFail=function(e,n){return i.showHelpOnFail(e,n),t};var f=!0;t.exitProcess=function(e){return"boolean"!=typeof e&&(e=!0),f=e,t},t.getExitProcess=function(){return f},t.help=function(){return arguments.length>0?t.addHelpOpt.apply(t,arguments):(t.parsed||p(e),i.help())};var d=null,h=null;return t.completion=function(e,n,i){return"function"==typeof n&&(i=n,n=null),h=e,d=r.completionKey,t.command(h,n||"generate bash completion script"),i&&r.registerFunction(i),t},t.showCompletionScript=function(e){return e=e||t.$0,console.log(r.generateCompletionScript(e)),t},t.getUsageInstance=function(){return i},t.getValidationInstance=function(){return a},Object.defineProperty(t,"argv",{get:function(){var n=null;try{n=p(e)}catch(t){i.fail(t.message)}return n},enumerable:!0}),sigletonify(t),t}function rebase(e,n){return path.relative(e,n)}function sigletonify(e){Object.keys(e).forEach(function(n){"argv"===n?Argv.__defineGetter__(n,e.__lookupGetter__(n)):Argv[n]="function"==typeof e[n]?e[n].bind(e):e[n]})}var assert=require("assert"),path=require("path"),Completion=require("./lib/completion"),Parser=require("./lib/parser"),Usage=require("./lib/usage"),Validation=require("./lib/validation");Argv(process.argv.slice(2));var exports=module.exports=Argv;exports.rebase=rebase;