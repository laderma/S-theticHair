if("function"!=typeof define)var define=require("amdefine")(module,require);define(function(e,n,t){function s(e,n,t,r,i){this.children=[],this.sourceContents={},this.line=void 0===e?null:e,this.column=void 0===n?null:n,this.source=void 0===t?null:t,this.name=void 0===i?null:i,null!=r&&this.add(r)}var r=e("./source-map-generator").SourceMapGenerator,i=e("./util"),a=/(\r?\n)/g,o=/\r\n|[\s\S]/g;s.fromStringWithSourceMap=function(e,n){function c(e,n){null===e||void 0===e.source?t.add(n):t.add(new s(e.originalLine,e.originalColumn,e.source,n,e.name))}var t=new s,r=e.split(a),i=function(){var e=r.shift(),n=r.shift()||"";return e+n},o=1,u=0,l=null;return n.eachMapping(function(e){if(null!==l){if(!(o<e.generatedLine)){var a=r[0],n=a.substr(0,e.generatedColumn-u);return r[0]=a.substr(e.generatedColumn-u),u=e.generatedColumn,c(l,n),void(l=e)}var n="";c(l,i()),o++,u=0}for(;o<e.generatedLine;)t.add(i()),o++;if(u<e.generatedColumn){var a=r[0];t.add(a.substr(0,e.generatedColumn)),r[0]=a.substr(e.generatedColumn),u=e.generatedColumn}l=e},this),r.length>0&&(l&&c(l,i()),t.add(r.join(""))),n.sources.forEach(function(e){var r=n.sourceContentFor(e);r&&t.setSourceContent(e,r)}),t},s.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(e){this.add(e)},this);else{if(!(e instanceof s||"string"==typeof e))throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},s.prototype.prepend=function(e){if(Array.isArray(e))for(var n=e.length-1;n>=0;n--)this.prepend(e[n]);else{if(!(e instanceof s||"string"==typeof e))throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},s.prototype.walk=function(e){for(var n,t=0,r=this.children.length;r>t;t++)n=this.children[t],n instanceof s?n.walk(e):""!==n&&e(n,{source:this.source,line:this.line,column:this.column,name:this.name})},s.prototype.join=function(e){var n,t,r=this.children.length;if(r>0){for(n=[],t=0;r-1>t;t++)n.push(this.children[t]),n.push(e);n.push(this.children[t]),this.children=n}return this},s.prototype.replaceRight=function(e,n){var t=this.children[this.children.length-1];return t instanceof s?t.replaceRight(e,n):"string"==typeof t?this.children[this.children.length-1]=t.replace(e,n):this.children.push("".replace(e,n)),this},s.prototype.setSourceContent=function(e,n){this.sourceContents[i.toSetString(e)]=n},s.prototype.walkSourceContents=function(e){for(var n=0,t=this.children.length;t>n;n++)this.children[n]instanceof s&&this.children[n].walkSourceContents(e);for(var r=Object.keys(this.sourceContents),n=0,t=r.length;t>n;n++)e(i.fromSetString(r[n]),this.sourceContents[r[n]])},s.prototype.toString=function(){var e="";return this.walk(function(n){e+=n}),e},s.prototype.toStringWithSourceMap=function(e){var n={code:"",line:1,column:0},t=new r(e),i=!1,s=null,u=null,l=null,c=null;return this.walk(function(e,r){n.code+=e,null!==r.source&&null!==r.line&&null!==r.column?((s!==r.source||u!==r.line||l!==r.column||c!==r.name)&&t.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:n.line,column:n.column},name:r.name}),s=r.source,u=r.line,l=r.column,c=r.name,i=!0):i&&(t.addMapping({generated:{line:n.line,column:n.column}}),s=null,i=!1),e.match(o).forEach(function(e,o,u){a.test(e)?(n.line++,n.column=0,o+1===u.length?(s=null,i=!1):i&&t.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:n.line,column:n.column},name:r.name})):n.column+=e.length})}),this.walkSourceContents(function(e,n){t.setSourceContent(e,n)}),{code:n.code,map:t}},n.SourceNode=s});