function load_global(e){e=path.resolve(path.dirname(module.filename),e);try{var n=fs.readFileSync(e,"utf8");return vm.runInContext(n,UglifyJS,e)}catch(t){console.log("ERROR in file: "+e+" / "+t),process.exit(1)}}function readReservedFile(e,n){n||(n={vars:[],props:[]});var t=fs.readFileSync(e,"utf8");return t=JSON.parse(t),t.vars&&t.vars.forEach(function(e){UglifyJS.push_uniq(n.vars,e)}),t.props&&t.props.forEach(function(e){UglifyJS.push_uniq(n.props,e)}),n}var path=require("path"),fs=require("fs"),vm=require("vm"),UglifyJS=vm.createContext({console:console,process:process,Buffer:Buffer,MOZ_SourceMap:require("source-map")}),FILES=exports.FILES=["../lib/utils.js","../lib/ast.js","../lib/parse.js","../lib/transform.js","../lib/scope.js","../lib/output.js","../lib/compress.js","../lib/sourcemap.js","../lib/mozilla-ast.js","../lib/propmangle.js"].map(function(e){return fs.realpathSync(path.join(path.dirname(__filename),e))});FILES.forEach(load_global),UglifyJS.AST_Node.warn_function=function(e){console.error("WARN: %s",e)};for(var i in UglifyJS)UglifyJS.hasOwnProperty(i)&&(exports[i]=UglifyJS[i]);exports.minify=function(e,n){n=UglifyJS.defaults(n,{spidermonkey:!1,outSourceMap:null,sourceRoot:null,inSourceMap:null,fromString:!1,warnings:!1,mangle:{},output:null,compress:{}}),UglifyJS.base54.reset();var t=null,r={};if(n.spidermonkey?t=UglifyJS.AST_Node.from_mozilla_ast(e):("string"==typeof e&&(e=[e]),e.forEach(function(e){var a=n.fromString?e:fs.readFileSync(e,"utf8");r[e]=a,t=UglifyJS.parse(a,{filename:n.fromString?"?":e,toplevel:t})})),n.compress){var a={warnings:n.warnings};UglifyJS.merge(a,n.compress),t.figure_out_scope();var i=UglifyJS.Compressor(a);t=t.transform(i)}n.mangle&&(t.figure_out_scope(n.mangle),t.compute_char_frequency(n.mangle),t.mangle_names(n.mangle));var o=n.inSourceMap,s={};if("string"==typeof n.inSourceMap&&(o=fs.readFileSync(n.inSourceMap,"utf8")),n.outSourceMap&&(s.source_map=UglifyJS.SourceMap({file:n.outSourceMap,orig:o,root:n.sourceRoot}),n.sourceMapIncludeSources))for(var u in r)r.hasOwnProperty(u)&&s.source_map.get().setSourceContent(u,r[u]);n.output&&UglifyJS.merge(s,n.output);var l=UglifyJS.OutputStream(s);t.print(l),n.outSourceMap&&(l+="\n//# sourceMappingURL="+n.outSourceMap);var c=s.source_map;return c&&(c+=""),{code:l+"",map:c}},exports.describe_ast=function(){function n(t){e.print("AST_"+t.TYPE);var r=t.SELF_PROPS.filter(function(e){return!/^\$/.test(e)});r.length>0&&(e.space(),e.with_parens(function(){r.forEach(function(n,t){t&&e.space(),e.print(n)})})),t.documentation&&(e.space(),e.print_string(t.documentation)),t.SUBCLASSES.length>0&&(e.space(),e.with_block(function(){t.SUBCLASSES.forEach(function(t,r){e.indent(),n(t),e.newline()})}))}var e=UglifyJS.OutputStream({beautify:!0});return n(UglifyJS.AST_Node),e+""},exports.readReservedFile=readReservedFile,exports.readDefaultReservedFile=function(e){return readReservedFile(path.join(__dirname,"domprops.json"),e)},exports.readNameCache=function(e,n){var t=null;if(e)try{var t=fs.readFileSync(e,"utf8");if(t=JSON.parse(t)[n],!t)throw"init";t.props=UglifyJS.Dictionary.fromObject(t.props)}catch(r){t={cname:-1,props:new UglifyJS.Dictionary}}return t},exports.writeNameCache=function(e,n,t){if(e){var r;try{r=fs.readFileSync(e,"utf8"),r=JSON.parse(r)}catch(a){r={}}r[n]={cname:t.cname,props:t.props.toObject()},fs.writeFileSync(e,JSON.stringify(r,null,2),"utf8")}};