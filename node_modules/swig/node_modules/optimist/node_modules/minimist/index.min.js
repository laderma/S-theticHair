function hasKey(e,n){var t=e;n.slice(0,-1).forEach(function(e){t=t[e]||{}});var r=n[n.length-1];return r in t}function setKey(e,n,t){var r=e;n.slice(0,-1).forEach(function(e){void 0===r[e]&&(r[e]={}),r=r[e]});var i=n[n.length-1];void 0===r[i]||"boolean"==typeof r[i]?r[i]=t:Array.isArray(r[i])?r[i].push(t):r[i]=[r[i],t]}function isNumber(e){return"number"==typeof e?!0:/^0x[0-9a-f]+$/i.test(e)?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e)}module.exports=function(e,n){function s(e,n){var i=!t.strings[e]&&isNumber(n)?Number(n):n;setKey(a,e.split("."),i),(r[e]||[]).forEach(function(e){setKey(a,e.split("."),i)})}n||(n={});var t={bools:{},strings:{}};[].concat(n["boolean"]).filter(Boolean).forEach(function(e){t.bools[e]=!0});var r={};Object.keys(n.alias||{}).forEach(function(e){r[e]=[].concat(n.alias[e]),r[e].forEach(function(n){r[n]=[e].concat(r[e].filter(function(e){return n!==e}))})}),[].concat(n.string).filter(Boolean).forEach(function(e){t.strings[e]=!0,r[e]&&(t.strings[r[e]]=!0)});var i=n["default"]||{},a={_:[]};Object.keys(t.bools).forEach(function(e){s(e,void 0===i[e]?!1:i[e])});var o=[];-1!==e.indexOf("--")&&(o=e.slice(e.indexOf("--")+1),e=e.slice(0,e.indexOf("--")));for(var u=0;u<e.length;u++){var l=e[u];if(/^--.+=/.test(l)){var c=l.match(/^--([^=]+)=([\s\S]*)$/);s(c[1],c[2])}else if(/^--no-.+/.test(l)){var f=l.match(/^--no-(.+)/)[1];s(f,!1)}else if(/^--.+/.test(l)){var f=l.match(/^--(.+)/)[1],d=e[u+1];void 0===d||/^-/.test(d)||t.bools[f]||(r[f]?t.bools[r[f]]:0)?/^(true|false)$/.test(d)?(s(f,"true"===d),u++):s(f,t.strings[f]?"":!0):(s(f,d),u++)}else if(/^-[^-]+/.test(l)){for(var h=l.slice(1,-1).split(""),p=!1,m=0;m<h.length;m++){var d=l.slice(m+2);if("-"!==d){if(/[A-Za-z]/.test(h[m])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(d)){s(h[m],d),p=!0;break}if(h[m+1]&&h[m+1].match(/\W/)){s(h[m],l.slice(m+2)),p=!0;break}s(h[m],t.strings[h[m]]?"":!0)}else s(h[m],d)}var f=l.slice(-1)[0];p||"-"===f||(!e[u+1]||/^(-|--)[^-]/.test(e[u+1])||t.bools[f]||(r[f]?t.bools[r[f]]:0)?e[u+1]&&/true|false/.test(e[u+1])?(s(f,"true"===e[u+1]),u++):s(f,t.strings[f]?"":!0):(s(f,e[u+1]),u++))}else a._.push(t.strings._||!isNumber(l)?l:Number(l))}return Object.keys(i).forEach(function(e){hasKey(a,e.split("."))||(setKey(a,e.split("."),i[e]),(r[e]||[]).forEach(function(n){setKey(a,n.split("."),i[e])}))}),o.forEach(function(e){a._.push(e)}),a};