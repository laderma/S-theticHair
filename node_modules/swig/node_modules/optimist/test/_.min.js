function testCmd(e,n){return function(t){var r=setTimeout(function(){assert.fail("Never got stdout data.")},5e3),a=process.cwd();process.chdir(__dirname+"/_");var i=e.split(" "),o=spawn(i[0],i.slice(1).concat(n.map(String)));process.chdir(a),o.stderr.on("data",function(e){t.error(e),t.end()}),o.stdout.on("data",function(e){clearTimeout(r);var a=JSON.parse(e.toString());t.same(a.map(String),n.map(String)),t.end()})}}var spawn=require("child_process").spawn,test=require("tap").test;test("dotSlashEmpty",testCmd("./bin.js",[])),test("dotSlashArgs",testCmd("./bin.js",["a","b","c"])),test("nodeEmpty",testCmd("node bin.js",[])),test("nodeArgs",testCmd("node bin.js",["x","y","z"])),test("whichNodeEmpty",function(e){var n=spawn("which",["node"]);n.stdout.on("data",function(n){e.test(testCmd(n.toString().trim()+" bin.js",[])),e.end()}),n.stderr.on("data",function(n){assert.error(n),e.end()})}),test("whichNodeArgs",function(e){var n=spawn("which",["node"]);n.stdout.on("data",function(n){e.test(testCmd(n.toString().trim()+" bin.js",["q","r"])),e.end()}),n.stderr.on("data",function(n){e.error(n),e.end()})});