var optimist=require("../index"),path=require("path"),test=require("tap").test,$0="node ./"+path.relative(process.cwd(),__filename);test("short boolean",function(e){var n=optimist.parse(["-b"]);e.same(n,{b:!0,_:[],$0:$0}),e.same(typeof n.b,"boolean"),e.end()}),test("long boolean",function(e){e.same(optimist.parse(["--bool"]),{bool:!0,_:[],$0:$0}),e.end()}),test("bare",function(e){e.same(optimist.parse(["foo","bar","baz"]),{_:["foo","bar","baz"],$0:$0}),e.end()}),test("short group",function(e){e.same(optimist.parse(["-cats"]),{c:!0,a:!0,t:!0,s:!0,_:[],$0:$0}),e.end()}),test("short group next",function(e){e.same(optimist.parse(["-cats","meow"]),{c:!0,a:!0,t:!0,s:"meow",_:[],$0:$0}),e.end()}),test("short capture",function(e){e.same(optimist.parse(["-h","localhost"]),{h:"localhost",_:[],$0:$0}),e.end()}),test("short captures",function(e){e.same(optimist.parse(["-h","localhost","-p","555"]),{h:"localhost",p:555,_:[],$0:$0}),e.end()}),test("long capture sp",function(e){e.same(optimist.parse(["--pow","xixxle"]),{pow:"xixxle",_:[],$0:$0}),e.end()}),test("long capture eq",function(e){e.same(optimist.parse(["--pow=xixxle"]),{pow:"xixxle",_:[],$0:$0}),e.end()}),test("long captures sp",function(e){e.same(optimist.parse(["--host","localhost","--port","555"]),{host:"localhost",port:555,_:[],$0:$0}),e.end()}),test("long captures eq",function(e){e.same(optimist.parse(["--host=localhost","--port=555"]),{host:"localhost",port:555,_:[],$0:$0}),e.end()}),test("mixed short bool and capture",function(e){e.same(optimist.parse(["-h","localhost","-fp","555","script.js"]),{f:!0,p:555,h:"localhost",_:["script.js"],$0:$0}),e.end()}),test("short and long",function(e){e.same(optimist.parse(["-h","localhost","-fp","555","script.js"]),{f:!0,p:555,h:"localhost",_:["script.js"],$0:$0}),e.end()}),test("no",function(e){e.same(optimist.parse(["--no-moo"]),{moo:!1,_:[],$0:$0}),e.end()}),test("multi",function(e){e.same(optimist.parse(["-v","a","-v","b","-v","c"]),{v:["a","b","c"],_:[],$0:$0}),e.end()}),test("comprehensive",function(e){e.same(optimist.parse(["--name=meowmers","bare","-cats","woo","-h","awesome","--multi=quux","--key","value","-b","--bool","--no-meep","--multi=baz","--","--not-a-flag","eek"]),{c:!0,a:!0,t:!0,s:"woo",h:"awesome",b:!0,bool:!0,key:"value",multi:["quux","baz"],meep:!1,name:"meowmers",_:["bare","--not-a-flag","eek"],$0:$0}),e.end()}),test("nums",function(e){var n=optimist.parse(["-x","1234","-y","5.67","-z","1e7","-w","10f","--hex","0xdeadbeef","789"]);e.same(n,{x:1234,y:5.67,z:1e7,w:"10f",hex:3735928559,_:[789],$0:$0}),e.same(typeof n.x,"number"),e.same(typeof n.y,"number"),e.same(typeof n.z,"number"),e.same(typeof n.w,"string"),e.same(typeof n.hex,"number"),e.same(typeof n._[0],"number"),e.end()}),test("flag boolean",function(e){var n=optimist(["-t","moo"])["boolean"](["t"]).argv;e.same(n,{t:!0,_:["moo"],$0:$0}),e.same(typeof n.t,"boolean"),e.end()}),test("flag boolean value",function(e){var n=optimist(["--verbose","false","moo","-t","true"])["boolean"](["t","verbose"])["default"]("verbose",!0).argv;e.same(n,{verbose:!1,t:!0,_:["moo"],$0:$0}),e.same(typeof n.verbose,"boolean"),e.same(typeof n.t,"boolean"),e.end()}),test("flag boolean default false",function(e){var n=optimist(["moo"])["boolean"](["t","verbose"])["default"]("verbose",!1)["default"]("t",!1).argv;e.same(n,{verbose:!1,t:!1,_:["moo"],$0:$0}),e.same(typeof n.verbose,"boolean"),e.same(typeof n.t,"boolean"),e.end()}),test("boolean groups",function(e){var n=optimist(["-x","-z","one","two","three"])["boolean"](["x","y","z"]).argv;e.same(n,{x:!0,y:!1,z:!0,_:["one","two","three"],$0:$0}),e.same(typeof n.x,"boolean"),e.same(typeof n.y,"boolean"),e.same(typeof n.z,"boolean"),e.end()}),test("newlines in params",function(e){var n=optimist.parse(["-s","X\nX"]);e.same(n,{_:[],s:"X\nX",$0:$0}),n=optimist.parse(["--s=X\nX"]),e.same(n,{_:[],s:"X\nX",$0:$0}),e.end()}),test("strings",function(e){var n=optimist(["-s","0001234"]).string("s").argv.s;e.same(n,"0001234"),e.same(typeof n,"string");var t=optimist(["-x","56"]).string("x").argv.x;e.same(t,"56"),e.same(typeof t,"string"),e.end()}),test("stringArgs",function(e){var n=optimist(["  ","  "]).string("_").argv._;e.same(n.length,2),e.same(typeof n[0],"string"),e.same(n[0],"  "),e.same(typeof n[1],"string"),e.same(n[1],"  "),e.end()}),test("slashBreak",function(e){e.same(optimist.parse(["-I/foo/bar/baz"]),{I:"/foo/bar/baz",_:[],$0:$0}),e.same(optimist.parse(["-xyz/foo/bar/baz"]),{x:!0,y:!0,z:"/foo/bar/baz",_:[],$0:$0}),e.end()}),test("alias",function(e){var n=optimist(["-f","11","--zoom","55"]).alias("z","zoom").argv;e.equal(n.zoom,55),e.equal(n.z,n.zoom),e.equal(n.f,11),e.end()}),test("multiAlias",function(e){var n=optimist(["-f","11","--zoom","55"]).alias("z",["zm","zoom"]).argv;e.equal(n.zoom,55),e.equal(n.z,n.zoom),e.equal(n.z,n.zm),e.equal(n.f,11),e.end()}),test("boolean default true",function(e){var n=optimist.options({sometrue:{"boolean":!0,"default":!0}}).argv;e.equal(n.sometrue,!0),e.end()}),test("boolean default false",function(e){var n=optimist.options({somefalse:{"boolean":!0,"default":!1}}).argv;e.equal(n.somefalse,!1),e.end()}),test("nested dotted objects",function(e){var n=optimist(["--foo.bar","3","--foo.baz","4","--foo.quux.quibble","5","--foo.quux.o_O","--beep.boop"]).argv;e.same(n.foo,{bar:3,baz:4,quux:{quibble:5,o_O:!0}}),e.same(n.beep,{boop:!0}),e.end()}),test("boolean and alias with chainable api",function(e){var n=["-h","derp"],t=["--herp","derp"],a=optimist(n)["boolean"]("herp").alias("h","herp").argv,i=optimist(t)["boolean"]("herp").alias("h","herp").argv,o={herp:!0,h:!0,_:["derp"],$0:$0};e.same(a,o),e.same(i,o),e.end()}),test("boolean and alias with options hash",function(e){var n=["-h","derp"],t=["--herp","derp"],r={herp:{alias:"h","boolean":!0}},a=optimist(n).options(r).argv,i=optimist(t).options(r).argv,o={herp:!0,h:!0,_:["derp"],$0:$0};e.same(a,o),e.same(i,o),e.end()}),test("boolean and alias using explicit true",function(e){var n=["-h","true"],t=["--herp","true"],a=optimist(n)["boolean"]("h").alias("h","herp").argv,i=optimist(t)["boolean"]("h").alias("h","herp").argv,o={herp:!0,h:!0,_:[],$0:$0};e.same(a,o),e.same(i,o),e.end()}),test("boolean and --x=true",function(e){var n=optimist(["--boool","--other=true"])["boolean"]("boool").argv;e.same(n.boool,!0),e.same(n.other,"true"),n=optimist(["--boool","--other=false"])["boolean"]("boool").argv,e.same(n.boool,!0),e.same(n.other,"false"),e.end()});