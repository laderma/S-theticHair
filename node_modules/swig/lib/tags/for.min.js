var ctx="_ctx.",ctxloop=ctx+"loop";exports.compile=function(e,n,t,r,a,i){var u,s=n.shift(),o="__k",l=(ctx+"__loopcache"+Math.random()).replace(/\./g,"");return n[0]&&","===n[0]&&(n.shift(),o=s,s=n.shift()),u=n.join(""),["(function () {\n","  var __l = "+u+', __len = (_utils.isArray(__l) || typeof __l === "string") ? __l.length : _utils.keys(__l).length;\n',"  if (!__l) { return; }\n","    var "+l+" = { loop: "+ctxloop+", "+s+": "+ctx+s+", "+o+": "+ctx+o+" };\n","    "+ctxloop+" = { first: false, index: 1, index0: 0, revindex: __len, revindex0: __len - 1, length: __len, last: false };\n","  _utils.each(__l, function ("+s+", "+o+") {\n","    "+ctx+s+" = "+s+";\n","    "+ctx+o+" = "+o+";\n","    "+ctxloop+".key = "+o+";\n","    "+ctxloop+".first = ("+ctxloop+".index0 === 0);\n","    "+ctxloop+".last = ("+ctxloop+".revindex0 === 0);\n","    "+e(t,r,a,i),"    "+ctxloop+".index += 1; "+ctxloop+".index0 += 1; "+ctxloop+".revindex -= 1; "+ctxloop+".revindex0 -= 1;\n","  });\n","  "+ctxloop+" = "+l+".loop;\n","  "+ctx+s+" = "+l+"."+s+";\n","  "+ctx+o+" = "+l+"."+o+";\n","  "+l+" = undefined;\n","})();\n"].join("")},exports.parse=function(e,n,t,r){var a,i;return t.on(r.NUMBER,function(e){var t=this.state.length?this.state[this.state.length-1]:null;if(!i||t!==r.ARRAYOPEN&&t!==r.CURLYOPEN&&t!==r.CURLYCLOSE&&t!==r.FUNCTION&&t!==r.FILTER)throw new Error('Unexpected number "'+e.match+'" on line '+n+".");return!0}),t.on(r.VAR,function(e){return i&&a?!0:(this.out.length||(a=!0),void this.out.push(e.match))}),t.on(r.COMMA,function(e){return a&&this.prevToken.type===r.VAR?void this.out.push(e.match):!0}),t.on(r.COMPARATOR,function(e){if("in"!==e.match||!a)throw new Error('Unexpected token "'+e.match+'" on line '+n+".");i=!0,this.filterApplyIdx.push(this.out.length)}),!0},exports.ends=!0;