var filters=require("../filters");exports.compile=function(e,n,t,r,a,i){var s=n.shift().replace(/\($/,""),o='(function () {\n  var _output = "";\n'+e(t,r,a,i)+"  return _output;\n})()";return")"===n[n.length-1]&&n.pop(),n=n.length?", "+n.join(""):"",'_output += _filters["'+s+'"]('+o+n+");\n"},exports.parse=function(e,n,t,r){function i(e){if(!filters.hasOwnProperty(e))throw new Error('Filter "'+e+'" does not exist on line '+n+".")}var a;return t.on(r.FUNCTION,function(e){return a?!0:(a=e.match.replace(/\($/,""),i(a),this.out.push(e.match),void this.state.push(e.type))}),t.on(r.VAR,function(e){return a?!0:(a=e.match,i(a),void this.out.push(a))}),!0},exports.ends=!0;