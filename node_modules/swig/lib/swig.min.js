function efn(){return""}function validateOptions(n){if(n){if(utils.each(["varControls","tagControls","cmtControls"],function(e){if(n.hasOwnProperty(e)){if(!utils.isArray(n[e])||2!==n[e].length)throw new Error('Option "'+e+'" must be an array containing 2 different control strings.');if(n[e][0]===n[e][1])throw new Error('Option "'+e+'" open and close controls must not be the same.');utils.each(n[e],function(n,t){if(n.length<2)throw new Error('Option "'+e+'" '+(t?"open ":"close ")+'control must be at least 2 characters. Saw "'+n+'" instead.')})}}),n.hasOwnProperty("cache")&&n.cache&&"memory"!==n.cache&&(!n.cache.get||!n.cache.set))throw new Error("Invalid cache option "+JSON.stringify(n.cache)+' found. Expected "memory" or { get: function (key) { ... }, set: function (key, value) { ... } }.');if(n.hasOwnProperty("loader")&&n.loader&&(!n.loader.load||!n.loader.resolve))throw new Error("Invalid loader option "+JSON.stringify(n.loader)+" found. Expected { load: function (pathname, cb) { ... }, resolve: function (to, from) { ... } }.")}}var utils=require("./utils"),_tags=require("./tags"),_filters=require("./filters"),parser=require("./parser"),dateformatter=require("./dateformatter"),loaders=require("./loaders");exports.version="1.4.2";var defaultOptions={autoescape:!0,varControls:["{{","}}"],tagControls:["{%","%}"],cmtControls:["{#","#}"],locals:{},cache:"memory",loader:loaders.fs()},defaultInstance;exports.setDefaults=function(n){validateOptions(n),defaultInstance.options=utils.extend(defaultInstance.options,n)},exports.setDefaultTZOffset=function(n){dateformatter.tzOffset=n},exports.Swig=function(n){function a(n){return n&&n.locals?utils.extend({},e.options.locals,n.locals):e.options.locals}function i(n){return n=n||{},n.hasOwnProperty("cache")&&!n.cache||!e.options.cache}function s(n,t){return i(t)?void 0:"memory"===e.options.cache?e.cache[n]:e.options.cache.get(n)}function o(n,t,r){return i(t)?void 0:"memory"===e.options.cache?void(e.cache[n]=r):void e.options.cache.set(n,r)}function l(n,e){return utils.map(e,function(e){var t=e.args?e.args.join(""):"";return"block"===e.name&&n[t]&&(e=n[t]),e.content&&e.content.length&&(e.content=l(n,e.content)),e})}function u(n,e){var t=[];utils.each(n,function(n){t.push(n)}),utils.each(t.reverse(),function(n){"block"!==n.name&&e.unshift(n)})}function d(n,t){for(var o,d,c,r=n.parent,a=[],i=[];r;){if(!t||!t.filename)throw new Error('Cannot extend "'+r+'" because current template has no filename.');if(o=o||t.filename,o=e.options.loader.resolve(r,o),d=s(o,t)||e.parseFile(o,utils.extend({},t,{filename:o})),r=d.parent,-1!==a.indexOf(o))throw new Error('Illegal circular extends of "'+o+'".');a.push(o),i.push(d)}for(c=i.length,c=i.length-2;c>=0;c-=1)i[c].tokens=l(i[c].blocks,i[c+1].tokens),u(i[c].blocks,i[c].tokens);return i}validateOptions(n),this.options=utils.extend({},defaultOptions,n||{}),this.cache={},this.extensions={};var e=this,t=_tags,r=_filters;this.invalidateCache=function(){"memory"===e.options.cache&&(e.cache={})},this.setFilter=function(n,e){if("function"!=typeof e)throw new Error('Filter "'+n+'" is not a valid function.');r[n]=e},this.setTag=function(n,e,r,a,i){if("function"!=typeof e)throw new Error('Tag "'+n+'" parse method is not a valid function.');if("function"!=typeof r)throw new Error('Tag "'+n+'" compile method is not a valid function.');t[n]={parse:e,compile:r,ends:a||!1,block:!!i}},this.setExtension=function(n,t){e.extensions[n]=t},this.parse=function(n,i){validateOptions(i);var l,s=a(i),o={};for(l in i)i.hasOwnProperty(l)&&"locals"!==l&&(o[l]=i[l]);return i=utils.extend({},e.options,o),i.locals=s,parser.parse(this,n,i,t,r)},this.parseFile=function(n,t){var r;return t||(t={}),n=e.options.loader.resolve(n,t.resolveFrom),r=e.options.loader.load(n),t.filename||(t=utils.extend({filename:n},t)),e.parse(r,t)},this.precompile=function(n,t){var i,r=e.parse(n,t),a=d(r,t);a.length&&(r.tokens=l(r.blocks,a[0].tokens),u(r.blocks,r.tokens));try{i=new Function("_swig","_ctx","_filters","_utils","_fn",'  var _ext = _swig.extensions,\n    _output = "";\n'+parser.compile(r,a,t)+"\n  return _output;\n")}catch(o){utils.throwError(o,null,t.filename)}return{tpl:i,tokens:r}},this.render=function(n,t){return e.compile(n,t)()},this.renderFile=function(n,t,r){return r?void e.compileFile(n,{},function(n,e){var a;if(n)return void r(n);try{a=e(t)}catch(i){return void r(i)}r(null,a)}):e.compileFile(n)(t)},this.compile=function(n,t){function h(n){var t;return t=n&&d?utils.extend({},u,n):n&&!d?n:!n&&d?u:{},c.tpl(e,t,r,utils,efn)}var u,d,c,i=t?t.filename:null,l=i?s(i,t):null;return l?l:(u=a(t),d=utils.keys(u).length,c=this.precompile(n,t),utils.extend(h,c.tokens),i&&o(i,t,h),h)},this.compileFile=function(n,t,r){var a,i;return t||(t={}),n=e.options.loader.resolve(n,t.resolveFrom),t.filename||(t=utils.extend({filename:n},t)),(i=s(n,t))?r?void r(null,i):i:r?void e.options.loader.load(n,function(n,a){if(n)return void r(n);var i;try{i=e.compile(a,t)}catch(s){return void r(s)}r(n,i)}):(a=e.options.loader.load(n),e.compile(a,t))},this.run=function(n,t,i){var s=a({locals:t});return i&&o(i,{},n),n(e,s,r,utils,efn)}},defaultInstance=new exports.Swig,exports.setFilter=defaultInstance.setFilter,exports.setTag=defaultInstance.setTag,exports.setExtension=defaultInstance.setExtension,exports.parseFile=defaultInstance.parseFile,exports.precompile=defaultInstance.precompile,exports.compile=defaultInstance.compile,exports.compileFile=defaultInstance.compileFile,exports.render=defaultInstance.render,exports.renderFile=defaultInstance.renderFile,exports.run=defaultInstance.run,exports.invalidateCache=defaultInstance.invalidateCache,exports.loaders=loaders;