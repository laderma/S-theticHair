var t=require("tap"),origCwd=process.cwd();process.chdir(__dirname);var glob=require("../"),path=require("path");t.test(".",function(n){glob("/b*/**",{globDebug:!0,root:"."},function(e,t){n.ifError(e),n.like(t,[]),n.end()})}),t.test("a",function(n){console.error("root="+path.resolve("a")),glob("/b*/**",{globDebug:!0,root:path.resolve("a")},function(e,t){n.ifError(e);var r=["/b","/b/c","/b/c/d","/bc","/bc/e","/bc/e/f"].map(function(n){return path.join(path.resolve("a"),n).replace(/\\/g,"/")});n.like(t,r),n.end()})}),t.test("root=a, cwd=a/b",function(n){glob("/b*/**",{globDebug:!0,root:"a",cwd:path.resolve("a/b")},function(e,t){n.ifError(e),n.like(t,["/b","/b/c","/b/c/d","/bc","/bc/e","/bc/e/f"].map(function(n){return path.join(path.resolve("a"),n).replace(/\\/g,"/")})),n.end()})}),t.test("cd -",function(n){process.chdir(origCwd),n.end()});