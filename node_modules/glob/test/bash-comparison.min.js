function alphasort(n,e){return n=n.toLowerCase(),e=e.toLowerCase(),n>e?1:e>n?-1:0}function cleanResults(n){return n.map(function(n){return n.replace(/\/+/g,"/").replace(/\/$/,"")}).sort(alphasort).reduce(function(n,e){return e!==n[n.length-1]&&n.push(e),n},[]).sort(alphasort).map(function(n){return"win32"!==process.platform?n:n.replace(/^[a-zA-Z]:[\/\\]+/,"/").replace(/[\\\/]+/g,"/")})}var tap=require("tap"),child_process=require("child_process"),bashResults=require("./bash-results.json"),globs=Object.keys(bashResults),glob=require("../"),path=require("path");process.chdir(path.resolve(__dirname,"..")),globs.forEach(function(n){var e=bashResults[n];"win32"===process.platform&&e.some(function(n){return/\/symlink\//.test(n)})||(tap.test(n,function(t){glob(n,function(r,a){if(r)throw r;a=cleanResults(a),t.deepEqual(a,e,n),t.end()})}),tap.test(n+" sync",function(t){var r=cleanResults(glob.sync(n));t.deepEqual(r,e,"should match shell"),t.end()}))});