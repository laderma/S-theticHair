var tap=require("tap"),origCwd=process.cwd();process.chdir(__dirname),tap.test("changing cwd and searching for **/d",function(n){var e=require("../"),t=require("path");n.test(".",function(n){e("**/d",function(e,t){n.ifError(e),n.like(t,["a/b/c/d","a/c/d"]),n.end()})}),n.test("a",function(n){e("**/d",{cwd:t.resolve("a")},function(e,t){n.ifError(e),n.like(t,["b/c/d","c/d"]),n.end()})}),n.test("a/b",function(n){e("**/d",{cwd:t.resolve("a/b")},function(e,t){n.ifError(e),n.like(t,["c/d"]),n.end()})}),n.test("a/b/",function(n){e("**/d",{cwd:t.resolve("a/b/")},function(e,t){n.ifError(e),n.like(t,["c/d"]),n.end()})}),n.test(".",function(n){e("**/d",{cwd:process.cwd()},function(e,t){n.ifError(e),n.like(t,["a/b/c/d","a/c/d"]),n.end()})}),n.test("cd -",function(n){process.chdir(origCwd),n.end()}),n.end()});