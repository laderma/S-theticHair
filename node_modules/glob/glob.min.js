function glob(n,e,a){if("function"==typeof e&&(a=e,e={}),e||(e={}),"number"==typeof e)return void deprecated();var r=new Glob(n,e,a);return r.sync?r.found:r}function deprecated(){throw new Error("glob's interface has changed. Please see the docs.")}function globSync(n,e){return"number"==typeof e?void deprecated():(e=e||{},e.sync=!0,glob(n,e))}function Glob(n,e,a){function s(n,e,a){this._process(n,0,e,function(n){n&&this.emit("error",n),--i<=0&&this._finish()})}if(!(this instanceof Glob))return new Glob(n,e,a);"function"==typeof e&&(a=e,e=null),"function"==typeof a&&(this.on("error",a),this.on("end",function(n){a(null,n)})),e=e||{},this._endEmitted=!1,this.EOF={},this._emitQueue=[],this.paused=!1,this._processingEmitQueue=!1,this.maxDepth=e.maxDepth||1e3,this.maxLength=e.maxLength||1/0,this.cache=e.cache||{},this.statCache=e.statCache||{},this.changedCwd=!1;var r=process.cwd();if(e.hasOwnProperty("cwd")?(this.cwd=e.cwd,this.changedCwd=path.resolve(e.cwd)!==r):this.cwd=r,this.root=e.root||path.resolve(this.cwd,"/"),this.root=path.resolve(this.root),"win32"===process.platform&&(this.root=this.root.replace(/\\/g,"/")),this.nomount=!!e.nomount,!n)throw new Error("must provide pattern");if(e.matchBase&&-1===n.indexOf("/")){if(e.noglobstar)throw new Error("base matching requires globstar");n="**/"+n}this.strict=e.strict!==!1,this.dot=!!e.dot,this.mark=!!e.mark,this.sync=!!e.sync,this.nounique=!!e.nounique,this.nonull=!!e.nonull,this.nosort=!!e.nosort,this.nocase=!!e.nocase,this.stat=!!e.stat,this.debug=!!e.debug||!!e.globDebug,this.debug&&(this.log=console.error),this.silent=!!e.silent;var t=this.minimatch=new Minimatch(n,e);this.options=t.options,n=this.pattern=t.pattern,this.error=null,this.aborted=!1,this._globstars={},EE.call(this);var i=this.minimatch.set.length;this.matches=new Array(i),this.minimatch.set.forEach(s.bind(this))}function alphasorti(n,e){return n=n.toLowerCase(),e=e.toLowerCase(),alphasort(n,e)}function alphasort(n,e){return n>e?1:e>n?-1:0}function gsKey(n){return"**"+n.map(function(n){return n===minimatch.GLOBSTAR?"**":""+n}).join("/")}function absWin(n){if(absUnix(n))return!0;var e=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,a=e.exec(n),r=a[1]||"",t=r&&":"!==r.charAt(1),i=!!a[2]||t;return i}function absUnix(n){return"/"===n.charAt(0)||""===n}module.exports=glob;var fs=require("fs"),minimatch=require("minimatch"),Minimatch=minimatch.Minimatch,inherits=require("inherits"),EE=require("events").EventEmitter,path=require("path"),isDir={},assert=require("assert").ok;glob.fnmatch=deprecated,glob.sync=globSync,this._processingEmitQueue=!1,glob.Glob=Glob,inherits(Glob,EE),Glob.prototype.log=function(){},Glob.prototype._finish=function(){assert(this instanceof Glob);for(var n=this.nounique,e=n?[]:{},a=0,r=this.matches.length;r>a;a++){var t=this.matches[a];if(this.log("matches[%d] =",a,t),t){var s=Object.keys(t);n?e.push.apply(e,s):s.forEach(function(n){e[n]=!0})}else if(this.nonull){var i=this.minimatch.globSet[a];n?e.push(i):e[i]=!0}}n||(e=Object.keys(e)),this.nosort||(e=e.sort(this.nocase?alphasorti:alphasort)),this.mark&&(e=e.map(this._mark,this)),this.log("emitting end",e),this.EOF=this.found=e,this.emitMatch(this.EOF)},Glob.prototype._mark=function(n){var e=this.cache[n],a=n;if(e){var r=2===e||Array.isArray(e),t="/"===n.slice(-1);r&&!t?a+="/":!r&&t&&(a=a.slice(0,-1)),a!==n&&(this.statCache[a]=this.statCache[n],this.cache[a]=this.cache[n])}return a},Glob.prototype.abort=function(){this.aborted=!0,this.emit("abort")},Glob.prototype.pause=function(){this.paused||(this.sync&&this.emit("error",new Error("Can't pause/resume sync glob")),this.paused=!0,this.emit("pause"))},Glob.prototype.resume=function(){this.paused&&(this.sync&&this.emit("error",new Error("Can't pause/resume sync glob")),this.paused=!1,this.emit("resume"),this._processEmitQueue())},Glob.prototype.emitMatch=function(n){this.log("emitMatch",n),this._emitQueue.push(n),this._processEmitQueue()},Glob.prototype._processEmitQueue=function(n){function t(a,r){this.log("next",n,a,r);var t=n===this.EOF?"end":"match";assert(!this._endEmitted),"end"===t&&(this._endEmitted=!0),a&&(r&&!n.match(/\/$/)?n+="/":!r&&n.match(/\/$/)&&(n=n.replace(/\/+$/,""))),this.log("emit",t,n),this.emit(t,n),this._processingEmitQueue=!1,e&&n!==this.EOF&&!this.paused&&this._processEmitQueue()}this.log("pEQ paused=%j processing=%j m=%j",this.paused,this._processingEmitQueue,n);for(var e=!1;!this._processingEmitQueue&&!this.paused;){this._processingEmitQueue=!0;var n=this._emitQueue.shift();if(this.log(">processEmitQueue",n===this.EOF?":EOF:":n),!n){this.log(">processEmitQueue, falsey m"),this._processingEmitQueue=!1;break}if(n===this.EOF||!this.mark||this.stat)this.log("peq: unmarked, or eof"),t.call(this,0,!1);else if(this.statCache[n]){var r,a=this.statCache[n];a&&(r=a.isDirectory()?2:1),this.log("peq: stat cached"),t.call(this,r,2===r)}else this.log("peq: _stat, then next"),this._stat(n,t)}e=!0},Glob.prototype._process=function(n,e,a,r){assert(this instanceof Glob);var t=function(n,e){assert(this instanceof Glob),this.paused?(this._processQueue||(this._processQueue=[],this.once("resume",function(){var n=this._processQueue;this._processQueue=null,n.forEach(function(n){n()})})),this._processQueue.push(r.bind(this,n,e))):r.call(this,n,e)}.bind(this);if(this.aborted)return t();if(e>this.maxDepth)return t();for(var i=0;"string"==typeof n[i];)i++;var s;switch(i){case n.length:return s=n.join("/"),void this._stat(s,function(n,e){return n&&(s&&isAbsolute(s)&&!this.nomount&&(s="/"===s.charAt(0)?path.join(this.root,s):path.resolve(this.root,s)),"win32"===process.platform&&(s=s.replace(/\\/g,"/")),this.matches[a]=this.matches[a]||{},this.matches[a][s]=!0,this.emitMatch(s)),t()});case 0:s=null;break;default:s=n.slice(0,i),s=s.join("/")}var l;return null===s?l=".":isAbsolute(s)||isAbsolute(n.join("/"))?(s&&isAbsolute(s)||(s=path.join("/",s)),l=s=path.resolve(s),this.log("absolute: ",s,this.root,n,l)):l=s,this.log("readdir(%j)",l,this.cwd,this.root),this._readdir(l,function(r,l){if(r)return t();if(n[i]===minimatch.GLOBSTAR){var o=[n.slice(0,i).concat(n.slice(i+1))];if(l.forEach(function(e){("."!==e.charAt(0)||this.dot)&&(o.push(n.slice(0,i).concat(e).concat(n.slice(i+1))),o.push(n.slice(0,i).concat(e).concat(n.slice(i))))},this),o=o.filter(function(n){var e=gsKey(n),a=!this._globstars[e];return this._globstars[e]=!0,a},this),!o.length)return t();var u=o.length,h=null;return void o.forEach(function(n){this._process(n,e+1,a,function(n){return h?void 0:n?t(h=n):--u<=0?t():void 0})},this)}var d=(n[i],n[i]._glob),f=this.dot||"."===d.charAt(0);if(l=l.filter(function(e){return("."!==e.charAt(0)||f)&&e.match(n[i])}),i===n.length-1&&!this.mark&&!this.stat)return l.forEach(function(n){s&&(n="/"!==s?s+"/"+n:s+n),"/"!==n.charAt(0)||this.nomount||(n=path.join(this.root,n)),"win32"===process.platform&&(n=n.replace(/\\/g,"/")),this.matches[a]=this.matches[a]||{},this.matches[a][n]=!0,this.emitMatch(n)},this),t.call(this);var u=l.length,h=null;return 0===u?t():void l.forEach(function(r){var s=n.slice(0,i).concat(r).concat(n.slice(i+1));this._process(s,e+1,a,function(n){return h?void 0:n?t(h=n):0===--u?t.call(this):void 0})},this)})},Glob.prototype._stat=function(n,e){assert(this instanceof Glob);var a=n;if("/"===n.charAt(0)?a=path.join(this.root,n):this.changedCwd&&(a=path.resolve(this.cwd,n)),n.length>this.maxLength){var r=new Error("Path name too long");return r.code="ENAMETOOLONG",r.path=n,this._afterStat(n,a,e,r)}if(this.log("stat",[this.cwd,n,"=",a]),!this.stat&&this.cache.hasOwnProperty(n)){var t=this.cache[n],i=t&&(Array.isArray(t)||2===t);return this.sync?e.call(this,!!t,i):process.nextTick(e.bind(this,!!t,i))}var s=this.statCache[a];if(this.sync||s){var r;try{s=fs.statSync(a)}catch(l){r=l}this._afterStat(n,a,e,r,s)}else fs.stat(a,this._afterStat.bind(this,n,a,e))},Glob.prototype._afterStat=function(n,e,a,r,t){var i;assert(this instanceof Glob),"/"===e.slice(-1)&&t&&!t.isDirectory()&&(this.log("should be ENOTDIR, fake it"),r=new Error("ENOTDIR, not a directory '"+e+"'"),r.path=e,r.code="ENOTDIR",t=null);var s=!this.statCache[e];this.statCache[e]=t,r||!t?i=!1:(i=t.isDirectory()?2:1,s&&this.emit("stat",n,t)),this.cache[n]=this.cache[n]||i,a.call(this,!!i,2===i)},Glob.prototype._readdir=function(n,e){assert(this instanceof Glob);var a=n;if("/"===n.charAt(0)?a=path.join(this.root,n):isAbsolute(n)?a=n:this.changedCwd&&(a=path.resolve(this.cwd,n)),n.length>this.maxLength){var r=new Error("Path name too long");return r.code="ENAMETOOLONG",r.path=n,this._afterReaddir(n,a,e,r)}if(this.log("readdir",[this.cwd,n,a]),this.cache.hasOwnProperty(n)){var t=this.cache[n];if(Array.isArray(t))return this.sync?e.call(this,null,t):process.nextTick(e.bind(this,null,t));if(!t||1===t){var i=t?"ENOTDIR":"ENOENT",r=new Error((t?"Not a directory":"Not found")+": "+n);return r.path=n,r.code=i,this.log(n,r),this.sync?e.call(this,r):process.nextTick(e.bind(this,r))}}if(this.sync){var r,s;try{s=fs.readdirSync(a)}catch(l){r=l}return this._afterReaddir(n,a,e,r,s)}fs.readdir(a,this._afterReaddir.bind(this,n,a,e))},Glob.prototype._afterReaddir=function(n,e,a,r,t){if(assert(this instanceof Glob),t&&!r)return this.cache[n]=t,this.mark||this.stat||t.forEach(function(e){e="/"===n?n+e:n+"/"+e,this.cache[e]=!0},this),a.call(this,r,t);if(r)switch(r.code){case"ENOTDIR":return this.cache[n]=1,a.call(this,r);case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":return this.cache[n]=!1,a.call(this,r);default:return this.cache[n]=!1,this.strict&&this.emit("error",r),this.silent||console.error("glob error",r),a.call(this,r)}};var isAbsolute="win32"===process.platform?absWin:absUnix;