var EscapeStore=require("./escape-store");module.exports=function(e,n,t){var r=new EscapeStore("COMMENT");return{escape:function(e){for(var n=[],t=0,a=0,i=0;a<e.length&&(t=e.indexOf("/*",i),a=e.indexOf("*/",t+2),-1!=t&&-1!=a);){if(n.push(e.substring(i,t)),"!"==e[t+2]){var o=e.substring(t,a+2),s=r.store(o);n.push(s)}i=a+2}return n.length>0?n.join("")+e.substring(i,e.length):e},restore:function(a){var i=0,o=n?t:"";return a.replace(new RegExp(r.placeholderPattern+"("+t+"| )?","g"),function(n,t){switch(i++,e){case"*":return r.restore(t)+o;case 1:case"1":return 1==i?r.restore(t)+o:"";case 0:case"0":return""}})}}};