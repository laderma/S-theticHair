var EscapeStore=require("./escape-store");module.exports=function(){var e=new EscapeStore("FREE_TEXT"),n=function(e,n,t){for(var r=t;;){r=e.indexOf(n,r);{if(!(r>-1&&"\\"==e[r-1]))break;r+=1}}return r};return{escape:function(t){for(var r=[],a=0,i=0,o=0,s=null,u="'",l='"',c=t.length;i<t.length;){var f=t.indexOf(u,i+1),d=t.indexOf(l,i+1);if(-1==f&&(f=c),-1==d&&(d=c),d>f?(a=f,s=u):(a=d,s=l),-1==a)break;if(i=n(t,s,a+1),-1==i)break;var h=t.substring(a,i+1),p=e.store(h);r.push(t.substring(o,a)),r.push(p),o=i+1}return r.length>0?r.join("")+t.substring(o,t.length):t},restore:function(n){return n.replace(e.placeholderRegExp,e.restore)}}};