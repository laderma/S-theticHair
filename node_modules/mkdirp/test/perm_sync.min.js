var mkdirp=require("../"),path=require("path"),fs=require("fs"),test=require("tap").test;test("sync perm",function(n){n.plan(2);var e="/tmp/"+(Math.random()*(1<<30)).toString(16)+".json";mkdirp.sync(e,493),path.exists(e,function(t){t?fs.stat(e,function(e,t){e?n.fail(e):(n.equal(511&t.mode,493),n.ok(t.isDirectory(),"target not a directory"),n.end())}):n.fail("file not created")})}),test("sync root perm",function(n){n.plan(1);var e="/tmp";mkdirp.sync(e,493),path.exists(e,function(t){t?fs.stat(e,function(e,t){e?n.fail(e):(n.ok(t.isDirectory(),"target not a directory"),n.end())}):n.fail("file not created")})});