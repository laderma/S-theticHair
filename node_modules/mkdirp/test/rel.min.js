var mkdirp=require("../"),path=require("path"),fs=require("fs"),test=require("tap").test;test("rel",function(n){n.plan(2);var e=Math.floor(Math.random()*Math.pow(16,4)).toString(16),t=Math.floor(Math.random()*Math.pow(16,4)).toString(16),r=Math.floor(Math.random()*Math.pow(16,4)).toString(16),a=process.cwd();process.chdir("/tmp");var i=[e,t,r].join("/");mkdirp(i,493,function(e){e?n.fail(e):path.exists(i,function(e){e?fs.stat(i,function(e,t){e?n.fail(e):(process.chdir(a),n.equal(511&t.mode,493),n.ok(t.isDirectory(),"target not a directory"),n.end())}):n.fail("file not created")})})});