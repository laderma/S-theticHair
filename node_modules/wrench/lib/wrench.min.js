function isFileIncluded(e,n,t){function r(e){return"function"==typeof e?e(t,n)===!0:t.match(e)}if(e.include||e.exclude)return e.exclude&&r(e.exclude)?!1:e.include?r(e.include)?!0:!1:!0;if(e.filter){var a=e.filter;return e.whitelist?r(a)?!0:!1:r(a)?!1:!0}return!0}var fs=require("fs"),_path=require("path"),isWindows=!!process.platform.match(/^win/);exports.readdirSyncRecursive=function(e){e=e.replace(/\/$/,"");var n=function(e){var r,a,t=[],i=function(n){return fs.existsSync(_path.join(e,n))?fs.statSync(_path.join(e,n)).isDirectory():!1},s=function(n){return _path.join(e,n)};for(r=fs.readdirSync(e),a=r.filter(i),r=r.map(s),t=t.concat(r);a.length;)t=t.concat(n(_path.join(e,a.shift())));return t},t=n(e).map(function(n){return _path.relative(e,n)});return t},exports.readdirRecursive=function(e,n){function r(a){var i=function(e){return _path.join(a,e)};t++,fs.readdir(a,function(a,s){return a?void n(a):(t--,s=s.map(i),s.forEach(function(e){t++,fs.stat(e,function(a,i){t--,a?n(a):i.isDirectory()&&r(e),0==t&&n(null,null)})}),n(null,s.map(function(n){return _path.relative(e,n)})),void(0==t&&n(null,null)))})}e=e.replace(/\/$/,"");var t=0;r(e)},exports.rmdirSyncRecursive=function(e,n){var t;try{t=fs.readdirSync(e)}catch(r){if(n)return;throw new Error(r.message)}for(var a=0;a<t.length;a++){var i=_path.join(e,t[a]),s=fs.lstatSync(i);s.isDirectory()?exports.rmdirSyncRecursive(i):s.isSymbolicLink()?(isWindows&&fs.chmodSync(i,666),fs.unlinkSync(i)):(isWindows&&fs.chmodSync(i,666),fs.unlinkSync(i))}return fs.rmdirSync(e)},exports.copyDirSyncRecursive=function(e,n,t){t=t||{};try{if(fs.statSync(n).isDirectory()){if(!t.forceDelete)return new Error("You are trying to delete a directory that already exists. Specify forceDelete in the opts argument to override this. Bailing~");exports.rmdirSyncRecursive(n)}}catch(r){}var a=fs.statSync(e);try{fs.mkdirSync(n,a.mode)}catch(r){if("EEXIST"!==r.code)throw r}for(var i=fs.readdirSync(e),s=t.filter||t.include||t.exclude,l=(t.preserveFiles===!0,t.preserveTimestamps===!0),u=0;u<i.length;u++){if("undefined"!=typeof t){if(s&&!isFileIncluded(t,e,i[u]))continue;if(t.excludeHiddenUnix&&/^\./.test(i[u]))continue}var d=fs.lstatSync(_path.join(e,i[u])),c=function(e,n){if("undefined"==typeof t||!t.preserveFiles||!fs.existsSync(n)){var r=fs.readFileSync(e);fs.writeFileSync(n,r);var a=fs.lstatSync(e);fs.chmodSync(n,a.mode),l&&fs.utimesSync(n,a.atime,a.mtime)}};if(d.isDirectory())exports.copyDirSyncRecursive(_path.join(e,i[u]),_path.join(n,i[u]),t);else if(d.isSymbolicLink()){var h=fs.readlinkSync(_path.join(e,i[u]));if(h=_path.resolve(fs.realpathSync(e),h),"undefined"!=typeof t&&!t.inflateSymlinks){fs.symlinkSync(h,_path.join(n,i[u]));continue}var f=fs.lstatSync(h);f.isDirectory()?exports.copyDirSyncRecursive(h,_path.join(n,i[u]),t):c(h,_path.join(n,i[u]))}else c(_path.join(e,i[u]),_path.join(n,i[u]))}},exports.chmodSyncRecursive=function(e,n){for(var t=fs.readdirSync(e),r=0;r<t.length;r++){var a=fs.lstatSync(_path.join(e,t[r]));a.isDirectory()?exports.chmodSyncRecursive(_path.join(e,t[r]),n):fs.chmod(_path.join(e,t[r]),n)}fs.chmod(e,n)},exports.chownSyncRecursive=function(e,n,t){for(var r=fs.readdirSync(e),a=0;a<r.length;a++){var i=fs.lstatSync(_path.join(e,r[a]));i.isDirectory()?exports.chownSyncRecursive(_path.join(e,r[a]),n,t):fs.chownSync(_path.join(e,r[a]),n,t)}fs.chownSync(e,n,t)},exports.rmdirRecursive=function e(n,t,r){(null===r||"undefined"==typeof r)&&(r=function(e){}),fs.readdir(n,function(a,i){return a&&"boolean"==typeof t&&!t?r(a):("function"==typeof t&&(r=t),void function s(t){if(t)return r(t);var a=i.shift();if(null===a||"undefined"==typeof a)return fs.rmdir(n,r);var o=n+"/"+a;fs.lstat(o,function(n,t){return n?r(n):void(t.isDirectory()?e(o,s):fs.unlink(o,s))})}())})},exports.copyDirRecursive=function n(e,t,r,a){var i=Array.prototype.slice.apply(arguments);e=_path.normalize(e),t=_path.normalize(t),fs.stat(t,function(s,o){return s?("function"==typeof r&&(a=r),void fs.stat(e,function(r,i){return r?a(r):void fs.mkdir(t,i.mode,function(r){return r?a(r):void fs.readdir(e,function(r,i){return r?a(r):void function s(r){if(r)return a(r);var o=i.shift();if(null===o||"undefined"==typeof o)return a(null);var l=e+"/"+o,u=t+"/"+o;fs.stat(l,function(e,t){return e?a(e):void(t.isDirectory()?n(l,u,s,a):t.isSymbolicLink()?fs.readlink(l,function(e,n){return e?a(e):void fs.symlink(n,u,s)}):fs.readFile(l,function(e,n){return e?a(e):void fs.writeFile(u,n,s)}))})}()})})})):"undefined"!=typeof r&&"function"!=typeof r&&r.forceDelete?exports.rmdirRecursive(t,function(e){n.apply(this,i)}):a(new Error("You are trying to delete a directory that already exists. Specify forceDelete in an options object to override this."))})};var mkdirSyncRecursive=function(e,n){e=_path.normalize(e);try{fs.mkdirSync(e,n)}catch(r){if("ENOENT"!=r.code){if("EEXIST"==r.code)return;throw r}var a=e.lastIndexOf(_path.sep);if(!(a>0))throw r;var i=e.substring(0,a);mkdirSyncRecursive(i,n),mkdirSyncRecursive(e,n)}};exports.mkdirSyncRecursive=mkdirSyncRecursive,exports.LineReader=function(e,n){this.bufferSize=n||8192,this.buffer="",this.fd=fs.openSync(e,"r"),this.currentPosition=0},exports.LineReader.prototype={close:function(){return fs.closeSync(this.fd)},getBufferAndSetCurrentPosition:function(e){var n=fs.readSync(this.fd,this.bufferSize,e,"ascii");return this.buffer+=n[0],0===n[1]?this.currentPosition=-1:this.currentPosition=e+n[1],this.currentPosition},hasNextLine:function(){for(;-1===this.buffer.indexOf("\n");)if(this.getBufferAndSetCurrentPosition(this.currentPosition),-1===this.currentPosition)return!1;return this.buffer.indexOf("\n")>-1||0!==this.buffer.length?!0:!1},getNextLine:function(){var e=this.buffer.indexOf("\n"),n=this.buffer.substring(0,-1!=e?e:this.buffer.length);return this.buffer=this.buffer.substring(n.length+1,this.buffer.length),n}};