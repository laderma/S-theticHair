var testCase=require("nodeunit").testCase,fs=require("fs"),wrench=require("../lib/wrench"),path=require("path");module.exports=testCase({test_rmdirSyncRecursive:function(e){var n=__dirname+"/_tmp2/foo/bar";wrench.mkdirSyncRecursive(n,"777");var t=path.join(n,"test1.txt"),r=path.join(path.dirname(n),"test2.txt"),a=path.join(path.dirname(path.dirname(n)),"test3.txt");fs.writeFileSync(t,"foo bar baz"),fs.writeFileSync(r,"foo bar baz"),fs.writeFileSync(a,"foo bar baz"),fs.chmodSync(t,"444"),fs.chmodSync(r,"444"),fs.chmodSync(a,"444"),e.equals(fs.existsSync(n),!0,"Dir should exist - mkdirSyncRecursive not working?"),e.equals(fs.existsSync(t),!0,"File should exist"),e.equals(fs.existsSync(r),!0,"File should exist"),e.equals(fs.existsSync(a),!0,"File should exist"),wrench.rmdirSyncRecursive(n),e.equals(fs.existsSync(n),!1,"Dir should not exist now..."),e.equals(fs.existsSync(t),!1,"File should not exist"),e.equals(fs.existsSync(r),!0,"File should exist"),e.equals(fs.existsSync(a),!0,"File should exist"),wrench.rmdirSyncRecursive(path.dirname(path.dirname(n))),e.done()},test_rmdirSyncRecursiveFromRoot:function(e){var n=__dirname+"/_tmp3/foo/bar";wrench.mkdirSyncRecursive(n,"777");var t=path.join(n,"test1.txt"),r=path.join(path.dirname(n),"test2.txt"),a=path.join(path.dirname(path.dirname(n)),"test3.txt");fs.writeFileSync(t,"foo bar baz"),fs.writeFileSync(r,"foo bar baz"),fs.writeFileSync(a,"foo bar baz"),fs.chmodSync(t,"444"),fs.chmodSync(r,"444"),fs.chmodSync(a,"444"),e.equals(fs.existsSync(n),!0,"Dir should exist - mkdirSyncRecursive not working?"),e.equals(fs.existsSync(t),!0,"File should exist"),e.equals(fs.existsSync(r),!0,"File should exist"),e.equals(fs.existsSync(a),!0,"File should exist"),wrench.rmdirSyncRecursive(path.dirname(path.dirname(n))),e.equals(fs.existsSync(n),!1,"Dir should not exist now..."),e.equals(fs.existsSync(t),!1,"File should not exist"),e.equals(fs.existsSync(r),!1,"File should not exist"),e.equals(fs.existsSync(a),!1,"File should not exist"),e.done()}});