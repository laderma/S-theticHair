exports.removeSubsets=function(e){for(var t,r,i,n=e.length;--n>-1;){for(t=r=e[n],e[n]=null,i=!0;r;){if(e.indexOf(r)>-1){i=!1,e.splice(n,1);break}r=r.parent}i&&(e[n]=t)}return e};var POSITION={DISCONNECTED:1,PRECEDING:2,FOLLOWING:4,CONTAINS:8,CONTAINED_BY:16},comparePos=exports.compareDocumentPosition=function(e,n){var i,a,o,s,u,l,t=[],r=[];if(e===n)return 0;for(i=e;i;)t.unshift(i),i=i.parent;for(i=n;i;)r.unshift(i),i=i.parent;for(l=0;t[l]===r[l];)l++;return 0===l?POSITION.DISCONNECTED:(a=t[l-1],o=a.children,s=t[l],u=r[l],o.indexOf(s)>o.indexOf(u)?a===n?POSITION.FOLLOWING|POSITION.CONTAINED_BY:POSITION.FOLLOWING:a===e?POSITION.PRECEDING|POSITION.CONTAINS:POSITION.PRECEDING)};exports.uniqueSort=function(e){var t,r,n=e.length;for(e=e.slice();--n>-1;)t=e[n],r=e.indexOf(t),r>-1&&n>r&&e.splice(n,1);return e.sort(function(e,n){var t=comparePos(e,n);return t&POSITION.PRECEDING?-1:t&POSITION.FOLLOWING?1:0}),e};