function getStrictDecoder(e){var n=Object.keys(e).join("|"),t=getReplacer(e);n+="|#[xX][\\da-fA-F]+|#\\d+";var r=new RegExp("&(?:"+n+");","g");return function(e){return String(e).replace(r,t)}}function sorter(e,n){return n>e?1:-1}function getReplacer(e){return function(n){return"#"===n.charAt(1)?decodeCodePoint("X"===n.charAt(2)||"x"===n.charAt(2)?parseInt(n.substr(3),16):parseInt(n.substr(2),10)):e[n.slice(1,-1)]}}var entityMap=require("../maps/entities.json"),legacyMap=require("../maps/legacy.json"),xmlMap=require("../maps/xml.json"),decodeCodePoint=require("./decode_codepoint.js"),decodeXMLStrict=getStrictDecoder(xmlMap),decodeHTMLStrict=getStrictDecoder(entityMap),decodeHTML=function(){function o(e){return";"!==e.substr(-1)&&(e+=";"),a(e)}for(var e=Object.keys(legacyMap).sort(sorter),n=Object.keys(entityMap).sort(sorter),t=0,r=0;t<n.length;t++)e[r]===n[t]?(n[t]+=";?",r++):n[t]+=";";var i=new RegExp("&(?:"+n.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),a=getReplacer(entityMap);return function(e){return String(e).replace(i,o)}}();module.exports={XML:decodeXMLStrict,HTML:decodeHTML,HTMLStrict:decodeHTMLStrict};