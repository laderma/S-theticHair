function getAttribCheck(e,n){return"function"==typeof n?function(t){return t.attribs&&n(t.attribs[e])}:function(t){return t.attribs&&t.attribs[e]===n}}function combineFuncs(e,n){return function(t){return e(t)||n(t)}}var ElementType=require("domelementtype"),isTag=exports.isTag=ElementType.isTag;exports.testElement=function(e,n){for(var t in e)if(e.hasOwnProperty(t)){if("tag_name"===t){if(!isTag(n)||!e.tag_name(n.name))return!1}else if("tag_type"===t){if(!e.tag_type(n.type))return!1}else if("tag_contains"===t){if(isTag(n)||!e.tag_contains(n.data))return!1}else if(!n.attribs||!e[t](n.attribs[t]))return!1}else;return!0};var Checks={tag_name:function(e){return"function"==typeof e?function(n){return isTag(n)&&e(n.name)}:"*"===e?isTag:function(n){return isTag(n)&&n.name===e}},tag_type:function(e){return"function"==typeof e?function(n){return e(n.type)}:function(n){return n.type===e}},tag_contains:function(e){return"function"==typeof e?function(n){return!isTag(n)&&e(n.data)}:function(n){return!isTag(n)&&n.data===e}}};exports.getElements=function(e,n,t,r){var i=Object.keys(e).map(function(n){var t=e[n];return n in Checks?Checks[n](t):getAttribCheck(n,t)});return 0===i.length?[]:this.filter(i.reduce(combineFuncs),n,t,r)},exports.getElementById=function(e,n,t){return Array.isArray(n)||(n=[n]),this.findOne(getAttribCheck("id",e),n,t!==!1)},exports.getElementsByTagName=function(e,n,t,r){return this.filter(Checks.tag_name(e),n,t,r)},exports.getElementsByTagType=function(e,n,t,r){return this.filter(Checks.tag_type(e),n,t,r)};