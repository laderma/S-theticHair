var select=require("CSSselect"),parse=require("./parse"),render=require("dom-serializer"),_=require("lodash");exports.load=function(n,e){var r=require("./cheerio");e=_.defaults(e||{},r.prototype.options);var a=parse(n,e),t=function(n,t,i,s){return s=_.defaults(s||{},e),r.call(this,n,t,i||a,s)};return t.prototype=r.prototype,_.merge(t,exports),t._root=a,t._options=e,t},exports.html=function(n,e){var r=require("./cheerio");return"[object Object]"!==Object.prototype.toString.call(n)||e||"length"in n||"type"in n||(e=n,n=void 0),e=_.defaults(e||{},this._options,r.prototype.options),n?(n="string"==typeof n?select(n,this._root,e):n,render(n,e)):this._root&&this._root.children?render(this._root.children,e):""},exports.xml=function(n){return n?(n="string"==typeof n?select(n,this._root,this.options):n,render(n,{xmlMode:!0})):this._root&&this._root.children?render(this._root.children,{xmlMode:!0}):""},exports.text=function(n){if(!n)return"";for(var a,e="",r=n.length,t=0;r>t;t++)a=n[t],"text"===a.type?e+=a.data:a.children&&"comment"!==a.type&&(e+=exports.text(a.children));return e},exports.parseHTML=function(n,e,r){var a;return n&&"string"==typeof n?("boolean"==typeof e&&(r=e),a=this.load(n),r||a("script").remove(),a.root()[0].children):null},exports.root=function(){return this(this._root)},exports.contains=function(n,e){if(e===n)return!1;for(;e&&e!==e.parent;)if(e=e.parent,e===n)return!0;return!1};