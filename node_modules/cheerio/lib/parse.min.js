var htmlparser=require("htmlparser2");exports=module.exports=function(n,e){var r=exports.evaluate(n,e),a=exports.evaluate("<root></root>",e)[0];return a.type="root",exports.update(r,a),a},exports.evaluate=function(n,e){var r;return r="string"==typeof n||Buffer.isBuffer(n)?htmlparser.parseDOM(n,e):n},exports.update=function(n,e){Array.isArray(n)||(n=[n]),e?e.children=n:e=null;for(var r=0;r<n.length;r++){var a=n[r],t=a.parent||a.root,i=t&&t.children;i&&i!==n&&(i.splice(i.indexOf(a),1),a.prev&&(a.prev.next=a.next),a.next&&(a.next.prev=a.prev)),e?(a.prev=n[r-1]||null,a.next=n[r+1]||null):a.prev=a.next=null,e&&"root"===e.type?(a.root=e,a.parent=null):(a.root=null,a.parent=e)}return e};