function noop(){}var bytes=require("bytes"),contentType=require("content-type"),cookieParser=require("cookie-parser"),createError=require("http-errors"),deprecate=require("depd")("connect"),http=require("http"),crypto=require("crypto"),parseurl=require("parseurl"),sep=require("path").sep,signature=require("cookie-signature"),typeis=require("type-is"),nodeVersion=process.versions.node.split("."),merge=require("utils-merge");exports.brokenPause=0===parseInt(nodeVersion[0],10)&&parseInt(nodeVersion[1],10)<10,exports.hasBody=deprecate["function"](typeis.hasBody,"utils.hasBody: use type-is npm module instead"),exports.mime=function(e){var n=e.headers["content-type"]||"",t=n.indexOf(";");return~t?n.slice(0,t):n},exports.mime=deprecate["function"](exports.mime,"utils.mime: use type-is npm module instead for mime comparisons"),exports.error=function(e,n){var t=new Error(n||http.STATUS_CODES[e]);return t.status=e,t},exports.error=deprecate["function"](exports.error,"utils.error: use http-errors npm module instead"),exports.md5=function(e,n){return crypto.createHash("md5").update(e,"utf8").digest(n||"hex")},exports.md5=deprecate["function"](exports.md5,"utils.md5: use crypto npm module instead for hashing"),exports.merge=deprecate["function"](merge,"utils.merge: use utils-merge npm module instead"),exports.escape=function(e){return String(e).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},exports.escape=deprecate["function"](exports.escape,"utils.escape: use escape-html npm module instead"),exports.sign=deprecate["function"](signature.sign,"utils.sign: use cookie-signature npm module instead"),exports.unsign=deprecate["function"](signature.unsign,"utils.unsign: use cookie-signature npm module instead"),exports.parseSignedCookies=deprecate["function"](cookieParser.signedCookies,"utils.parseSignedCookies: use cookie-parser npm module instead"),exports.parseSignedCookie=deprecate["function"](cookieParser.signedCookie,"utils.parseSignedCookie: use cookie-parser npm module instead"),exports.parseJSONCookies=deprecate["function"](cookieParser.JSONCookies,"utils.parseJSONCookies: use cookie-parser npm module instead"),exports.parseJSONCookie=deprecate["function"](cookieParser.JSONCookie,"utils.parseJSONCookie: use cookie-parser npm module instead"),exports.pause=exports.brokenPause?require("pause"):function(){return{end:noop,resume:noop}},exports.removeContentHeaders=function(e){e._headers&&Object.keys(e._headers).forEach(function(n){0==n.indexOf("content")&&e.removeHeader(n)})},exports.removeContentHeaders=deprecate["function"](exports.removeContentHeaders,"utils.removeContentHeaders: this private api moved with serve-static"),exports.conditionalGET=function(e){return e.headers["if-modified-since"]||e.headers["if-none-match"]},exports.conditionalGET=deprecate["function"](exports.conditionalGET,"utils.conditionalGET: use fresh npm module instead"),exports.unauthorized=function(e,n){e.statusCode=401,e.setHeader("WWW-Authenticate",'Basic realm="'+n+'"'),e.end("Unauthorized")},exports.unauthorized=deprecate["function"](exports.unauthorized,"utils.unauthorized: this private api moved with basic-auth-connect"),exports.notModified=function(e){exports.removeContentHeaders(e),e.statusCode=304,e.end()},exports.notModified=deprecate["function"](exports.notModified,"utils.notModified: this private api moved with serve-static"),exports.etag=function(e){return'"'+e.size+"-"+Number(e.mtime)+'"'},exports.etag=deprecate["function"](exports.etag,"utils.etag: this private api moved with serve-static"),exports.parseCacheControl=function(e){for(var n=e.split(","),t={},r=0,a=n.length;a>r;r++){var i=n[r].split("="),s=i.shift().trim(),o=parseInt(i.shift(),10);t[s]=isNaN(o)?!0:o}return t},exports.parseUrl=deprecate["function"](parseurl,"utils.parseUrl: use parseurl npm module instead"),exports.parseBytes=deprecate["function"](bytes,"utils.parseBytes: use bytes npm module instead"),exports.normalizeSlashes=function(e){return e.split(sep).join("/")},exports.normalizeSlashes=deprecate["function"](exports.normalizeSlashes,"utils.normalizeSlashes: this private api moved with serve-index"),exports.setCharset=function(e,n){if(!e||!n)return e;var t=contentType.parse(e),r=t.parameters.charset;return r?e:(t.parameters.charset=n,contentType.format(t))};