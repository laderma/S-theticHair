"use strict";function uid(e,n){if(void 0!==n&&"function"!=typeof n)throw new TypeError("argument callback must be a function");if(!n&&!global.Promise)throw new TypeError("argument callback is required");return n?generateUid(e,n):new Promise(function(n,t){generateUid(e,function(e,r){return e?t(e):void n(r)})})}function uidSync(e){try{return toString(crypto.randomBytes(e))}catch(n){return toString(crypto.pseudoRandomBytes(e))}}function generateUid(e,n){randomBytes(e,function(e,t){return e?n(e):void n(null,toString(t))})}function randomBytes(e,n){crypto.randomBytes(e,function(t,r){return t?void crypto.pseudoRandomBytes(e,function(e,t){return e?n(e):void n(null,t)}):n(null,r)})}function toString(e){return escape(e.toString("base64"))}var crypto=require("crypto"),escape=require("base64-url").escape;module.exports=uid,module.exports.sync=uidSync;