"use strict";function Accepts(e){return this instanceof Accepts?(this.headers=e.headers,void(this.negotiator=new Negotiator(e))):new Accepts(e)}function extToMime(e){return-1===e.indexOf("/")?mime.lookup(e):e}function validMime(e){return"string"==typeof e}var Negotiator=require("negotiator"),mime=require("mime-types");module.exports=Accepts,Accepts.prototype.type=Accepts.prototype.types=function(e){var n=e;if(n&&!Array.isArray(n)){n=new Array(arguments.length);for(var t=0;t<n.length;t++)n[t]=arguments[t]}if(!n||0===n.length)return this.negotiator.mediaTypes();if(!this.headers.accept)return n[0];var r=n.map(extToMime),i=this.negotiator.mediaTypes(r.filter(validMime)),a=i[0];return a?n[r.indexOf(a)]:!1},Accepts.prototype.encoding=Accepts.prototype.encodings=function(e){var n=e;if(n&&!Array.isArray(n)){n=new Array(arguments.length);for(var t=0;t<n.length;t++)n[t]=arguments[t]}return n&&0!==n.length?this.negotiator.encodings(n)[0]||!1:this.negotiator.encodings()},Accepts.prototype.charset=Accepts.prototype.charsets=function(e){var n=e;if(n&&!Array.isArray(n)){n=new Array(arguments.length);for(var t=0;t<n.length;t++)n[t]=arguments[t]}return n&&0!==n.length?this.negotiator.charsets(n)[0]||!1:this.negotiator.charsets()},Accepts.prototype.lang=Accepts.prototype.langs=Accepts.prototype.language=Accepts.prototype.languages=function(e){var n=e;if(n&&!Array.isArray(n)){n=new Array(arguments.length);for(var t=0;t<n.length;t++)n[t]=arguments[t]}return n&&0!==n.length?this.negotiator.languages(n)[0]||!1:this.negotiator.languages()};