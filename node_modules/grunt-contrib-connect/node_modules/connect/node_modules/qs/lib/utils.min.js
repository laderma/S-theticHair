var internals={};internals.hexTable=new Array(256);for(var h=0;256>h;++h)internals.hexTable[h]="%"+((16>h?"0":"")+h.toString(16)).toUpperCase();exports.arrayToObject=function(e,n){for(var t=n.plainObjects?Object.create(null):{},r=0,i=e.length;i>r;++r)"undefined"!=typeof e[r]&&(t[r]=e[r]);return t},exports.merge=function(e,n,t){if(!n)return e;if("object"!=typeof n)return Array.isArray(e)?e.push(n):"object"==typeof e?e[n]=!0:e=[e,n],e;if("object"!=typeof e)return e=[e].concat(n);Array.isArray(e)&&!Array.isArray(n)&&(e=exports.arrayToObject(e,t));for(var r=Object.keys(n),i=0,a=r.length;a>i;++i){var o=r[i],s=n[o];Object.prototype.hasOwnProperty.call(e,o)?e[o]=exports.merge(e[o],s,t):e[o]=s}return e},exports.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(n){return e}},exports.encode=function(e){if(0===e.length)return e;"string"!=typeof e&&(e=""+e);for(var n="",t=0,r=e.length;r>t;++t){var i=e.charCodeAt(t);45===i||46===i||95===i||126===i||i>=48&&57>=i||i>=65&&90>=i||i>=97&&122>=i?n+=e[t]:128>i?n+=internals.hexTable[i]:2048>i?n+=internals.hexTable[192|i>>6]+internals.hexTable[128|63&i]:55296>i||i>=57344?n+=internals.hexTable[224|i>>12]+internals.hexTable[128|i>>6&63]+internals.hexTable[128|63&i]:(++t,i=65536+((1023&i)<<10|1023&e.charCodeAt(t)),n+=internals.hexTable[240|i>>18]+internals.hexTable[128|i>>12&63]+internals.hexTable[128|i>>6&63]+internals.hexTable[128|63&i])}return n},exports.compact=function(e,n){if("object"!=typeof e||null===e)return e;n=n||[];var t=n.indexOf(e);if(-1!==t)return n[t];if(n.push(e),Array.isArray(e)){for(var r=[],i=0,a=e.length;a>i;++i)"undefined"!=typeof e[i]&&r.push(e[i]);return r}var o=Object.keys(e);for(i=0,a=o.length;a>i;++i){var s=o[i];e[s]=exports.compact(e[s],n)}return e},exports.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},exports.isBuffer=function(e){return null===e||"undefined"==typeof e?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))};