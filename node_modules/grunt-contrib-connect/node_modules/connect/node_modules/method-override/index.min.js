"use strict";function createGetter(e){return"X-"===e.substr(0,2).toUpperCase()?createHeaderGetter(e):createQueryGetter(e)}function createQueryGetter(e){return function(n,t){var r=parseurl(n),i=querystring.parse(r.query||"");return i[e]}}function createHeaderGetter(e){var n=e.toLowerCase();return function(t,r){return vary(r,e),(t.headers[n]||"").split(/ *, */)}}function supports(e){return e&&"string"==typeof e&&-1!==methods.indexOf(e.toLowerCase())}var debug=require("debug")("method-override"),methods=require("methods"),parseurl=require("parseurl"),querystring=require("querystring"),vary=require("vary");module.exports=function(e,n){n=n||{};var t="function"==typeof e?e:createGetter(e||"X-HTTP-Method-Override"),r=void 0===n.methods?["POST"]:n.methods;return function(e,n,i){var a,o;return e.originalMethod=e.originalMethod||e.method,r&&-1===r.indexOf(e.originalMethod)?i():(o=t(e,n),a=Array.isArray(o)?o[0]:o,void 0!==a&&supports(a)&&(e.method=a.toUpperCase(),debug("override %s as %s",e.originalMethod,e.method)),void i())}};