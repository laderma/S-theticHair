"use strict";function append(e,n){if("string"!=typeof e)throw new TypeError("header argument is required");if(!n)throw new TypeError("field argument is required");for(var t=Array.isArray(n)?n:parse(String(n)),r=0;r<t.length;r++)if(separators.test(t[r]))throw new TypeError("field argument contains an invalid header");if("*"===e)return e;var i=e,a=parse(e.toLowerCase());if(-1!==t.indexOf("*")||-1!==a.indexOf("*"))return"*";for(var r=0;r<t.length;r++){var o=t[r].toLowerCase();-1===a.indexOf(o)&&(a.push(o),i=i?i+", "+t[r]:t[r])}return i}function parse(e){return e.trim().split(/ *, */)}function vary(e,n){if(!e||!e.getHeader||!e.setHeader)throw new TypeError("res argument is required");var t=e.getHeader("Vary")||"",r=Array.isArray(t)?t.join(", "):String(t);(t=append(r,n))&&e.setHeader("Vary",t)}module.exports=vary,module.exports.append=append;var separators=/[\(\)<>@,;:\\"\/\[\]\?=\{\}\u0020\u0009]/;