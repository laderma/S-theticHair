"use strict";function charset(e){if(!e||"string"!=typeof e)return!1;var n=extractTypeRegExp.exec(e),t=n&&db[n[1].toLowerCase()];return t&&t.charset?t.charset:n&&textTypeRegExp.test(n[1])?"UTF-8":!1}function contentType(e){if(!e||"string"!=typeof e)return!1;var n=-1===e.indexOf("/")?exports.lookup(e):e;if(!n)return!1;if(-1===n.indexOf("charset")){var t=exports.charset(n);t&&(n+="; charset="+t.toLowerCase())}return n}function extension(e){if(!e||"string"!=typeof e)return!1;var n=extractTypeRegExp.exec(e),t=n&&exports.extensions[n[1].toLowerCase()];return t&&t.length?t[0]:!1}function lookup(e){if(!e||"string"!=typeof e)return!1;var n=extname("x."+e).toLowerCase().substr(1);return n?exports.types[n]||!1:!1}function populateMaps(e,n){var t=["nginx","apache",void 0,"iana"];Object.keys(db).forEach(function(r){var i=db[r],a=i.extensions;if(a&&a.length){e[r]=a;for(var o=0;o<a.length;o++){var s=a[o];if(n[s]){var u=t.indexOf(db[n[s]].source),l=t.indexOf(i.source);if("application/octet-stream"!==n[s]&&u>l||u===l&&"application/"===n[s].substr(0,12))continue}n[s]=r}}})}var db=require("mime-db"),extname=require("path").extname,extractTypeRegExp=/^\s*([^;\s]*)(?:;|\s|$)/,textTypeRegExp=/^text\//i;exports.charset=charset,exports.charsets={lookup:charset},exports.contentType=contentType,exports.extension=extension,exports.extensions=Object.create(null),exports.lookup=lookup,exports.types=Object.create(null),populateMaps(exports.extensions,exports.types);