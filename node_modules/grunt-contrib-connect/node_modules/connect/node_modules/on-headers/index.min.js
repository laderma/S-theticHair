function createWriteHead(e,n){var t=!1;return function(r){var a=setWriteHeadHeaders.apply(this,arguments);t||(t=!0,n.call(this),"number"==typeof a[0]&&this.statusCode!==a[0]&&(a[0]=this.statusCode,a.length=1)),e.apply(this,a)}}function setWriteHeadHeaders(e){var n=arguments.length,t=n>1&&"string"==typeof arguments[1]?2:1,r=n>=t+1?arguments[t]:void 0;if(this.statusCode=e,Array.isArray(r))for(var a=0,i=r.length;i>a;++a)this.setHeader(r[a][0],r[a][1]);else if(r)for(var o=Object.keys(r),a=0;a<o.length;a++){var s=o[a];s&&this.setHeader(s,r[s])}for(var u=new Array(Math.min(n,t)),a=0;a<u.length;a++)u[a]=arguments[a];return u}var slice=Array.prototype.slice;module.exports=function(e,n){if(!e)throw new TypeError("argument res is required");if("function"!=typeof n)throw new TypeError("argument listener must be a function");e.writeHead=createWriteHead(e.writeHead,n)};