var cookie=require("cookie"),parse=require("./lib/parse");exports=module.exports=function(e,n){return function(t,r,i){if(t.cookies)return i();var a=t.headers.cookie;return t.secret=e,t.cookies=Object.create(null),t.signedCookies=Object.create(null),a?(t.cookies=cookie.parse(a,n),e&&(t.signedCookies=parse.signedCookies(t.cookies,e),t.signedCookies=parse.JSONCookies(t.signedCookies)),t.cookies=parse.JSONCookies(t.cookies),void i()):i()}},exports.JSONCookie=parse.JSONCookie,exports.JSONCookies=parse.JSONCookies,exports.signedCookie=parse.signedCookie,exports.signedCookies=parse.signedCookies;