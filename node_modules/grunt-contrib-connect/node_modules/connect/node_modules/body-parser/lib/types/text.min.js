"use strict";function text(e){function u(e){return e}var n=e||{},t=n.defaultCharset||"utf-8",r=n.inflate!==!1,i="number"!=typeof n.limit?bytes.parse(n.limit||"100kb"):n.limit,a=n.type||"text/plain",o=n.verify||!1;if(o!==!1&&"function"!=typeof o)throw new TypeError("option verify must be function");var s="function"!=typeof a?typeChecker(a):a;return function(e,n,a){if(e._body)return debug("body already parsed"),a();if(e.body=e.body||{},!typeis.hasBody(e))return debug("skip empty body"),a();if(debug("content-type %j",e.headers["content-type"]),!s(e))return debug("skip parsing"),a();var l=getCharset(e)||t;read(e,n,a,u,debug,{encoding:l,inflate:r,limit:i,verify:o})}}function getCharset(e){try{return contentType.parse(e).parameters.charset.toLowerCase()}catch(n){return void 0}}function typeChecker(e){return function(n){return Boolean(typeis(n,e))}}var bytes=require("bytes"),contentType=require("content-type"),debug=require("debug")("body-parser:text"),read=require("../read"),typeis=require("type-is");module.exports=text;