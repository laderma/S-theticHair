"use strict";var bomHandling=require("./bom-handling"),iconv=module.exports;iconv.encodings=null,iconv.defaultCharUnicode="ï¿½",iconv.defaultCharSingleByte="?",iconv.encode=function(e,n,t){e=""+(e||"");var r=iconv.getEncoder(n,t),i=r.write(e),a=r.end();return a&&a.length>0?Buffer.concat([i,a]):i},iconv.decode=function(e,n,t){"string"==typeof e&&(iconv.skipDecodeWarning||(console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding"),iconv.skipDecodeWarning=!0),e=new Buffer(""+(e||""),"binary"));var r=iconv.getDecoder(n,t),i=r.write(e),a=r.end();return a?i+a:i},iconv.encodingExists=function(e){try{return iconv.getCodec(e),!0}catch(n){return!1}},iconv.toEncoding=iconv.encode,iconv.fromEncoding=iconv.decode,iconv._codecDataCache={},iconv.getCodec=function(e){iconv.encodings||(iconv.encodings=require("../encodings"));for(var n=(""+e).toLowerCase().replace(/[^0-9a-z]|:\d{4}$/g,""),t={};;){var r=iconv._codecDataCache[n];if(r)return r;var i=iconv.encodings[n];switch(typeof i){case"string":n=i;break;case"object":for(var a in i)t[a]=i[a];t.encodingName||(t.encodingName=n),n=i.type;break;case"function":return t.encodingName||(t.encodingName=n),r=new i(t,iconv),iconv._codecDataCache[t.encodingName]=r,r;default:throw new Error("Encoding not recognized: '"+e+"' (searched as: '"+n+"')")}}},iconv.getEncoder=function(e,n){var t=iconv.getCodec(e),r=new t.encoder(n,t);return t.bomAware&&n&&n.addBOM&&(r=new bomHandling.PrependBOM(r,n)),r},iconv.getDecoder=function(e,n){var t=iconv.getCodec(e),r=new t.decoder(n,t);return!t.bomAware||n&&n.stripBOM===!1||(r=new bomHandling.StripBOM(r,n)),r};var nodeVer="undefined"!=typeof process&&process.versions&&process.versions.node;if(nodeVer){var nodeVerArr=nodeVer.split(".").map(Number);(nodeVerArr[0]>0||nodeVerArr[1]>=10)&&require("./streams")(iconv),require("./extend-node")(iconv)}