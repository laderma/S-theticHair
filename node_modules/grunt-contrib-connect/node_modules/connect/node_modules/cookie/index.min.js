function parse(e,n){var t={},r=n||{},a=e.split(/; */),i=r.decode||decode;return a.forEach(function(e){var n=e.indexOf("=");if(!(0>n)){var r=e.substr(0,n).trim(),a=e.substr(++n,e.length).trim();'"'==a[0]&&(a=a.slice(1,-1)),void 0==t[r]&&(t[r]=tryDecode(a,i))}}),t}function serialize(e,n,t){var r=t||{},a=r.encode||encode,i=[e+"="+a(n)];if(null!=r.maxAge){var o=r.maxAge-0;if(isNaN(o))throw new Error("maxAge should be a Number");i.push("Max-Age="+o)}return r.domain&&i.push("Domain="+r.domain),r.path&&i.push("Path="+r.path),r.expires&&i.push("Expires="+r.expires.toUTCString()),r.httpOnly&&i.push("HttpOnly"),r.secure&&i.push("Secure"),i.join("; ")}function tryDecode(e,n){try{return n(e)}catch(t){return e}}exports.parse=parse,exports.serialize=serialize;var decode=decodeURIComponent,encode=encodeURIComponent;