!function(){function r(e){var t=!1;return function(){if(t)throw new Error("Callback was already called.");t=!0,e.apply(n,arguments)}}var n,t,e={};n=this,null!=n&&(t=n.async),e.noConflict=function(){return n.async=t,e};var a=Object.prototype.toString,i=Array.isArray||function(e){return"[object Array]"===a.call(e)},s=function(e,n){for(var t=0;t<e.length;t+=1)n(e[t],t,e)},o=function(e,n){if(e.map)return e.map(n);var t=[];return s(e,function(e,r,a){t.push(n(e,r,a))}),t},l=function(e,n,t){return e.reduce?e.reduce(n,t):(s(e,function(e,r,a){t=n(t,e,r,a)}),t)},u=function(e){if(Object.keys)return Object.keys(e);var n=[];for(var t in e)e.hasOwnProperty(t)&&n.push(t);return n};"undefined"!=typeof process&&process.nextTick?(e.nextTick=process.nextTick,"undefined"!=typeof setImmediate?e.setImmediate=function(e){setImmediate(e)}:e.setImmediate=e.nextTick):"function"==typeof setImmediate?(e.nextTick=function(e){setImmediate(e)},e.setImmediate=e.nextTick):(e.nextTick=function(e){setTimeout(e,0)},e.setImmediate=e.nextTick),e.each=function(e,n,t){function i(n){n?(t(n),t=function(){}):(a+=1,a>=e.length&&t())}if(t=t||function(){},!e.length)return t();var a=0;s(e,function(e){n(e,r(i))})},e.forEach=e.each,e.eachSeries=function(e,n,t){if(t=t||function(){},!e.length)return t();var r=0,a=function(){n(e[r],function(n){n?(t(n),t=function(){}):(r+=1,r>=e.length?t():a())})};a()},e.forEachSeries=e.eachSeries,e.eachLimit=function(e,n,t,r){var a=c(n);a.apply(null,[e,t,r])},e.forEachLimit=e.eachLimit;var c=function(e){return function(n,t,r){if(r=r||function(){},!n.length||0>=e)return r();var a=0,i=0,s=0;!function o(){if(a>=n.length)return r();for(;e>s&&i<n.length;)i+=1,s+=1,t(n[i-1],function(e){e?(r(e),r=function(){}):(a+=1,s-=1,a>=n.length?r():o())})}()}},d=function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[e.each].concat(t))}},f=function(e,n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[c(e)].concat(t))}},h=function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[e.eachSeries].concat(t))}},p=function(e,n,t,r){if(n=o(n,function(e,n){return{index:n,value:e}}),r){var a=[];e(n,function(e,n){t(e.value,function(t,r){a[e.index]=r,n(t)})},function(e){r(e,a)})}else e(n,function(e,n){t(e.value,function(e){n(e)})})};e.map=d(p),e.mapSeries=h(p),e.mapLimit=function(e,n,t,r){return m(n)(e,t,r)};var m=function(e){return f(e,p)};e.reduce=function(n,t,r,a){e.eachSeries(n,function(e,n){r(t,e,function(e,r){t=r,n(e)})},function(e){a(e,t)})},e.inject=e.reduce,e.foldl=e.reduce,e.reduceRight=function(n,t,r,a){var i=o(n,function(e){return e}).reverse();e.reduce(i,t,r,a)},e.foldr=e.reduceRight;var g=function(e,n,t,r){var a=[];n=o(n,function(e,n){return{index:n,value:e}}),e(n,function(e,n){t(e.value,function(t){t&&a.push(e),n()})},function(e){r(o(a.sort(function(e,n){return e.index-n.index}),function(e){return e.value}))})};e.filter=d(g),e.filterSeries=h(g),e.select=e.filter,e.selectSeries=e.filterSeries;var b=function(e,n,t,r){var a=[];n=o(n,function(e,n){return{index:n,value:e}}),e(n,function(e,n){t(e.value,function(t){t||a.push(e),n()})},function(e){r(o(a.sort(function(e,n){return e.index-n.index}),function(e){return e.value}))})};e.reject=d(b),e.rejectSeries=h(b);var _=function(e,n,t,r){e(n,function(e,n){t(e,function(t){t?(r(e),r=function(){}):n()})},function(e){r()})};e.detect=d(_),e.detectSeries=h(_),e.some=function(n,t,r){e.each(n,function(e,n){t(e,function(e){e&&(r(!0),r=function(){}),n()})},function(e){r(!1)})},e.any=e.some,e.every=function(n,t,r){e.each(n,function(e,n){t(e,function(e){e||(r(!1),r=function(){}),n()})},function(e){r(!0)})},e.all=e.every,e.sortBy=function(n,t,r){e.map(n,function(e,n){t(e,function(t,r){t?n(t):n(null,{value:e,criteria:r})})},function(e,n){if(e)return r(e);var t=function(e,n){var t=e.criteria,r=n.criteria;return r>t?-1:t>r?1:0};r(null,o(n.sort(t),function(e){return e.value}))})},e.auto=function(n,t){t=t||function(){};var r=u(n),a=r.length;if(!a)return t();var o={},c=[],d=function(e){c.unshift(e)},f=function(e){for(var n=0;n<c.length;n+=1)if(c[n]===e)return void c.splice(n,1)},h=function(){a--,s(c.slice(0),function(e){e()})};d(function(){if(!a){var e=t;t=function(){},e(null,o)}}),s(r,function(r){var a=i(n[r])?n[r]:[n[r]],c=function(n){var a=Array.prototype.slice.call(arguments,1);if(a.length<=1&&(a=a[0]),n){var i={};s(u(o),function(e){i[e]=o[e]}),i[r]=a,t(n,i),t=function(){}}else o[r]=a,e.setImmediate(h)},p=a.slice(0,Math.abs(a.length-1))||[],m=function(){return l(p,function(e,n){return e&&o.hasOwnProperty(n)},!0)&&!o.hasOwnProperty(r)};if(m())a[a.length-1](c,o);else{var g=function(){m()&&(f(g),a[a.length-1](c,o))};d(g)}})},e.retry=function(n,t,r){var a=5,i=[];"function"==typeof n&&(r=t,t=n,n=a),n=parseInt(n,10)||a;var s=function(a,s){for(var o=function(e,n){return function(t){e(function(e,r){t(!e||n,{err:e,result:r})},s)}};n;)i.push(o(t,!(n-=1)));e.series(i,function(e,n){n=n[n.length-1],(a||r)(n.err,n.result)})};return r?s():s},e.waterfall=function(n,t){if(t=t||function(){},!i(n)){var r=new Error("First argument to waterfall must be an array of functions");return t(r)}if(!n.length)return t();var a=function(n){return function(r){if(r)t.apply(null,arguments),t=function(){};else{var i=Array.prototype.slice.call(arguments,1),s=n.next();s?i.push(a(s)):i.push(t),e.setImmediate(function(){n.apply(null,i)})}}};a(e.iterator(n))()};var v=function(e,n,t){if(t=t||function(){},i(n))e.map(n,function(e,n){e&&e(function(e){var t=Array.prototype.slice.call(arguments,1);t.length<=1&&(t=t[0]),n.call(null,e,t)})},t);else{var r={};e.each(u(n),function(e,t){n[e](function(n){var a=Array.prototype.slice.call(arguments,1);a.length<=1&&(a=a[0]),r[e]=a,t(n)})},function(e){t(e,r)})}};e.parallel=function(n,t){v({map:e.map,each:e.each},n,t)},e.parallelLimit=function(e,n,t){v({map:m(n),each:c(n)},e,t)},e.series=function(n,t){if(t=t||function(){},i(n))e.mapSeries(n,function(e,n){e&&e(function(e){var t=Array.prototype.slice.call(arguments,1);t.length<=1&&(t=t[0]),n.call(null,e,t)})},t);else{var r={};e.eachSeries(u(n),function(e,t){n[e](function(n){var a=Array.prototype.slice.call(arguments,1);a.length<=1&&(a=a[0]),r[e]=a,t(n)})},function(e){t(e,r)})}},e.iterator=function(e){var n=function(t){var r=function(){return e.length&&e[t].apply(null,arguments),r.next()};return r.next=function(){return t<e.length-1?n(t+1):null},r};return n(0)},e.apply=function(e){var n=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,n.concat(Array.prototype.slice.call(arguments)))}};var y=function(e,n,t,r){var a=[];e(n,function(e,n){t(e,function(e,t){a=a.concat(t||[]),n(e)})},function(e){r(e,a)})};e.concat=d(y),e.concatSeries=h(y),e.whilst=function(n,t,r){n()?t(function(a){return a?r(a):void e.whilst(n,t,r)}):r()},e.doWhilst=function(n,t,r){n(function(a){if(a)return r(a);var i=Array.prototype.slice.call(arguments,1);t.apply(null,i)?e.doWhilst(n,t,r):r()})},e.until=function(n,t,r){n()?r():t(function(a){return a?r(a):void e.until(n,t,r)})},e.doUntil=function(n,t,r){n(function(a){if(a)return r(a);var i=Array.prototype.slice.call(arguments,1);t.apply(null,i)?r():e.doUntil(n,t,r)})},e.queue=function(n,t){function a(n,t,r,a){return n.started||(n.started=!0),i(t)||(t=[t]),0==t.length?e.setImmediate(function(){n.drain&&n.drain()}):void s(t,function(t){var i={data:t,callback:"function"==typeof a?a:null};r?n.tasks.unshift(i):n.tasks.push(i),n.saturated&&n.tasks.length===n.concurrency&&n.saturated(),e.setImmediate(n.process)})}void 0===t&&(t=1);var o=0,l={tasks:[],concurrency:t,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(e,n){a(l,e,!1,n)},kill:function(){l.drain=null,l.tasks=[]},unshift:function(e,n){a(l,e,!0,n)},process:function(){if(!l.paused&&o<l.concurrency&&l.tasks.length){var e=l.tasks.shift();l.empty&&0===l.tasks.length&&l.empty(),o+=1;var t=function(){o-=1,e.callback&&e.callback.apply(e,arguments),l.drain&&l.tasks.length+o===0&&l.drain(),l.process()},a=r(t);n(e.data,a)}},length:function(){return l.tasks.length},running:function(){return o},idle:function(){return l.tasks.length+o===0},pause:function(){l.paused!==!0&&(l.paused=!0)},resume:function(){if(l.paused!==!1){l.paused=!1;for(var n=1;n<=l.concurrency;n++)e.setImmediate(l.process)}}};return l},e.priorityQueue=function(n,t){function r(e,n){return e.priority-n.priority}function a(e,n,t){for(var r=-1,a=e.length-1;a>r;){var i=r+(a-r+1>>>1);t(n,e[i])>=0?r=i:a=i-1}return r}function o(n,t,o,l){return n.started||(n.started=!0),i(t)||(t=[t]),0==t.length?e.setImmediate(function(){n.drain&&n.drain()}):void s(t,function(t){var i={data:t,priority:o,callback:"function"==typeof l?l:null};n.tasks.splice(a(n.tasks,i,r)+1,0,i),n.saturated&&n.tasks.length===n.concurrency&&n.saturated(),e.setImmediate(n.process)})}var l=e.queue(n,t);return l.push=function(e,n,t){o(l,e,n,t)},delete l.unshift,l},e.cargo=function(n,t){var r=!1,a=[],l={tasks:a,payload:t,saturated:null,empty:null,drain:null,drained:!0,push:function(n,r){i(n)||(n=[n]),s(n,function(e){a.push({data:e,callback:"function"==typeof r?r:null}),l.drained=!1,l.saturated&&a.length===t&&l.saturated()}),e.setImmediate(l.process)},process:function u(){if(!r){if(0===a.length)return l.drain&&!l.drained&&l.drain(),void(l.drained=!0);var e="number"==typeof t?a.splice(0,t):a.splice(0,a.length),i=o(e,function(e){return e.data});l.empty&&l.empty(),r=!0,n(i,function(){r=!1;var n=arguments;s(e,function(e){e.callback&&e.callback.apply(null,n)}),u()})}},length:function(){return a.length},running:function(){return r}};return l};var k=function(e){return function(n){var t=Array.prototype.slice.call(arguments,1);n.apply(null,t.concat([function(n){var t=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(n?console.error&&console.error(n):console[e]&&s(t,function(n){console[e](n)}))}]))}};e.log=k("log"),e.dir=k("dir"),e.memoize=function(n,t){var r={},a={};t=t||function(e){return e};var i=function(){var i=Array.prototype.slice.call(arguments),s=i.pop(),o=t.apply(null,i);o in r?e.nextTick(function(){s.apply(null,r[o])}):o in a?a[o].push(s):(a[o]=[s],n.apply(null,i.concat([function(){r[o]=arguments;var e=a[o];delete a[o];for(var n=0,t=e.length;t>n;n++)e[n].apply(null,arguments)}])))};return i.memo=r,i.unmemoized=n,i},e.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},e.times=function(n,t,r){for(var a=[],i=0;n>i;i++)a.push(i);return e.map(a,t,r)},e.timesSeries=function(n,t,r){for(var a=[],i=0;n>i;i++)a.push(i);return e.mapSeries(a,t,r)},e.seq=function(){var n=arguments;return function(){var t=this,r=Array.prototype.slice.call(arguments),a=r.pop();e.reduce(n,r,function(e,n,r){n.apply(t,e.concat([function(){var e=arguments[0],n=Array.prototype.slice.call(arguments,1);r(e,n)}]))},function(e,n){a.apply(t,[e].concat(n))})}},e.compose=function(){return e.seq.apply(null,Array.prototype.reverse.call(arguments))};var w=function(e,n){var t=function(){var t=this,r=Array.prototype.slice.call(arguments),a=r.pop();return e(n,function(e,n){e.apply(t,r.concat([n]))},a)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return t.apply(this,r)}return t};e.applyEach=d(w),e.applyEachSeries=h(w),e.forever=function(e,n){function t(r){if(r){if(n)return n(r);throw r}e(t)}t()},"undefined"!=typeof module&&module.exports?module.exports=e:"undefined"!=typeof define&&define.amd?define([],function(){return e}):n.async=e}();