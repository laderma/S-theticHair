nodeunit=function(){this.JSON||(this.JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var n=meta[e];return"string"==typeof n?n:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,n){var t,r,i,a,s,o=gap,l=n[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(n,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(a=l.length,t=0;a>t;t+=1)s[t]=str(t,l)||"null";return i=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+o+"]":"["+s.join(",")+"]",gap=o,i}if(rep&&"object"==typeof rep)for(a=rep.length,t=0;a>t;t+=1)r=rep[t],"string"==typeof r&&(i=str(r,l),i&&s.push(quote(r)+(gap?": ":":")+i));else for(r in l)Object.hasOwnProperty.call(l,r)&&(i=str(r,l),i&&s.push(quote(r)+(gap?": ":":")+i));return i=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+o+"}":"{"+s.join(",")+"}",gap=o,i}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,n,t){var r;if(gap="",indent="","number"==typeof t)for(r=0;t>r;r+=1)indent+=" ";else"string"==typeof t&&(indent=t);if(rep=n,n&&"function"!=typeof n&&("object"!=typeof n||"number"!=typeof n.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,n){var t,r,i=e[n];if(i&&"object"==typeof i)for(t in i)Object.hasOwnProperty.call(i,t)&&(r=walk(i,t),void 0!==r?i[t]=r:delete i[t]);return reviver.call(e,n,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var assert=this.assert={},types={},core={},nodeunit={},reporter={};return function(){var e={},n=this,t=n.async;"undefined"!=typeof module&&module.exports?module.exports=e:n.async=e,e.noConflict=function(){return n.async=t,e};var r=function(e,n){if(e.forEach)return e.forEach(n);for(var t=0;t<e.length;t+=1)n(e[t],t,e)},i=function(e,n){if(e.map)return e.map(n);var t=[];return r(e,function(e,r,i){t.push(n(e,r,i))}),t},a=function(e,n,t){return e.reduce?e.reduce(n,t):(r(e,function(e,r,i){t=n(t,e,r,i)}),t)},o=function(e){if(Object.keys)return Object.keys(e);var n=[];for(var t in e)e.hasOwnProperty(t)&&n.push(t);return n},s=function(e,n){if(e.indexOf)return e.indexOf(n);for(var t=0;t<e.length;t+=1)if(e[t]===n)return t;return-1};e.nextTick=function(e){"undefined"!=typeof process&&process.nextTick?process.nextTick(e):setTimeout(e,0)},e.forEach=function(e,n,t){if(!e.length)return t();var i=0;r(e,function(r){n(r,function(n){n?(t(n),t=function(){}):(i+=1,i===e.length&&t())})})},e.forEachSeries=function(e,n,t){if(!e.length)return t();var r=0,i=function(){n(e[r],function(n){n?(t(n),t=function(){}):(r+=1,r===e.length?t():i())})};i()};var l=function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[e.forEach].concat(t))}},u=function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[e.forEachSeries].concat(t))}},c=function(e,n,t,r){var a=[];n=i(n,function(e,n){return{index:n,value:e}}),e(n,function(e,n){t(e.value,function(t,r){a[e.index]=r,n(t)})},function(e){r(e,a)})};e.map=l(c),e.mapSeries=u(c),e.reduce=function(n,t,r,i){e.forEachSeries(n,function(e,n){r(t,e,function(e,r){t=r,n(e)})},function(e){i(e,t)})},e.inject=e.reduce,e.foldl=e.reduce,e.reduceRight=function(n,t,r,a){var o=i(n,function(e){return e}).reverse();e.reduce(o,t,r,a)},e.foldr=e.reduceRight;var f=function(e,n,t,r){var a=[];n=i(n,function(e,n){return{index:n,value:e}}),e(n,function(e,n){t(e.value,function(t){t&&a.push(e),n()})},function(e){r(i(a.sort(function(e,n){return e.index-n.index}),function(e){return e.value}))})};e.filter=l(f),e.filterSeries=u(f),e.select=e.filter,e.selectSeries=e.filterSeries;var d=function(e,n,t,r){var a=[];n=i(n,function(e,n){return{index:n,value:e}}),e(n,function(e,n){t(e.value,function(t){t||a.push(e),n()})},function(e){r(i(a.sort(function(e,n){return e.index-n.index}),function(e){return e.value}))})};e.reject=l(d),e.rejectSeries=u(d);var h=function(e,n,t,r){e(n,function(e,n){t(e,function(t){t?r(e):n()})},function(e){r()})};e.detect=l(h),e.detectSeries=u(h),e.some=function(n,t,r){e.forEach(n,function(e,n){t(e,function(e){e&&(r(!0),r=function(){}),n()})},function(e){r(!1)})},e.any=e.some,e.every=function(n,t,r){e.forEach(n,function(e,n){t(e,function(e){e||(r(!1),r=function(){}),n()})},function(e){r(!0)})},e.all=e.every,e.sortBy=function(n,t,r){e.map(n,function(e,n){t(e,function(t,r){t?n(t):n(null,{value:e,criteria:r})})},function(e,n){if(e)return r(e);var t=function(e,n){var t=e.criteria,r=n.criteria;return r>t?-1:t>r?1:0};r(null,i(n.sort(t),function(e){return e.value}))})},e.auto=function(e,n){n=n||function(){};var t=o(e);if(!t.length)return n(null);var i=[],l=[],u=function(e){l.unshift(e)},c=function(e){for(var n=0;n<l.length;n+=1)if(l[n]===e)return void l.splice(n,1)},f=function(){r(l,function(e){e()})};u(function(){i.length===t.length&&n(null)}),r(t,function(t){var r=e[t]instanceof Function?[e[t]]:e[t],o=function(e){e?(n(e),n=function(){}):(i.push(t),f())},l=r.slice(0,Math.abs(r.length-1))||[],d=function(){return a(l,function(e,n){return e&&-1!==s(i,n)},!0)};if(d())r[r.length-1](o);else{var h=function(){d()&&(c(h),r[r.length-1](o))};u(h)}})},e.waterfall=function(n,t){if(!n.length)return t();t=t||function(){};var r=function(n){return function(i){if(i)t(i),t=function(){};else{var a=Array.prototype.slice.call(arguments,1),o=n.next();o?a.push(r(o)):a.push(t),e.nextTick(function(){n.apply(null,a)})}}};r(e.iterator(n))()},e.parallel=function(n,t){if(t=t||function(){},n.constructor===Array)e.map(n,function(e,n){e&&e(function(e){var t=Array.prototype.slice.call(arguments,1);t.length<=1&&(t=t[0]),n.call(null,e,t||null)})},t);else{var r={};e.forEach(o(n),function(e,t){n[e](function(n){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[e]=i,t(n)})},function(e){t(e,r)})}},e.series=function(n,t){if(t=t||function(){},n.constructor===Array)e.mapSeries(n,function(e,n){e&&e(function(e){var t=Array.prototype.slice.call(arguments,1);t.length<=1&&(t=t[0]),n.call(null,e,t||null)})},t);else{var r={};e.forEachSeries(o(n),function(e,t){n[e](function(n){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[e]=i,t(n)})},function(e){t(e,r)})}},e.iterator=function(e){var n=function(t){var r=function(){return e.length&&e[t].apply(null,arguments),r.next()};return r.next=function(){return t<e.length-1?n(t+1):null},r};return n(0)},e.apply=function(e){var n=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,n.concat(Array.prototype.slice.call(arguments)))}};var p=function(e,n,t,r){var i=[];e(n,function(e,n){t(e,function(e,t){i=i.concat(t||[]),n(e)})},function(e){r(e,i)})};e.concat=l(p),e.concatSeries=u(p),e.whilst=function(n,t,r){n()?t(function(i){return i?r(i):void e.whilst(n,t,r)}):r()},e.until=function(n,t,r){n()?r():t(function(i){return i?r(i):void e.until(n,t,r)})},e.queue=function(n,t){var r=0,i=[],a={concurrency:t,push:function(n,t){i.push({data:n,callback:t}),e.nextTick(a.process)},process:function(){if(r<a.concurrency&&i.length){var e=i.splice(0,1)[0];r+=1,n(e.data,function(){r-=1,e.callback&&e.callback.apply(e,arguments),a.process()})}},length:function(){return i.length}};return a};var m=function(e){return function(n){var t=Array.prototype.slice.call(arguments,1);n.apply(null,t.concat([function(n){var t=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(n?console.error&&console.error(n):console[e]&&r(t,function(n){console[e](n)}))}]))}};e.log=m("log"),e.dir=m("dir")}(),function(e){function a(e,n,t,i,a){throw new r.AssertionError({message:t,actual:e,expected:n,operator:i,stackStartFunction:a})}function o(e,n){return e===n?!0:e instanceof Date&&n instanceof Date?e.getTime()===n.getTime():"object"!=typeof e&&"object"!=typeof n?e==n:u(e,n)}function s(e){return null===e||void 0===e}function l(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function u(e,r){if(s(e)||s(r))return!1;if(e.prototype!==r.prototype)return!1;if(l(e))return l(r)?(e=t.call(e),r=t.call(r),o(e,r)):!1;try{var u,c,i=n(e),a=n(r)}catch(f){return!1}if(i.length!=a.length)return!1;for(i.sort(),a.sort(),c=i.length-1;c>=0;c--)if(i[c]!=a[c])return!1;for(c=i.length-1;c>=0;c--)if(u=i[c],!o(e[u],r[u]))return!1;return!0}function c(e,n,t,r){var i=null,o=!1,s=!0;r=r||"",3==arguments.length?"string"==typeof t&&(r=t,s=!1):2==arguments.length&&(s=!1);try{n()}catch(l){o=!0,i=l}if(e&&!o&&a("Missing expected exception"+(t&&t.name?" ("+t.name+").":".")+(r?" "+r:"")),!e&&o&&s&&i instanceof t&&a("Got unwanted exception"+(t&&t.name?" ("+t.name+").":".")+(r?" "+r:"")),e&&o&&s&&!(i instanceof t)||!e&&o)throw i}var n=function(e){if(Object.keys)return Object.keys(e);var n=[];for(var t in e)e.hasOwnProperty(t)&&n.push(t);return n},t=Array.prototype.slice,r=e;r.AssertionError=function(e){this.name="AssertionError",this.message=e.message,this.actual=e.actual,this.expected=e.expected,this.operator=e.operator;var n=e.stackStartFunction||a;Error.captureStackTrace&&Error.captureStackTrace(this,n)},r.AssertionError.super_=Error;var i=function(){this.constructor=r.AssertionError};i.prototype=Error.prototype,r.AssertionError.prototype=new i,r.AssertionError.prototype.toString=function(){return this.message?[this.name+":",this.message].join(" "):[this.name+":",JSON.stringify(this.expected),this.operator,JSON.stringify(this.actual)].join(" ")},r.AssertionError.__proto__=Error.prototype,r.fail=a,r.ok=function(e,n){e||a(e,!0,n,"==",r.ok)},r.equal=function(e,n,t){e!=n&&a(e,n,t,"==",r.equal)},r.notEqual=function(e,n,t){e==n&&a(e,n,t,"!=",r.notEqual)},r.deepEqual=function(e,n,t){o(e,n)||a(e,n,t,"deepEqual",r.deepEqual)},r.notDeepEqual=function(e,n,t){o(e,n)&&a(e,n,t,"notDeepEqual",r.notDeepEqual)},r.strictEqual=function(e,n,t){e!==n&&a(e,n,t,"===",r.strictEqual)},r.notStrictEqual=function(e,n,t){e===n&&a(e,n,t,"!==",r.notStrictEqual)},r["throws"]=function(e,n,r){c.apply(this,[!0].concat(t.call(arguments)))},r.doesNotThrow=function(e,n,r){c.apply(this,[!1].concat(t.call(arguments)))},r.ifError=function(e){if(e)throw e}}(assert),function(e){e.assertion=function(e){return{method:e.method||"",message:e.message||e.error&&e.error.message||"",error:e.error,passed:function(){return!this.error},failed:function(){return Boolean(this.error)}}},e.assertionList=function(e,n){var t=e||[];return t.failures=function(){for(var e=0,n=0;n<this.length;n++)this[n].failed()&&e++;return e},t.passes=function(){return t.length-t.failures()},t.duration=n||0,t};var n=function(n){return function(t,r,i){return function(){var a=arguments[i-1],o=e.assertion({method:t,message:a});try{assert[r].apply(null,arguments)}catch(s){o.error=s}n(o)}}};e.test=function(t,r,i,a){var o,s=[],l=n(function(e){s.push(e),i.log&&async.nextTick(function(){i.log(e)})}),u={done:function(n){if(void 0!==o&&o!==s.length){var l=new Error("Expected "+o+" assertions, "+s.length+" ran"),u=e.assertion({method:"expect",error:l});s.push(u),i.log&&async.nextTick(function(){i.log(u)})}if(n){var c=e.assertion({error:n});s.push(c),i.log&&async.nextTick(function(){i.log(c)})}var f=(new Date).getTime();async.nextTick(function(){var n=e.assertionList(s,f-r);i.testDone(t,n),a(null,s)})},ok:l("ok","ok",2),same:l("same","deepEqual",3),equals:l("equals","equal",3),expect:function(e){o=e},_assertion_list:s};for(var c in assert)assert.hasOwnProperty(c)&&(u[c]=l(c,c,assert[c].length));return u},e.options=function(e){var n=function(n){e[n]=e[n]||function(){}};return n("moduleStart"),n("moduleDone"),n("testStart"),n("testDone"),e}}(types),function(e){var n=function(e){if(Object.keys)return Object.keys(e);var n=[];for(var t in e)e.hasOwnProperty(t)&&n.push(t);return n};e.runTest=function(e,n,t,r){var i=types.options(t);i.testStart(e);var a=(new Date).getTime(),o=types.test(e,a,i,r);try{n(o)}catch(s){o.done(s)}},e.runSuite=function(t,r,i,a){var o=n(r);async.concatSeries(o,function(n,a){var s,o=r[n];s=t?[].concat(t,n):[n],s.toString=function(){return this.join(" - ")},"function"==typeof o?e.runTest(s,r[n],i,a):e.runSuite(s,r[n],i,a)},a)},e.runModule=function(n,t,r,i){var a=types.options(r);a.moduleStart(n);var o=(new Date).getTime();e.runSuite(null,t,r,function(e,t){var r=(new Date).getTime(),s=types.assertionList(t,r-o);a.moduleDone(n,s),i(null,t)})},e.runModules=function(t,r){var a=types.options(r),o=(new Date).getTime();async.concatSeries(n(t),function(n,r){e.runModule(n,t[n],a,r)},function(e,n){var t=(new Date).getTime();a.done(types.assertionList(n,t-o))})};var t=function(e,n,t){return function(r){var i={};if(n){var a=r.done;r.done=function(e){try{n.call(i,function(n){return e&&n?(r._assertion_list.push(types.assertion({error:e})),a(n)):void a(e||n)})}catch(t){a(t)}}}e?e.call(i,function(e){return e?r.done(e):void t.call(i,r)}):t.call(i,r)}},r=function(e,i,a){for(var o={},s=n(a),l=0;l<s.length;l++){var u=s[l];"function"==typeof a[u]?o[u]=t(e,i,a[u]):"object"==typeof a[u]&&(o[u]=r(e,i,a[u]))}return o};e.testCase=function(e){var n=e.setUp,t=e.tearDown;return delete e.setUp,delete e.tearDown,r(n,t,e)}}(core),function(e){e.info="Browser-based test reporter",e.run=function(e,n){function r(e,n){"innerText"in e?e.innerText=n:"textContent"in e&&(e.textContent=n)}function i(e,n){var t=document.getElementById(n);return t||(t=document.createElement(e),t.id=n,document.body.appendChild(t)),t}var t=(new Date).getTime(),o=(i("h1","nodeunit-header"),i("h2","nodeunit-banner")),s=i("h2","nodeunit-userAgent"),l=i("ol","nodeunit-tests"),u=i("p","nodeunit-testresult");r(s,navigator.userAgent),nodeunit.runModules(e,{moduleStart:function(e){},testDone:function(e,n){var t=document.createElement("li"),r=document.createElement("strong");r.innerHTML=e+' <b style="color: black;">(<b class="fail">'+n.failures()+'</b>, <b class="pass">'+n.passes()+"</b>, "+n.length+")</b>",t.className=n.failures()?"fail":"pass",t.appendChild(r);var i=document.createElement("ol");i.style.display="none",t.onclick=function(){var e=i.style.display;i.style.display="none"==e?"block":"none"};for(var a=0;a<n.length;a++){var o=document.createElement("li"),s=n[a];s.failed()?(o.innerHTML=(s.message||s.method||"no message")+"<pre>"+(s.error.stack||s.error)+"</pre>",o.className="fail"):(o.innerHTML=s.message||s.method||"no message",o.className="pass"),i.appendChild(o)}t.appendChild(i),l.appendChild(t)},done:function(e){var n=(new Date).getTime(),r=n-t,i=e.failures();o.className=i?"fail":"pass",u.innerHTML="Tests completed in "+r+' milliseconds.<br/><span class="passed">'+e.passes()+'</span> assertions of <span class="all">'+e.length+"<span> passed, "+e.failures()+" failed."}})}}(reporter),nodeunit=core,nodeunit.assert=assert,nodeunit.reporter=reporter,nodeunit.run=reporter.run,nodeunit}();