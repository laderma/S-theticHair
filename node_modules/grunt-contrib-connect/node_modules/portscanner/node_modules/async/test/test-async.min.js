var async=require("../lib/async");exports.auto=function(e){var n=[];async.auto({task1:["task2",function(e){setTimeout(function(){n.push("task1"),e()},25)}],task2:function(e){setTimeout(function(){n.push("task2"),e()},50)},task3:["task2",function(e){n.push("task3"),e()}],task4:["task1","task2",function(e){n.push("task4"),e()}]},function(t){e.same(n,["task2","task3","task1","task4"]),e.done()})},exports["auto results"]=function(e){var n=[];async.auto({task1:["task2",function(t,r){e.same(r.task2,"task2"),setTimeout(function(){n.push("task1"),t(null,"task1a","task1b")},25)}],task2:function(e){setTimeout(function(){n.push("task2"),e(null,"task2")},50)},task3:["task2",function(t,r){e.same(r.task2,"task2"),n.push("task3"),t(null)}],task4:["task1","task2",function(t,r){e.same(r.task1,["task1a","task1b"]),e.same(r.task2,"task2"),n.push("task4"),t(null,"task4")}]},function(t,r){e.same(n,["task2","task3","task1","task4"]),e.same(r,{task1:["task1a","task1b"],task2:"task2",task3:void 0,task4:"task4"}),e.done()})},exports["auto empty object"]=function(e){async.auto({},function(n){e.done()})},exports["auto error"]=function(e){e.expect(1),async.auto({task1:function(e){e("testerror")},task2:["task1",function(n){e.ok(!1,"task2 should not be called"),n()}],task3:function(e){e("testerror2")}},function(n){e.equals(n,"testerror")}),setTimeout(e.done,100)},exports["auto no callback"]=function(e){async.auto({task1:function(e){e()},task2:["task1",function(n){n(),e.done()}]})},exports.waterfall=function(e){e.expect(6);var n=[];async.waterfall([function(e){n.push("fn1"),setTimeout(function(){e(null,"one","two")},0)},function(t,r,i){n.push("fn2"),e.equals(t,"one"),e.equals(r,"two"),setTimeout(function(){i(null,t,r,"three")},25)},function(t,r,i,a){n.push("fn3"),e.equals(t,"one"),e.equals(r,"two"),e.equals(i,"three"),a(null,"four")},function(t,r){n.push("fn4"),e.same(n,["fn1","fn2","fn3","fn4"]),r(null,"test")}],function(n){e.done()})},exports["waterfall empty array"]=function(e){async.waterfall([],function(n){e.done()})},exports["waterfall no callback"]=function(e){async.waterfall([function(e){e()},function(n){n(),e.done()}])},exports["waterfall async"]=function(e){var n=[];async.waterfall([function(e){n.push(1),e(),n.push(2)},function(e){n.push(3),e()},function(){e.same(n,[1,2,3]),e.done()}])},exports["waterfall error"]=function(e){e.expect(1),async.waterfall([function(e){e("error")},function(n){e.ok(!1,"next function should not be called"),n()}],function(n){e.equals(n,"error")}),setTimeout(e.done,50)},exports["waterfall multiple callback calls"]=function(e){var n=[],t=[function(e){n.push(1),e(null,"one","two"),e(null,"one","two")},function(e,t,r){n.push(2),r(null,e,t,"three")},function(e,t,r,i){n.push(3),i(null,"four")},function(r){n.push(4),t[3]=function(){n.push(4),e.same(n,[1,2,2,3,3,4,4]),e.done()}}];async.waterfall(t)},exports.parallel=function(e){var n=[];async.parallel([function(e){setTimeout(function(){n.push(1),e(null,1)},50)},function(e){setTimeout(function(){n.push(2),e(null,2)},100)},function(e){setTimeout(function(){n.push(3),e(null,3,3)},25)}],function(t,r){e.equals(t,null),e.same(n,[3,1,2]),e.same(r,[1,2,[3,3]]),e.done()})},exports["parallel empty array"]=function(e){async.parallel([],function(n,t){e.equals(n,null),e.same(t,[]),e.done()})},exports["parallel error"]=function(e){async.parallel([function(e){e("error",1)},function(e){e("error2",2)}],function(n,t){e.equals(n,"error")}),setTimeout(e.done,100)},exports["parallel no callback"]=function(e){async.parallel([function(e){e()},function(n){n(),e.done()}])},exports["parallel object"]=function(e){var n=[];async.parallel({one:function(e){setTimeout(function(){n.push(1),e(null,1)},25)},two:function(e){setTimeout(function(){n.push(2),e(null,2)},50)},three:function(e){setTimeout(function(){n.push(3),e(null,3,3)},15)}},function(t,r){e.equals(t,null),e.same(n,[3,1,2]),e.same(r,{one:1,two:2,three:[3,3]}),e.done()})},exports.series=function(e){var n=[];async.series([function(e){setTimeout(function(){n.push(1),e(null,1)},25)},function(e){setTimeout(function(){n.push(2),e(null,2)},50)},function(e){setTimeout(function(){n.push(3),e(null,3,3)},15)}],function(t,r){e.equals(t,null),e.same(r,[1,2,[3,3]]),e.same(n,[1,2,3]),e.done()})},exports["series empty array"]=function(e){async.series([],function(n,t){e.equals(n,null),e.same(t,[]),e.done()})},exports["series error"]=function(e){e.expect(1),async.series([function(e){e("error",1)},function(n){e.ok(!1,"should not be called"),n("error2",2)}],function(n,t){e.equals(n,"error")}),setTimeout(e.done,100)},exports["series no callback"]=function(e){async.series([function(e){e()},function(n){n(),e.done()}])},exports["series object"]=function(e){var n=[];async.series({one:function(e){setTimeout(function(){n.push(1),e(null,1)},25)},two:function(e){setTimeout(function(){n.push(2),e(null,2)},50)},three:function(e){setTimeout(function(){n.push(3),e(null,3,3)},15)}},function(t,r){e.equals(t,null),e.same(r,{one:1,two:2,three:[3,3]}),e.same(n,[1,2,3]),e.done()})},exports.iterator=function(e){var n=[],t=async.iterator([function(){n.push(1)},function(t){e.equals(t,"arg1"),n.push(2)},function(t,r){e.equals(t,"arg1"),e.equals(r,"arg2"),n.push(3)}]);t(),e.same(n,[1]);var r=t();e.same(n,[1,1]);var i=r("arg1");e.same(n,[1,1,2]);var a=i("arg1","arg2");e.same(n,[1,1,2,3]),e.equals(a,void 0),e.done()},exports["iterator empty array"]=function(e){var n=async.iterator([]);e.equals(n(),void 0),e.equals(n.next(),void 0),e.done()},exports["iterator.next"]=function(e){var n=[],t=async.iterator([function(){n.push(1)},function(t){e.equals(t,"arg1"),n.push(2)},function(t,r){e.equals(t,"arg1"),e.equals(r,"arg2"),n.push(3)}]),r=t.next(),i=r("arg1");e.same(n,[2]),i("arg1","arg2"),e.same(n,[2,3]),e.equals(i.next(),void 0),e.done()},exports.forEach=function(e){var n=[];async.forEach([1,3,2],function(e,t){setTimeout(function(){n.push(e),t()},25*e)},function(t){e.same(n,[1,2,3]),e.done()})},exports["forEach empty array"]=function(e){e.expect(1),async.forEach([],function(n,t){e.ok(!1,"iterator should not be called"),t()},function(n){e.ok(!0,"should call callback")}),setTimeout(e.done,25)},exports["forEach error"]=function(e){e.expect(1),async.forEach([1,2,3],function(e,n){n("error")},function(n){e.equals(n,"error")}),setTimeout(e.done,50)},exports.forEachSeries=function(e){var n=[];async.forEachSeries([1,3,2],function(e,t){setTimeout(function(){n.push(e),t()},25*e)},function(t){e.same(n,[1,3,2]),e.done()})},exports["forEachSeries empty array"]=function(e){e.expect(1),async.forEachSeries([],function(n,t){e.ok(!1,"iterator should not be called"),t()},function(n){e.ok(!0,"should call callback")}),setTimeout(e.done,25)},exports["forEachSeries error"]=function(e){e.expect(2);var n=[];async.forEachSeries([1,2,3],function(e,t){n.push(e),t("error")},function(t){e.same(n,[1]),e.equals(t,"error")}),setTimeout(e.done,50)},exports.forEachLimit=function(e){var n=[],t=[0,1,2,3,4,5,6,7,8,9];async.forEachLimit(t,2,function(e,t){setTimeout(function(){n.push(e),t()},5*e)},function(r){e.same(n,t),e.done()})},exports["forEachLimit empty array"]=function(e){e.expect(1),async.forEachLimit([],2,function(n,t){e.ok(!1,"iterator should not be called"),t()},function(n){e.ok(!0,"should call callback")}),setTimeout(e.done,25)},exports["forEachLimit limit exceeds size"]=function(e){var n=[],t=[0,1,2,3,4,5,6,7,8,9];async.forEachLimit(t,20,function(e,t){setTimeout(function(){n.push(e),t()},5*e)},function(r){e.same(n,t),e.done()})},exports["forEachLimit limit equal size"]=function(e){var n=[],t=[0,1,2,3,4,5,6,7,8,9];async.forEachLimit(t,10,function(e,t){setTimeout(function(){n.push(e),t()},5*e)},function(r){e.same(n,t),e.done()})},exports["forEachLimit zero limit"]=function(e){e.expect(1),async.forEachLimit([0,1,2,3,4,5],0,function(n,t){e.ok(!1,"iterator should not be called"),t()},function(n){e.ok(!0,"should call callback")}),setTimeout(e.done,25)},exports["forEachLimit error"]=function(e){e.expect(2);var n=[0,1,2,3,4,5,6,7,8,9],t=[];async.forEachLimit(n,3,function(e,n){t.push(e),2===e&&n("error")},function(n){e.same(t,[0,1,2]),e.equals(n,"error")}),setTimeout(e.done,25)},exports.map=function(e){var n=[];async.map([1,3,2],function(e,t){setTimeout(function(){n.push(e),t(null,2*e)},25*e)},function(t,r){e.same(n,[1,2,3]),e.same(r,[2,6,4]),e.done()})},exports["map original untouched"]=function(e){var n=[1,2,3];async.map(n,function(e,n){n(null,2*e)},function(t,r){e.same(r,[2,4,6]),e.same(n,[1,2,3]),e.done()})},exports["map error"]=function(e){e.expect(1),async.map([1,2,3],function(e,n){n("error")},function(n,t){e.equals(n,"error")}),setTimeout(e.done,50)},exports.mapSeries=function(e){var n=[];async.mapSeries([1,3,2],function(e,t){setTimeout(function(){n.push(e),t(null,2*e)},25*e)},function(t,r){e.same(n,[1,3,2]),e.same(r,[2,6,4]),e.done()})},exports["mapSeries error"]=function(e){e.expect(1),async.mapSeries([1,2,3],function(e,n){n("error")},function(n,t){e.equals(n,"error")}),setTimeout(e.done,50)},exports.reduce=function(e){var n=[];async.reduce([1,2,3],0,function(e,t,r){n.push(t),r(null,e+t)},function(t,r){e.equals(r,6),e.same(n,[1,2,3]),e.done()})},exports["reduce async with non-reference memo"]=function(e){async.reduce([1,3,2],0,function(e,n,t){setTimeout(function(){t(null,e+n)},100*Math.random())},function(n,t){e.equals(t,6),e.done()})},exports["reduce error"]=function(e){e.expect(1),async.reduce([1,2,3],0,function(e,n,t){t("error")},function(n,t){e.equals(n,"error")}),setTimeout(e.done,50)},exports["inject alias"]=function(e){e.equals(async.inject,async.reduce),e.done()},exports["foldl alias"]=function(e){e.equals(async.foldl,async.reduce),e.done()},exports.reduceRight=function(e){var n=[],t=[1,2,3];async.reduceRight(t,0,function(e,t,r){n.push(t),r(null,e+t)},function(r,i){e.equals(i,6),e.same(n,[3,2,1]),e.same(t,[1,2,3]),e.done()})},exports["foldr alias"]=function(e){e.equals(async.foldr,async.reduceRight),e.done()},exports.filter=function(e){async.filter([3,1,2],function(e,n){setTimeout(function(){n(e%2)},25*e)},function(n){e.same(n,[3,1]),e.done()})},exports["filter original untouched"]=function(e){var n=[3,1,2];async.filter(n,function(e,n){n(e%2)},function(t){e.same(t,[3,1]),e.same(n,[3,1,2]),e.done()})},exports.filterSeries=function(e){async.filterSeries([3,1,2],function(e,n){setTimeout(function(){n(e%2)},25*e)},function(n){e.same(n,[3,1]),e.done()})},exports["select alias"]=function(e){e.equals(async.select,async.filter),e.done()},exports["selectSeries alias"]=function(e){e.equals(async.selectSeries,async.filterSeries),e.done()},exports.reject=function(e){async.reject([3,1,2],function(e,n){setTimeout(function(){n(e%2)},25*e)},function(n){e.same(n,[2]),e.done()})},exports["reject original untouched"]=function(e){var n=[3,1,2];async.reject(n,function(e,n){n(e%2)},function(t){e.same(t,[2]),e.same(n,[3,1,2]),e.done()})},exports.rejectSeries=function(e){async.rejectSeries([3,1,2],function(e,n){setTimeout(function(){n(e%2)},25*e)},function(n){e.same(n,[2]),e.done()})},exports["some true"]=function(e){async.some([3,1,2],function(e,n){setTimeout(function(){n(1===e)},0)},function(n){e.equals(n,!0),e.done()})},exports["some false"]=function(e){async.some([3,1,2],function(e,n){setTimeout(function(){n(10===e)},0)},function(n){e.equals(n,!1),e.done()})},exports["some early return"]=function(e){var n=[];async.some([1,2,3],function(e,t){setTimeout(function(){n.push(e),t(1===e)},25*e)},function(e){n.push("callback")}),setTimeout(function(){e.same(n,[1,"callback",2,3]),e.done()},100)},exports["any alias"]=function(e){e.equals(async.any,async.some),e.done()},exports["every true"]=function(e){async.every([1,2,3],function(e,n){setTimeout(function(){n(!0)},0)},function(n){e.equals(n,!0),e.done()})},exports["every false"]=function(e){async.every([1,2,3],function(e,n){setTimeout(function(){n(e%2)},0)},function(n){e.equals(n,!1),e.done()})},exports["every early return"]=function(e){var n=[];async.every([1,2,3],function(e,t){setTimeout(function(){n.push(e),t(1===e)},25*e)},function(e){n.push("callback")}),setTimeout(function(){e.same(n,[1,2,"callback",3]),e.done()},100)},exports["all alias"]=function(e){e.equals(async.all,async.every),e.done()},exports.detect=function(e){var n=[];async.detect([3,2,1],function(e,t){setTimeout(function(){n.push(e),t(2==e)},25*e)},function(t){n.push("callback"),e.equals(t,2)}),setTimeout(function(){e.same(n,[1,2,"callback",3]),e.done()},100)},exports["detect - mulitple matches"]=function(e){var n=[];async.detect([3,2,2,1,2],function(e,t){setTimeout(function(){n.push(e),t(2==e)},25*e)},function(t){n.push("callback"),e.equals(t,2)}),setTimeout(function(){e.same(n,[1,2,"callback",2,2,3]),e.done()},100)},exports.detectSeries=function(e){var n=[];async.detectSeries([3,2,1],function(e,t){setTimeout(function(){n.push(e),t(2==e)},25*e)},function(t){n.push("callback"),e.equals(t,2)}),setTimeout(function(){e.same(n,[3,2,"callback"]),e.done()},200)},exports["detectSeries - multiple matches"]=function(e){var n=[];async.detectSeries([3,2,2,1,2],function(e,t){setTimeout(function(){n.push(e),t(2==e)},25*e)},function(t){n.push("callback"),e.equals(t,2)}),setTimeout(function(){e.same(n,[3,2,"callback"]),e.done()},200)},exports.sortBy=function(e){async.sortBy([{a:1},{a:15},{a:6}],function(e,n){setTimeout(function(){n(null,e.a)},0)},function(n,t){e.same(t,[{a:1},{a:6},{a:15}]),e.done()})},exports.apply=function(e){e.expect(6);var n=function(){e.same(Array.prototype.slice.call(arguments),[1,2,3,4])};async.apply(n,1,2,3,4)(),async.apply(n,1,2,3)(4),async.apply(n,1,2)(3,4),async.apply(n,1)(2,3,4),async.apply(n)(1,2,3,4),e.equals(async.apply(function(e){return"hello "+e},"world")(),"hello world"),e.done()};var console_fn_tests=function(e){"undefined"!=typeof console&&(exports[e]=function(n){n.expect(5);var t=function(e,t){n.equals(e,"one"),setTimeout(function(){t(null,"test")},0)},r=function(e,t){n.equals(e,"one"),setTimeout(function(){t("error")},0)},i=console[e],a=console.error;console[e]=function(t){n.equals(t,"test"),n.equals(arguments.length,1),console.error=function(t){n.equals(t,"error"),console[e]=i,console.error=a,n.done()},async[e](r,"one")},async[e](t,"one")},exports[e+" with multiple result params"]=function(n){var t=function(e){e(null,"one","two","three")},r=console[e],i=[];console[e]=function(e){i.push(e)},async[e](t),n.same(i,["one","two","three"]),console[e]=r,n.done()}),exports[e+" without console."+e]=function(n){if("undefined"!=typeof window){var t=window.console;window.console=void 0;var r=function(e){e(null,"val")},i=function(e){e("error")};async[e](r),async[e](i),window.console=t}n.done()}};console_fn_tests("log"),console_fn_tests("dir"),exports.nextTick=function(e){var n=[];async.nextTick(function(){n.push("two")}),n.push("one"),setTimeout(function(){e.same(n,["one","two"]),e.done()},50)},exports["nextTick in the browser"]=function(e){if("undefined"!=typeof process)return e.done();e.expect(1);var n=[];async.nextTick(function(){n.push("two")}),n.push("one"),setTimeout(function(){"undefined"!=typeof process&&(process.nextTick=_nextTick),e.same(n,["one","two"])},50),setTimeout(e.done,100)},exports["noConflict - node only"]=function(e){if("undefined"!=typeof process){e.expect(3);var n=require("fs"),t=__dirname+"/../lib/async.js";n.readFile(t,function(n,r){if(n)return e.done();var i=process.binding("evals").Script,a=new i(r,t),o=new i(r+"this.async2 = this.async.noConflict();",t),s={async:"oldvalue"};a.runInNewContext(s),e.ok(s.async);var u={async:"oldvalue"};o.runInNewContext(u),e.equals(u.async,"oldvalue"),e.ok(u.async2),e.done()})}else e.done()},exports.concat=function(e){var n=[],t=function(e,t){setTimeout(function(){n.push(e);for(var r=[];e>0;)r.push(e),e--;t(null,r)},25*e)};async.concat([1,3,2],t,function(t,r){e.same(r,[1,2,1,3,2,1]),e.same(n,[1,2,3]),e.ok(!t),e.done()})},exports["concat error"]=function(e){var n=function(e,n){n(new Error("test error"))};async.concat([1,2,3],n,function(n,t){e.ok(n),e.done()})},exports.concatSeries=function(e){var n=[],t=function(e,t){setTimeout(function(){n.push(e);for(var r=[];e>0;)r.push(e),e--;t(null,r)},25*e)};async.concatSeries([1,3,2],t,function(t,r){e.same(r,[1,3,2,1,2,1]),e.same(n,[1,3,2]),e.ok(!t),e.done()})},exports.until=function(e){var n=[],t=0;async.until(function(){return n.push(["test",t]),5==t},function(e){n.push(["iterator",t]),t++,e()},function(r){e.same(n,[["test",0],["iterator",0],["test",1],["iterator",1],["test",2],["iterator",2],["test",3],["iterator",3],["test",4],["iterator",4],["test",5]]),e.equals(t,5),e.done()})},exports.whilst=function(e){var n=[],t=0;async.whilst(function(){return n.push(["test",t]),5>t},function(e){n.push(["iterator",t]),t++,e()},function(r){e.same(n,[["test",0],["iterator",0],["test",1],["iterator",1],["test",2],["iterator",2],["test",3],["iterator",3],["test",4],["iterator",4],["test",5]]),e.equals(t,5),e.done()})},exports.queue=function(e){var n=[],t=[40,20,60,20],r=async.queue(function(e,r){setTimeout(function(){n.push("process "+e),r("error","arg")},t.splice(0,1)[0])},2);r.push(1,function(t,i){e.equal(t,"error"),e.equal(i,"arg"),e.equal(r.length(),1),n.push("callback 1")}),r.push(2,function(t,i){e.equal(t,"error"),e.equal(i,"arg"),e.equal(r.length(),2),n.push("callback 2")}),r.push(3,function(t,i){e.equal(t,"error"),e.equal(i,"arg"),e.equal(r.length(),0),n.push("callback 3")}),r.push(4,function(t,i){e.equal(t,"error"),e.equal(i,"arg"),e.equal(r.length(),0),n.push("callback 4")}),e.equal(r.length(),4),e.equal(r.concurrency,2),setTimeout(function(){e.same(n,["process 2","callback 2","process 1","callback 1","process 4","callback 4","process 3","callback 3"]),e.equal(r.concurrency,2),e.equal(r.length(),0),e.done()},200)},exports["queue changing concurrency"]=function(e){var n=[],t=[40,20,60,20],r=async.queue(function(e,r){setTimeout(function(){n.push("process "+e),r("error","arg")},t.splice(0,1)[0])},2);r.push(1,function(t,i){e.equal(t,"error"),e.equal(i,"arg"),e.equal(r.length(),3),n.push("callback 1")}),r.push(2,function(t,i){e.equal(t,"error"),e.equal(i,"arg"),e.equal(r.length(),2),n.push("callback 2")}),r.push(3,function(t,i){e.equal(t,"error"),e.equal(i,"arg"),e.equal(r.length(),1),n.push("callback 3")}),r.push(4,function(t,i){e.equal(t,"error"),e.equal(i,"arg"),e.equal(r.length(),0),n.push("callback 4")}),e.equal(r.length(),4),e.equal(r.concurrency,2),r.concurrency=1,setTimeout(function(){e.same(n,["process 1","callback 1","process 2","callback 2","process 3","callback 3","process 4","callback 4"]),e.equal(r.concurrency,1),e.equal(r.length(),0),e.done()},250)},exports["queue push without callback"]=function(e){var n=[],t=[40,20,60,20],r=async.queue(function(e,r){setTimeout(function(){n.push("process "+e),r("error","arg")},t.splice(0,1)[0])},2);r.push(1),r.push(2),r.push(3),r.push(4),setTimeout(function(){e.same(n,["process 2","process 1","process 4","process 3"]),e.done()},200)},exports.memoize=function(e){e.expect(4);var n=[],t=function(e,t,r){n.push(["fn",e,t]),r(null,e+t)},r=async.memoize(t);r(1,2,function(n,t){e.equal(t,3)}),r(1,2,function(n,t){e.equal(t,3)}),r(2,2,function(n,t){e.equal(t,4)}),e.same(n,[["fn",1,2],["fn",2,2]]),e.done()},exports.unmemoize=function(e){e.expect(4);var n=[],t=function(e,t,r){n.push(["fn",e,t]),r(null,e+t)},r=async.memoize(t),i=async.unmemoize(r);i(1,2,function(n,t){e.equal(t,3)}),i(1,2,function(n,t){e.equal(t,3)}),i(2,2,function(n,t){e.equal(t,4)}),e.same(n,[["fn",1,2],["fn",1,2],["fn",2,2]]),e.done()},exports["unmemoize a not memoized function"]=function(e){e.expect(1);var n=function(e,n,t){t(null,e+n)},t=async.unmemoize(n);t(1,2,function(n,t){e.equal(t,3)}),e.done()},exports["memoize error"]=function(e){e.expect(1);var n=new Error("test"),t=function(e,t,r){r(n,e+t)};async.memoize(t)(1,2,function(t,r){e.equal(t,n)}),e.done()},exports["memoize multiple calls"]=function(e){e.expect(3);var n=function(n,t,r){e.ok(!0),setTimeout(function(){r(null,n,t)},10)},t=async.memoize(n);t(1,2,function(n,t){e.equal(t,1,2)}),t(1,2,function(n,t){e.equal(t,1,2),e.done()})},exports["memoize custom hash function"]=function(e){e.expect(2);var n=new Error("test"),t=function(e,t,r){r(n,e+t)},r=async.memoize(t,function(){return"custom hash"});r(1,2,function(n,t){e.equal(t,3)}),r(2,2,function(n,t){e.equal(t,3)}),e.done()},exports["falsy return values in series"]=function(e){function n(e){async.nextTick(function(){e(null,!1)})}function t(e){async.nextTick(function(){e(null,void 0)})}function r(e){async.nextTick(function(){e(null)})}function i(e){async.nextTick(function(){e(null,null)})}async.series([n,t,r,i],function(n,t){e.equal(t.length,4),e.strictEqual(t[0],!1),e.strictEqual(t[1],void 0),e.strictEqual(t[2],void 0),e.strictEqual(t[3],null),e.done()})},exports["falsy return values in parallel"]=function(e){function n(e){async.nextTick(function(){e(null,!1)})}function t(e){async.nextTick(function(){e(null,void 0)})}function r(e){async.nextTick(function(){e(null)})}function i(e){async.nextTick(function(){e(null,null)})}async.parallel([n,t,r,i],function(n,t){e.equal(t.length,4),e.strictEqual(t[0],!1),e.strictEqual(t[1],void 0),e.strictEqual(t[2],void 0),e.strictEqual(t[3],null),e.done()})},exports["queue events"]=function(e){var n=[],t=async.queue(function(e,t){n.push("process "+e),t()},3);t.saturated=function(){e.ok(3==t.length(),"queue should be saturated now"),n.push("saturated")},t.empty=function(){e.ok(0==t.length(),"queue should be empty now"),n.push("empty")},t.drain=function(){e.ok(0==t.length()&&0==t.running(),"queue should be empty now and no more workers should be running"),n.push("drain"),e.same(n,["saturated","process foo","foo cb","process bar","bar cb","process zoo","zoo cb","process poo","poo cb","empty","process moo","moo cb","drain"]),e.done()},t.push("foo",function(){n.push("foo cb")}),t.push("bar",function(){n.push("bar cb")}),t.push("zoo",function(){n.push("zoo cb")}),t.push("poo",function(){n.push("poo cb")}),t.push("moo",function(){n.push("moo cb")})};