if("function"!=typeof define)var define=require("amdefine")(module,require);define(function(e,n,t){var r=e("../../lib/source-map/source-map-consumer").SourceMapConsumer,i=e("../../lib/source-map/source-map-generator").SourceMapGenerator;n["test that we can instantiate with a string or an object"]=function(e,n){e.doesNotThrow(function(){new r(n.testMap)}),e.doesNotThrow(function(){new r(JSON.stringify(n.testMap))})},n["test that the `sources` field has the original sources"]=function(e,n){var t=new r(n.testMap),i=t.sources;e.equal(i[0],"/the/root/one.js"),e.equal(i[1],"/the/root/two.js"),e.equal(i.length,2)},n["test that the source root is reflected in a mapping's source field"]=function(e,n){var i,t=new r(n.testMap);i=t.originalPositionFor({line:2,column:1}),e.equal(i.source,"/the/root/two.js"),i=t.originalPositionFor({line:1,column:1}),e.equal(i.source,"/the/root/one.js")},n["test mapping tokens back exactly"]=function(e,n){var t=new r(n.testMap);n.assertMapping(1,1,"/the/root/one.js",1,1,null,t,e),n.assertMapping(1,5,"/the/root/one.js",1,5,null,t,e),n.assertMapping(1,9,"/the/root/one.js",1,11,null,t,e),n.assertMapping(1,18,"/the/root/one.js",1,21,"bar",t,e),n.assertMapping(1,21,"/the/root/one.js",2,3,null,t,e),n.assertMapping(1,28,"/the/root/one.js",2,10,"baz",t,e),n.assertMapping(1,32,"/the/root/one.js",2,14,"bar",t,e),n.assertMapping(2,1,"/the/root/two.js",1,1,null,t,e),n.assertMapping(2,5,"/the/root/two.js",1,5,null,t,e),n.assertMapping(2,9,"/the/root/two.js",1,11,null,t,e),n.assertMapping(2,18,"/the/root/two.js",1,21,"n",t,e),n.assertMapping(2,21,"/the/root/two.js",2,3,null,t,e),n.assertMapping(2,28,"/the/root/two.js",2,10,"n",t,e)},n["test mapping tokens fuzzy"]=function(e,n){var t=new r(n.testMap);n.assertMapping(1,20,"/the/root/one.js",1,21,"bar",t,e,!0),n.assertMapping(1,30,"/the/root/one.js",2,10,"baz",t,e,!0),n.assertMapping(2,12,"/the/root/two.js",1,11,null,t,e,!0),n.assertMapping(1,18,"/the/root/one.js",1,22,"bar",t,e,null,!0),n.assertMapping(1,28,"/the/root/one.js",2,13,"baz",t,e,null,!0),n.assertMapping(2,9,"/the/root/two.js",1,16,null,t,e,null,!0)},n["test mappings and end of lines"]=function(e,n){var t=new i({file:"foo.js"});t.addMapping({original:{line:1,column:1},generated:{line:1,column:1},source:"bar.js"}),t.addMapping({original:{line:2,column:2},generated:{line:2,column:2},source:"bar.js"});var a=r.fromSourceMap(t);n.assertMapping(2,1,null,null,null,null,a,e,!0),n.assertMapping(1,1,"bar.js",2,1,null,a,e,null,!0)},n["test creating source map consumers with )]}' prefix"]=function(e,n){e.doesNotThrow(function(){new r(")]}'"+JSON.stringify(n.testMap))})},n["test eachMapping"]=function(e,n){var t=new r(n.testMap),i=-(1/0),a=-(1/0);t.eachMapping(function(t){e.ok(t.generatedLine>=i),t.source&&e.equal(t.source.indexOf(n.testMap.sourceRoot),0),t.generatedLine===i?(e.ok(t.generatedColumn>=a),a=t.generatedColumn):(i=t.generatedLine,a=-(1/0))})},n["test iterating over mappings in a different order"]=function(e,n){var t=new r(n.testMap),i=-(1/0),a=-(1/0),o="";t.eachMapping(function(n){e.ok(n.source>=o),n.source===o?(e.ok(n.originalLine>=i),n.originalLine===i?(e.ok(n.originalColumn>=a),a=n.originalColumn):(i=n.originalLine,a=-(1/0))):(o=n.source,i=-(1/0),a=-(1/0))},null,r.ORIGINAL_ORDER)},n["test that we can set the context for `this` in eachMapping"]=function(e,n){var t=new r(n.testMap),i={};t.eachMapping(function(){e.equal(this,i)},i)},n["test that the `sourcesContent` field has the original sources"]=function(e,n){var t=new r(n.testMapWithSourcesContent),i=t.sourcesContent;e.equal(i[0]," ONE.foo = function (bar) {\n   return baz(bar);\n };"),e.equal(i[1]," TWO.inc = function (n) {\n   return n + 1;\n };"),e.equal(i.length,2)},n["test that we can get the original sources for the sources"]=function(e,n){var t=new r(n.testMapWithSourcesContent),i=t.sources;e.equal(t.sourceContentFor(i[0])," ONE.foo = function (bar) {\n   return baz(bar);\n };"),e.equal(t.sourceContentFor(i[1])," TWO.inc = function (n) {\n   return n + 1;\n };"),e.equal(t.sourceContentFor("one.js")," ONE.foo = function (bar) {\n   return baz(bar);\n };"),e.equal(t.sourceContentFor("two.js")," TWO.inc = function (n) {\n   return n + 1;\n };"),e["throws"](function(){t.sourceContentFor("")},Error),e["throws"](function(){t.sourceContentFor("/the/root/three.js")},Error),e["throws"](function(){t.sourceContentFor("three.js")},Error)},n["test sourceRoot + generatedPositionFor"]=function(e,n){var t=new i({sourceRoot:"foo/bar",file:"baz.js"});t.addMapping({original:{line:1,column:1},generated:{line:2,column:2},source:"bang.coffee"}),t.addMapping({original:{line:5,column:5},generated:{line:6,column:6},source:"bang.coffee"}),t=new r(t.toString());var a=t.generatedPositionFor({line:1,column:1,source:"bang.coffee"});e.equal(a.line,2),e.equal(a.column,2);var a=t.generatedPositionFor({line:1,column:1,source:"foo/bar/bang.coffee"});e.equal(a.line,2),e.equal(a.column,2)},n["test sourceRoot + originalPositionFor"]=function(e,n){var t=new i({sourceRoot:"foo/bar",file:"baz.js"});t.addMapping({original:{line:1,column:1},generated:{line:2,column:2},source:"bang.coffee"}),t=new r(t.toString());var a=t.originalPositionFor({line:2,column:2});e.equal(a.source,"foo/bar/bang.coffee"),e.equal(a.line,1),e.equal(a.column,1)},n["test github issue #56"]=function(e,n){var t=new i({sourceRoot:"http://",file:"www.example.com/foo.js"});t.addMapping({original:{line:1,column:1},generated:{line:2,column:2},source:"www.example.com/original.js"}),t=new r(t.toString());var a=t.sources;e.equal(a.length,1),e.equal(a[0],"http://www.example.com/original.js")},n["test github issue #43"]=function(e,n){var t=new i({sourceRoot:"http://example.com",file:"foo.js"});t.addMapping({original:{line:1,column:1},generated:{line:2,column:2},source:"http://cdn.example.com/original.js"}),t=new r(t.toString());var a=t.sources;e.equal(a.length,1,"Should only be one source."),e.equal(a[0],"http://cdn.example.com/original.js","Should not be joined with the sourceRoot.")},n["test absolute path, but same host sources"]=function(e,n){var t=new i({sourceRoot:"http://example.com/foo/bar",file:"foo.js"});t.addMapping({original:{line:1,column:1},generated:{line:2,column:2},source:"/original.js"}),t=new r(t.toString());var a=t.sources;e.equal(a.length,1,"Should only be one source."),e.equal(a[0],"http://example.com/original.js","Source should be relative the host of the source root.")},n["test github issue #64"]=function(e,n){var t=new r({version:3,file:"foo.js",sourceRoot:"http://example.com/",sources:["/a"],names:[],mappings:"AACA",sourcesContent:["foo"]});e.equal(t.sourceContentFor("a"),"foo"),e.equal(t.sourceContentFor("/a"),"foo")},n["test bug 885597"]=function(e,n){var t=new r({version:3,file:"foo.js",sourceRoot:"file:///Users/AlGore/Invented/The/Internet/",sources:["/a"],names:[],mappings:"AACA",sourcesContent:["foo"]}),i=t.sources[0];e.equal(t.sourceContentFor(i),"foo")},n["test github issue #72, duplicate sources"]=function(e,n){var t=new r({version:3,file:"foo.js",sources:["source1.js","source1.js","source3.js"],names:[],mappings:";EAAC;;IAEE;;MEEE",sourceRoot:"http://example.com"}),i=t.originalPositionFor({line:2,column:2});e.equal(i.source,"http://example.com/source1.js"),e.equal(i.line,1),e.equal(i.column,1);var i=t.originalPositionFor({line:4,column:4});e.equal(i.source,"http://example.com/source1.js"),e.equal(i.line,3),e.equal(i.column,3);var i=t.originalPositionFor({line:6,column:6});e.equal(i.source,"http://example.com/source3.js"),e.equal(i.line,5),e.equal(i.column,5)},n["test github issue #72, duplicate names"]=function(e,n){var t=new r({version:3,file:"foo.js",sources:["source.js"],names:["name1","name1","name3"],mappings:";EAACA;;IAEEA;;MAEEE",sourceRoot:"http://example.com"}),i=t.originalPositionFor({line:2,column:2});e.equal(i.name,"name1"),e.equal(i.line,1),e.equal(i.column,1);var i=t.originalPositionFor({line:4,column:4});e.equal(i.name,"name1"),e.equal(i.line,3),e.equal(i.column,3);var i=t.originalPositionFor({line:6,column:6});e.equal(i.name,"name3"),e.equal(i.line,5),e.equal(i.column,5)},n["test SourceMapConsumer.fromSourceMap"]=function(e,n){var t=new i({sourceRoot:"http://example.com/",file:"foo.js"});t.addMapping({original:{line:1,column:1},generated:{line:2,column:2},source:"bar.js"}),t.addMapping({original:{line:2,column:2},generated:{line:4,column:4},source:"baz.js",name:"dirtMcGirt"}),t.setSourceContent("baz.js","baz.js content");var a=r.fromSourceMap(t);e.equal(a.file,"foo.js"),e.equal(a.sourceRoot,"http://example.com/"),e.equal(a.sources.length,2),e.equal(a.sources[0],"http://example.com/bar.js"),e.equal(a.sources[1],"http://example.com/baz.js"),e.equal(a.sourceContentFor("baz.js"),"baz.js content");var o=a.originalPositionFor({line:2,column:2});e.equal(o.line,1),e.equal(o.column,1),e.equal(o.source,"http://example.com/bar.js"),e.equal(o.name,null),o=a.generatedPositionFor({line:1,column:1,source:"http://example.com/bar.js"}),e.equal(o.line,2),e.equal(o.column,2),o=a.originalPositionFor({line:4,column:4}),e.equal(o.line,2),e.equal(o.column,2),e.equal(o.source,"http://example.com/baz.js"),e.equal(o.name,"dirtMcGirt"),o=a.generatedPositionFor({line:2,column:2,source:"http://example.com/baz.js"}),e.equal(o.line,4),e.equal(o.column,4)}});