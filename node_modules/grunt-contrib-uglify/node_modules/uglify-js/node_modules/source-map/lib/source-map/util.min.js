if("function"!=typeof define)var define=require("amdefine")(module,require);define(function(e,n,t){function r(e,n,t){if(n in e)return e[n];if(3===arguments.length)return t;throw new Error('"'+n+'" is a required argument.')}function o(e){var n=e.match(i);return n?{scheme:n[1],auth:n[2],host:n[3],port:n[4],path:n[5]}:null}function s(e){var n="";return e.scheme&&(n+=e.scheme+":"),n+="//",e.auth&&(n+=e.auth+"@"),e.host&&(n+=e.host),e.port&&(n+=":"+e.port),e.path&&(n+=e.path),n}function u(e){var n=e,t=o(e);if(t){if(!t.path)return e;n=t.path}for(var a,r="/"===n.charAt(0),i=n.split(/\/+/),u=0,l=i.length-1;l>=0;l--)a=i[l],"."===a?i.splice(l,1):".."===a?u++:u>0&&(""===a?(i.splice(l+1,u),u=0):(i.splice(l,2),u--));return n=i.join("/"),""===n&&(n=r?"/":"."),t?(t.path=n,s(t)):n}function l(e,n){var t=o(n),r=o(e);if(r&&(e=r.path||"/"),t&&!t.scheme)return r&&(t.scheme=r.scheme),s(t);if(t||n.match(a))return n;if(r&&!r.host&&!r.path)return r.host=n,s(r);var i="/"===n.charAt(0)?n:u(e.replace(/\/+$/,"")+"/"+n);return r?(r.path=i,s(r)):i}function c(e){return"$"+e}function f(e){return e.substr(1)}function d(e,n){e=e.replace(/\/$/,"");var t=o(e);return"/"==n.charAt(0)&&t&&"/"==t.path?n.slice(1):0===n.indexOf(e+"/")?n.substr(e.length+1):n}function p(e,n){var t=e||"",r=n||"";return(t>r)-(r>t)}function h(e,n,t){var r;return(r=p(e.source,n.source))?r:(r=e.originalLine-n.originalLine)?r:(r=e.originalColumn-n.originalColumn,r||t?r:(r=p(e.name,n.name))?r:(r=e.generatedLine-n.generatedLine,r?r:e.generatedColumn-n.generatedColumn))}function m(e,n,t){var r;return(r=e.generatedLine-n.generatedLine)?r:(r=e.generatedColumn-n.generatedColumn,r||t?r:(r=p(e.source,n.source))?r:(r=e.originalLine-n.originalLine)?r:(r=e.originalColumn-n.originalColumn,r?r:p(e.name,n.name)))}n.getArg=r;var i=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,a=/^data:.+\,.+$/;n.urlParse=o,n.urlGenerate=s,n.normalize=u,n.join=l,n.toSetString=c,n.fromSetString=f,n.relative=d,n.compareByOriginalPositions=h,n.compareByGeneratedPositions=m});