"use strict";function Compressor(e,n){return this instanceof Compressor?(TreeTransformer.call(this,this.before,this.after),void(this.options=defaults(e,{sequences:!n,properties:!n,dead_code:!n,drop_debugger:!n,unsafe:!1,unsafe_comps:!1,conditionals:!n,comparisons:!n,evaluate:!n,booleans:!n,loops:!n,unused:!n,hoist_funs:!n,keep_fargs:!1,keep_fnames:!1,hoist_vars:!1,if_return:!n,join_vars:!n,cascade:!n,side_effects:!n,pure_getters:!1,pure_funcs:null,negate_iife:!n,screw_ie8:!1,drop_console:!1,angular:!1,warnings:!0,global_defs:{}},!0))):new Compressor(e,n)}Compressor.prototype=new TreeTransformer,merge(Compressor.prototype,{option:function(e){return this.options[e]},warn:function(){this.options.warnings&&AST_Node.warn.apply(AST_Node,arguments)},before:function(e,n,t){if(e._squeezed)return e;var r=!1;return e instanceof AST_Scope&&(e=e.hoist_declarations(this),r=!0),n(e,this),e=e.optimize(this),r&&e instanceof AST_Scope&&(e.drop_unused(this),n(e,this)),e._squeezed=!0,e}}),function(){function e(e,n){e.DEFMETHOD("optimize",function(e){var t=this;if(t._optimized)return t;var r=n(t,e);return r._optimized=!0,r===t?r:r.transform(e)})}function n(e,n,t){return t||(t={}),n&&(t.start||(t.start=n.start),t.end||(t.end=n.end)),new e(t)}function t(e,t,r){if(t instanceof AST_Node)return t.transform(e);switch(typeof t){case"string":return n(AST_String,r,{value:t}).optimize(e);case"number":return n(isNaN(t)?AST_NaN:AST_Number,r,{value:t}).optimize(e);case"boolean":return n(t?AST_True:AST_False,r).optimize(e);case"undefined":return n(AST_Undefined,r).optimize(e);default:if(null===t)return n(AST_Null,r,{value:null}).optimize(e);if(t instanceof RegExp)return n(AST_RegExp,r,{value:t}).optimize(e);throw new Error(string_template("Can't handle constant of type: {type}",{type:typeof t}))}}function r(e){if(null===e)return[];if(e instanceof AST_BlockStatement)return e.body;if(e instanceof AST_EmptyStatement)return[];if(e instanceof AST_Statement)return[e];throw new Error("Can't convert thing to statement array")}function a(e){return null===e?!0:e instanceof AST_EmptyStatement?!0:e instanceof AST_BlockStatement?0==e.body.length:!1}function i(e){return e instanceof AST_Switch?e:(e instanceof AST_For||e instanceof AST_ForIn||e instanceof AST_DWLoop)&&e.body instanceof AST_BlockStatement?e.body:e}function s(e,t){function s(e){function r(e){return/@ngInject/.test(e.value)}function a(e){return e.argnames.map(function(e){return n(AST_String,e,{value:e.name})})}function i(e,t){return n(AST_Array,e,{elements:t})}function s(e,t){return n(AST_SimpleStatement,e,{body:n(AST_Assign,e,{operator:"=",left:n(AST_Dot,t,{expression:n(AST_SymbolRef,t,t),property:"$inject"}),right:i(e,a(e))})})}function o(e){e&&e.args&&(e.args.forEach(function(e,n,t){var s=e.start.comments_before;e instanceof AST_Lambda&&s.length&&r(s[0])&&(t[n]=i(e,a(e).concat(e)))}),e.expression&&e.expression.expression&&o(e.expression.expression))}return e.reduce(function(e,n){if(e.push(n),n.body&&n.body.args)o(n.body);else{var a=n.start,i=a.comments_before;if(i&&i.length>0){var l=i.pop();r(l)&&(n instanceof AST_Defun?e.push(s(n,n.name)):n instanceof AST_Definitions?n.definitions.forEach(function(n){n.value&&n.value instanceof AST_Lambda&&e.push(s(n.value,n.name))}):t.warn("Unknown statement marked with @ngInject [{file}:{line},{col}]",a))}}return e},[])}function l(e){var n=[];return e.reduce(function(e,t){return t instanceof AST_BlockStatement?(a=!0,e.push.apply(e,l(t.body))):t instanceof AST_EmptyStatement?a=!0:t instanceof AST_Directive?n.indexOf(t.value)<0?(e.push(t),n.push(t.value)):a=!0:e.push(t),e},[])}function c(e,t){var s=t.self(),o=s instanceof AST_Lambda,l=[];e:for(var c=e.length;--c>=0;){var d=e[c];switch(!0){case o&&d instanceof AST_Return&&!d.value&&0==l.length:a=!0;continue e;case d instanceof AST_If:if(d.body instanceof AST_Return){if((o&&0==l.length||l[0]instanceof AST_Return&&!l[0].value)&&!d.body.value&&!d.alternative){a=!0;var f=n(AST_SimpleStatement,d.condition,{body:d.condition});l.unshift(f);continue e}if(l[0]instanceof AST_Return&&d.body.value&&l[0].value&&!d.alternative){a=!0,d=d.clone(),d.alternative=l[0],l[0]=d.transform(t);continue e}if((0==l.length||l[0]instanceof AST_Return)&&d.body.value&&!d.alternative&&o){a=!0,d=d.clone(),d.alternative=l[0]||n(AST_Return,d,{value:n(AST_Undefined,d)}),l[0]=d.transform(t);continue e}if(!d.body.value&&o){a=!0,d=d.clone(),d.condition=d.condition.negate(t),d.body=n(AST_BlockStatement,d,{body:r(d.alternative).concat(l)}),d.alternative=null,l=[d.transform(t)];continue e}if(1==l.length&&o&&l[0]instanceof AST_SimpleStatement&&(!d.alternative||d.alternative instanceof AST_SimpleStatement)){a=!0,l.push(n(AST_Return,l[0],{value:n(AST_Undefined,l[0])}).transform(t)),l=r(d.alternative).concat(l),l.unshift(d);continue e}}var h=u(d.body),p=h instanceof AST_LoopControl?t.loopcontrol_target(h.label):null;if(h&&(h instanceof AST_Return&&!h.value&&o||h instanceof AST_Continue&&s===i(p)||h instanceof AST_Break&&p instanceof AST_BlockStatement&&s===p)){h.label&&remove(h.label.thedef.references,h),a=!0;var m=r(d.body).slice(0,-1);d=d.clone(),d.condition=d.condition.negate(t),d.body=n(AST_BlockStatement,d,{body:r(d.alternative).concat(l)}),d.alternative=n(AST_BlockStatement,d,{body:m}),l=[d.transform(t)];continue e}var h=u(d.alternative),p=h instanceof AST_LoopControl?t.loopcontrol_target(h.label):null;if(h&&(h instanceof AST_Return&&!h.value&&o||h instanceof AST_Continue&&s===i(p)||h instanceof AST_Break&&p instanceof AST_BlockStatement&&s===p)){h.label&&remove(h.label.thedef.references,h),a=!0,d=d.clone(),d.body=n(AST_BlockStatement,d.body,{body:r(d.body).concat(l)}),d.alternative=n(AST_BlockStatement,d.alternative,{body:r(d.alternative).slice(0,-1)}),l=[d.transform(t)];continue e}l.unshift(d);break;default:l.unshift(d)}}return l}function d(e,n){var t=!1,r=e.length,s=n.self();return e=e.reduce(function(e,r){if(t)o(n,r,e);else{if(r instanceof AST_LoopControl){var a=n.loopcontrol_target(r.label);r instanceof AST_Break&&a instanceof AST_BlockStatement&&i(a)===s||r instanceof AST_Continue&&i(a)===s?r.label&&remove(r.label.thedef.references,r):e.push(r)}else e.push(r);u(r)&&(t=!0)}return e},[]),a=e.length!=r,e}function f(e,t){function s(){r=AST_Seq.from_array(r),r&&i.push(n(AST_SimpleStatement,r,{body:r})),r=[]}if(e.length<2)return e;var r=[],i=[];return e.forEach(function(e){e instanceof AST_SimpleStatement&&r.length<2e3?r.push(e.body):(s(),i.push(e))}),s(),i=h(i,t),a=i.length!=e.length,i}function h(e,t){function r(e){a.pop();var n=i.body;return n instanceof AST_Seq?n.add(e):n=AST_Seq.cons(n,e),n.transform(t)}var a=[],i=null;return e.forEach(function(e){if(i)if(e instanceof AST_For){var t={};try{i.body.walk(new TreeWalker(function(e){if(e instanceof AST_Binary&&"in"==e.operator)throw t})),!e.init||e.init instanceof AST_Definitions?e.init||(e.init=i.body,a.pop()):e.init=r(e.init)}catch(s){if(s!==t)throw s}}else e instanceof AST_If?e.condition=r(e.condition):e instanceof AST_With?e.expression=r(e.expression):e instanceof AST_Exit&&e.value?e.value=r(e.value):e instanceof AST_Exit?e.value=r(n(AST_Undefined,e)):e instanceof AST_Switch&&(e.expression=r(e.expression));a.push(e),i=e instanceof AST_SimpleStatement?e:null}),a}function p(e,n){var t=null;return e.reduce(function(e,n){return n instanceof AST_Definitions&&t&&t.TYPE==n.TYPE?(t.definitions=t.definitions.concat(n.definitions),a=!0):n instanceof AST_For&&t instanceof AST_Definitions&&(!n.init||n.init.TYPE==t.TYPE)?(a=!0,e.pop(),n.init?n.init.definitions=t.definitions.concat(n.init.definitions):n.init=t,e.push(n),t=n):(t=n,e.push(n)),e},[])}function m(e,t){e.forEach(function(e){e instanceof AST_SimpleStatement&&(e.body=function t(e){return e.transform(new TreeTransformer(function(e){if(e instanceof AST_Call&&e.expression instanceof AST_Function)return n(AST_UnaryPrefix,e,{operator:"!",expression:e});if(e instanceof AST_Call)e.expression=t(e.expression);else if(e instanceof AST_Seq)e.car=t(e.car);else if(e instanceof AST_Conditional){var r=t(e.condition);if(r!==e.condition){e.condition=r;var a=e.consequent;e.consequent=e.alternative,e.alternative=a}}return e}))}(e.body))})}var a;do a=!1,t.option("angular")&&(e=s(e)),e=l(e),t.option("dead_code")&&(e=d(e,t)),t.option("if_return")&&(e=c(e,t)),t.option("sequences")&&(e=f(e,t)),t.option("join_vars")&&(e=p(e,t));while(a);return t.option("negate_iife")&&m(e,t),e}function o(e,n,t){e.warn("Dropping unreachable code [{file}:{line},{col}]",n.start),n.walk(new TreeWalker(function(n){return n instanceof AST_Definitions?(e.warn("Declarations in unreachable code! [{file}:{line},{col}]",n.start),n.remove_initializers(),t.push(n),!0):n instanceof AST_Defun?(t.push(n),!0):n instanceof AST_Scope?!0:void 0}))}function l(e,n){return e.print_to_string().length>n.print_to_string().length?n:e}function u(e){return e&&e.aborts()}function c(e,t){function a(a){a=r(a),e.body instanceof AST_BlockStatement?(e.body=e.body.clone(),e.body.body=a.concat(e.body.body.slice(1)),e.body=e.body.transform(t)):e.body=n(AST_BlockStatement,e.body,{body:a}).transform(t),c(e,t)}var i=e.body instanceof AST_BlockStatement?e.body.body[0]:e.body;i instanceof AST_If&&(i.body instanceof AST_Break&&t.loopcontrol_target(i.body.label)===e?(e.condition?e.condition=n(AST_Binary,e.condition,{left:e.condition,operator:"&&",right:i.condition.negate(t)}):e.condition=i.condition.negate(t),a(i.alternative)):i.alternative instanceof AST_Break&&t.loopcontrol_target(i.alternative.label)===e&&(e.condition?e.condition=n(AST_Binary,e.condition,{left:e.condition,operator:"&&",right:i.condition}):e.condition=i.condition,a(i.body)))}function d(e,n){var t=n.option("pure_getters");n.options.pure_getters=!1;var r=e.has_side_effects(n);return n.options.pure_getters=t,r}function p(e,t){return t.option("booleans")&&t.in_boolean_context()&&!e.has_side_effects(t)?n(AST_True,e):e}e(AST_Node,function(e,n){return e}),AST_Node.DEFMETHOD("equivalent_to",function(e){return this.print_to_string()==e.print_to_string()}),function(e){var n=["!","delete"],t=["in","instanceof","==","!=","===","!==","<","<=",">=",">"];e(AST_Node,function(){return!1}),e(AST_UnaryPrefix,function(){return member(this.operator,n)}),e(AST_Binary,function(){return member(this.operator,t)||("&&"==this.operator||"||"==this.operator)&&this.left.is_boolean()&&this.right.is_boolean()}),e(AST_Conditional,function(){return this.consequent.is_boolean()&&this.alternative.is_boolean()}),e(AST_Assign,function(){return"="==this.operator&&this.right.is_boolean()}),e(AST_Seq,function(){return this.cdr.is_boolean()}),e(AST_True,function(){return!0}),e(AST_False,function(){return!0})}(function(e,n){e.DEFMETHOD("is_boolean",n)}),function(e){e(AST_Node,function(){return!1}),e(AST_String,function(){return!0}),e(AST_UnaryPrefix,function(){return"typeof"==this.operator}),e(AST_Binary,function(e){return"+"==this.operator&&(this.left.is_string(e)||this.right.is_string(e))}),e(AST_Assign,function(e){return("="==this.operator||"+="==this.operator)&&this.right.is_string(e)}),e(AST_Seq,function(e){return this.cdr.is_string(e)}),e(AST_Conditional,function(e){return this.consequent.is_string(e)&&this.alternative.is_string(e)}),e(AST_Call,function(e){return e.option("unsafe")&&this.expression instanceof AST_SymbolRef&&"String"==this.expression.name&&this.expression.undeclared()})}(function(e,n){e.DEFMETHOD("is_string",n)}),function(e){function n(e,n){if(!n)throw new Error("Compressor must be passed");return e._eval(n)}AST_Node.DEFMETHOD("evaluate",function(n){if(!n.option("evaluate"))return[this];try{var r=this._eval(n);return[l(t(n,r,this),this),r]}catch(a){if(a!==e)throw a;return[this]}}),e(AST_Statement,function(){throw new Error(string_template("Cannot evaluate a statement [{file}:{line},{col}]",this.start))}),e(AST_Function,function(){throw e}),e(AST_Node,function(){throw e}),e(AST_Constant,function(){return this.getValue()}),e(AST_UnaryPrefix,function(t){var r=this.expression;switch(this.operator){case"!":return!n(r,t);case"typeof":if(r instanceof AST_Function)return"function";if(r=n(r,t),r instanceof RegExp)throw e;return typeof r;case"void":return void n(r,t);case"~":return~n(r,t);case"-":if(r=n(r,t),0===r)throw e;return-r;case"+":return+n(r,t)}throw e}),e(AST_Binary,function(t){var r=this.left,a=this.right;switch(this.operator){case"&&":return n(r,t)&&n(a,t);case"||":return n(r,t)||n(a,t);case"|":return n(r,t)|n(a,t);case"&":return n(r,t)&n(a,t);case"^":return n(r,t)^n(a,t);case"+":return n(r,t)+n(a,t);case"*":return n(r,t)*n(a,t);case"/":return n(r,t)/n(a,t);case"%":return n(r,t)%n(a,t);case"-":return n(r,t)-n(a,t);case"<<":return n(r,t)<<n(a,t);case">>":return n(r,t)>>n(a,t);case">>>":return n(r,t)>>>n(a,t);case"==":return n(r,t)==n(a,t);case"===":return n(r,t)===n(a,t);case"!=":return n(r,t)!=n(a,t);case"!==":return n(r,t)!==n(a,t);case"<":return n(r,t)<n(a,t);case"<=":return n(r,t)<=n(a,t);case">":return n(r,t)>n(a,t);case">=":return n(r,t)>=n(a,t);case"in":return n(r,t)in n(a,t);case"instanceof":return n(r,t)instanceof n(a,t)}throw e}),e(AST_Conditional,function(e){return n(this.condition,e)?n(this.consequent,e):n(this.alternative,e)}),e(AST_SymbolRef,function(t){var r=this.definition();if(r&&r.constant&&r.init)return n(r.init,t);throw e}),e(AST_Dot,function(t){if(t.option("unsafe")&&"length"==this.property){var r=n(this.expression,t);if("string"==typeof r)return r.length}throw e})}(function(e,n){e.DEFMETHOD("_eval",n)}),function(e){function t(e){return n(AST_UnaryPrefix,e,{operator:"!",expression:e})}e(AST_Node,function(){return t(this)}),e(AST_Statement,function(){throw new Error("Cannot negate a statement")}),e(AST_Function,function(){return t(this)}),e(AST_UnaryPrefix,function(){return"!"==this.operator?this.expression:t(this)}),e(AST_Seq,function(e){var n=this.clone();return n.cdr=n.cdr.negate(e),n}),e(AST_Conditional,function(e){var n=this.clone();return n.consequent=n.consequent.negate(e),n.alternative=n.alternative.negate(e),l(t(this),n)}),e(AST_Binary,function(e){var n=this.clone(),r=this.operator;if(e.option("unsafe_comps"))switch(r){case"<=":return n.operator=">",n;case"<":return n.operator=">=",n;case">=":return n.operator="<",n;case">":return n.operator="<=",n}switch(r){case"==":return n.operator="!=",n;case"!=":return n.operator="==",n;case"===":return n.operator="!==",n;case"!==":return n.operator="===",n;case"&&":return n.operator="||",n.left=n.left.negate(e),n.right=n.right.negate(e),l(t(this),n);case"||":return n.operator="&&",n.left=n.left.negate(e),n.right=n.right.negate(e),l(t(this),n)}return t(this)})}(function(e,n){e.DEFMETHOD("negate",function(e){return n.call(this,e)})}),function(e){e(AST_Node,function(e){return!0}),e(AST_EmptyStatement,function(e){return!1}),e(AST_Constant,function(e){return!1}),e(AST_This,function(e){return!1}),e(AST_Call,function(e){var n=e.option("pure_funcs");return n?n.indexOf(this.expression.print_to_string())<0:!0}),e(AST_Block,function(e){for(var n=this.body.length;--n>=0;)if(this.body[n].has_side_effects(e))return!0;return!1}),e(AST_SimpleStatement,function(e){return this.body.has_side_effects(e)}),e(AST_Defun,function(e){return!0}),e(AST_Function,function(e){return!1}),e(AST_Binary,function(e){return this.left.has_side_effects(e)||this.right.has_side_effects(e)}),e(AST_Assign,function(e){return!0}),e(AST_Conditional,function(e){return this.condition.has_side_effects(e)||this.consequent.has_side_effects(e)||this.alternative.has_side_effects(e)}),e(AST_Unary,function(e){return"delete"==this.operator||"++"==this.operator||"--"==this.operator||this.expression.has_side_effects(e)}),e(AST_SymbolRef,function(e){return this.global()&&this.undeclared()}),e(AST_Object,function(e){for(var n=this.properties.length;--n>=0;)if(this.properties[n].has_side_effects(e))return!0;return!1}),e(AST_ObjectProperty,function(e){return this.value.has_side_effects(e)}),e(AST_Array,function(e){for(var n=this.elements.length;--n>=0;)if(this.elements[n].has_side_effects(e))return!0;return!1}),e(AST_Dot,function(e){return e.option("pure_getters")?this.expression.has_side_effects(e):!0}),e(AST_Sub,function(e){return e.option("pure_getters")?this.expression.has_side_effects(e)||this.property.has_side_effects(e):!0}),e(AST_PropAccess,function(e){return!e.option("pure_getters")}),e(AST_Seq,function(e){return this.car.has_side_effects(e)||this.cdr.has_side_effects(e)})}(function(e,n){e.DEFMETHOD("has_side_effects",n)}),function(e){function n(){var e=this.body.length;return e>0&&u(this.body[e-1])}e(AST_Statement,function(){return null}),e(AST_Jump,function(){return this}),e(AST_BlockStatement,n),e(AST_SwitchBranch,n),e(AST_If,function(){return this.alternative&&u(this.body)&&u(this.alternative)&&this})}(function(e,n){e.DEFMETHOD("aborts",n)}),e(AST_Directive,function(e,t){return e.scope.has_directive(e.value)!==e.scope?n(AST_EmptyStatement,e):e}),e(AST_Debugger,function(e,t){return t.option("drop_debugger")?n(AST_EmptyStatement,e):e}),e(AST_LabeledStatement,function(e,t){return e.body instanceof AST_Break&&t.loopcontrol_target(e.body.label)===e.body?n(AST_EmptyStatement,e):0==e.label.references.length?e.body:e}),e(AST_Block,function(e,n){return e.body=s(e.body,n),e}),e(AST_BlockStatement,function(e,t){switch(e.body=s(e.body,t),e.body.length){case 1:return e.body[0];case 0:return n(AST_EmptyStatement,e)}return e}),AST_Scope.DEFMETHOD("drop_unused",function(e){var t=this;if(e.option("unused")&&!(t instanceof AST_Toplevel)&&!t.uses_eval){var r=[],a=new Dictionary,i=this,s=new TreeWalker(function(n,o){if(n!==t){if(n instanceof AST_Defun)return a.add(n.name.name,n),!0;if(n instanceof AST_Definitions&&i===t)return n.definitions.forEach(function(n){n.value&&(a.add(n.name.name,n.value),n.value.has_side_effects(e)&&n.value.walk(s))}),!0;if(n instanceof AST_SymbolRef)return push_uniq(r,n.definition()),!0;if(n instanceof AST_Scope){var l=i;return i=n,o(),i=l,!0}}});t.walk(s);for(var o=0;o<r.length;++o)r[o].orig.forEach(function(e){var n=a.get(e.name);n&&n.forEach(function(e){var n=new TreeWalker(function(e){e instanceof AST_SymbolRef&&push_uniq(r,e.definition())});e.walk(n)})});var l=new TreeTransformer(function(a,i,s){if(a instanceof AST_Lambda&&!(a instanceof AST_Accessor)&&e.option("unsafe")&&!e.option("keep_fargs"))for(var o=a.argnames,u=o.length;--u>=0;){var c=o[u];if(!c.unreferenced())break;o.pop(),e.warn("Dropping unused function argument {name} [{file}:{line},{col}]",{name:c.name,file:c.start.file,line:c.start.line,col:c.start.col})}if(a instanceof AST_Defun&&a!==t)return member(a.name.definition(),r)?a:(e.warn("Dropping unused function {name} [{file}:{line},{col}]",{name:a.name.name,file:a.name.start.file,line:a.name.start.line,col:a.name.start.col}),n(AST_EmptyStatement,a));if(a instanceof AST_Definitions&&!(l.parent()instanceof AST_ForIn)){var d=a.definitions.filter(function(n){if(member(n.name.definition(),r))return!0;var t={name:n.name.name,file:n.name.start.file,line:n.name.start.line,col:n.name.start.col};return n.value&&n.value.has_side_effects(e)?(n._unused_side_effects=!0,e.warn("Side effects in initialization of unused variable {name} [{file}:{line},{col}]",t),!0):(e.warn("Dropping unused variable {name} [{file}:{line},{col}]",t),!1)});d=mergeSort(d,function(e,n){return!e.value&&n.value?-1:!n.value&&e.value?1:0});for(var f=[],u=0;u<d.length;){var h=d[u];h._unused_side_effects?(f.push(h.value),d.splice(u,1)):(f.length>0&&(f.push(h.value),h.value=AST_Seq.from_array(f),f=[]),++u)}return f=f.length>0?n(AST_BlockStatement,a,{body:[n(AST_SimpleStatement,a,{body:AST_Seq.from_array(f)})]}):null,0!=d.length||f?0==d.length?s?MAP.splice(f.body):f:(a.definitions=d,f?(f.body.unshift(a),s?MAP.splice(f.body):f):a):n(AST_EmptyStatement,a)}if(a instanceof AST_For&&(i(a,this),a.init instanceof AST_BlockStatement)){var p=a.init.body.slice(0,-1);return a.init=a.init.body.slice(-1)[0].body,p.push(a),s?MAP.splice(p):n(AST_BlockStatement,a,{body:p})}return a instanceof AST_Scope&&a!==t?a:void 0});t.transform(l)}}),AST_Scope.DEFMETHOD("hoist_declarations",function(e){var t=e.option("hoist_funs"),r=e.option("hoist_vars"),a=this;if(t||r){var i=[],s=[],o=new Dictionary,l=0,u=0;a.walk(new TreeWalker(function(e){return e instanceof AST_Scope&&e!==a?!0:e instanceof AST_Var?(++u,!0):void 0})),r=r&&u>1;var c=new TreeTransformer(function(e){if(e!==a){if(e instanceof AST_Directive)return i.push(e),n(AST_EmptyStatement,e);if(e instanceof AST_Defun&&t)return s.push(e),n(AST_EmptyStatement,e);if(e instanceof AST_Var&&r){e.definitions.forEach(function(e){o.set(e.name.name,e),++l});var u=e.to_assignments(),d=c.parent();return d instanceof AST_ForIn&&d.init===e?null==u?e.definitions[0].name:u:d instanceof AST_For&&d.init===e?u:u?n(AST_SimpleStatement,e,{body:u}):n(AST_EmptyStatement,e)}if(e instanceof AST_Scope)return e}});if(a=a.transform(c),l>0){var d=[];if(o.each(function(e,n){a instanceof AST_Lambda&&find_if(function(n){return n.name==e.name.name},a.argnames)?o.del(n):(e=e.clone(),e.value=null,d.push(e),o.set(n,e))}),d.length>0){for(var f=0;f<a.body.length;){if(a.body[f]instanceof AST_SimpleStatement){var p,m,h=a.body[f].body;if(h instanceof AST_Assign&&"="==h.operator&&(p=h.left)instanceof AST_Symbol&&o.has(p.name)){var g=o.get(p.name);if(g.value)break;g.value=h.right,remove(d,g),d.push(g),a.body.splice(f,1);continue}if(h instanceof AST_Seq&&(m=h.car)instanceof AST_Assign&&"="==m.operator&&(p=m.left)instanceof AST_Symbol&&o.has(p.name)){var g=o.get(p.name);if(g.value)break;g.value=m.right,remove(d,g),d.push(g),a.body[f].body=h.cdr;continue}}if(a.body[f]instanceof AST_EmptyStatement)a.body.splice(f,1);else{if(!(a.body[f]instanceof AST_BlockStatement))break;var b=[f,1].concat(a.body[f].body);a.body.splice.apply(a.body,b)}}d=n(AST_Var,a,{definitions:d}),s.push(d)}}a.body=i.concat(s,a.body)}return a}),e(AST_SimpleStatement,function(e,t){return t.option("side_effects")&&!e.body.has_side_effects(t)?(t.warn("Dropping side-effect-free statement [{file}:{line},{col}]",e.start),n(AST_EmptyStatement,e)):e}),e(AST_DWLoop,function(e,t){var r=e.condition.evaluate(t);if(e.condition=r[0],!t.option("loops"))return e;if(r.length>1){if(r[1])return n(AST_For,e,{body:e.body});if(e instanceof AST_While&&t.option("dead_code")){var a=[];return o(t,e.body,a),n(AST_BlockStatement,e,{body:a})}}return e}),e(AST_While,function(e,t){return t.option("loops")?(e=AST_DWLoop.prototype.optimize.call(e,t),e instanceof AST_While&&(c(e,t),e=n(AST_For,e,e).transform(t)),e):e}),e(AST_For,function(e,t){var r=e.condition;if(r&&(r=r.evaluate(t),e.condition=r[0]),!t.option("loops"))return e;if(r&&r.length>1&&!r[1]&&t.option("dead_code")){var a=[];return e.init instanceof AST_Statement?a.push(e.init):e.init&&a.push(n(AST_SimpleStatement,e.init,{body:e.init})),o(t,e.body,a),n(AST_BlockStatement,e,{body:a})}return c(e,t),e}),e(AST_If,function(e,t){if(!t.option("conditionals"))return e;var r=e.condition.evaluate(t);if(e.condition=r[0],r.length>1)if(r[1]){if(t.warn("Condition always true [{file}:{line},{col}]",e.condition.start),t.option("dead_code")){var i=[];return e.alternative&&o(t,e.alternative,i),i.push(e.body),n(AST_BlockStatement,e,{body:i}).transform(t)}}else if(t.warn("Condition always false [{file}:{line},{col}]",e.condition.start),t.option("dead_code")){var i=[];return o(t,e.body,i),e.alternative&&i.push(e.alternative),n(AST_BlockStatement,e,{body:i}).transform(t)}a(e.alternative)&&(e.alternative=null);var s=e.condition.negate(t),c=l(e.condition,s)===s;if(e.alternative&&c){c=!1,e.condition=s;var d=e.body;e.body=e.alternative||n(AST_EmptyStatement),e.alternative=d}if(a(e.body)&&a(e.alternative))return n(AST_SimpleStatement,e.condition,{body:e.condition}).transform(t);if(e.body instanceof AST_SimpleStatement&&e.alternative instanceof AST_SimpleStatement)return n(AST_SimpleStatement,e,{body:n(AST_Conditional,e,{condition:e.condition,consequent:e.body.body,alternative:e.alternative.body})}).transform(t);if(a(e.alternative)&&e.body instanceof AST_SimpleStatement)return c?n(AST_SimpleStatement,e,{body:n(AST_Binary,e,{operator:"||",left:s,right:e.body.body})}).transform(t):n(AST_SimpleStatement,e,{body:n(AST_Binary,e,{operator:"&&",left:e.condition,right:e.body.body})}).transform(t);if(e.body instanceof AST_EmptyStatement&&e.alternative&&e.alternative instanceof AST_SimpleStatement)return n(AST_SimpleStatement,e,{body:n(AST_Binary,e,{operator:"||",left:e.condition,right:e.alternative.body})}).transform(t);if(e.body instanceof AST_Exit&&e.alternative instanceof AST_Exit&&e.body.TYPE==e.alternative.TYPE)return n(e.body.CTOR,e,{value:n(AST_Conditional,e,{condition:e.condition,consequent:e.body.value||n(AST_Undefined,e.body).optimize(t),alternative:e.alternative.value||n(AST_Undefined,e.alternative).optimize(t)})}).transform(t);if(e.body instanceof AST_If&&!e.body.alternative&&!e.alternative&&(e.condition=n(AST_Binary,e.condition,{operator:"&&",left:e.condition,right:e.body.condition}).transform(t),e.body=e.body.body),u(e.body)&&e.alternative){var f=e.alternative;return e.alternative=null,n(AST_BlockStatement,e,{body:[e,f]}).transform(t)}if(u(e.alternative)){var h=e.body;return e.body=e.alternative,e.condition=c?s:e.condition.negate(t),e.alternative=null,n(AST_BlockStatement,e,{body:[e,h]}).transform(t)}return e}),e(AST_Switch,function(e,t){if(0==e.body.length&&t.option("conditionals"))return n(AST_SimpleStatement,e,{body:e.expression}).transform(t);for(;;){var r=e.body[e.body.length-1];if(r){var a=r.body[r.body.length-1];if(a instanceof AST_Break&&i(t.loopcontrol_target(a.label))===e&&r.body.pop(),r instanceof AST_Default&&0==r.body.length){e.body.pop();continue}}break}var s=e.expression.evaluate(t);e:if(2==s.length)try{if(e.expression=s[0],!t.option("dead_code"))break e;var o=s[1],l=!1,c=!1,d=!1,f=!1,h=!1,p=new TreeTransformer(function(r,a,i){if(r instanceof AST_Lambda||r instanceof AST_SimpleStatement)return r;if(r instanceof AST_Switch&&r===e)return r=r.clone(),a(r,this),h?r:n(AST_BlockStatement,r,{body:r.body.reduce(function(e,n){return e.concat(n.body)},[])}).transform(t);if(r instanceof AST_If||r instanceof AST_Try){var s=l;return l=!c,a(r,this),l=s,r}if(r instanceof AST_StatementWithBody||r instanceof AST_Switch){var s=c;return c=!0,a(r,this),c=s,r}if(r instanceof AST_Break&&this.loopcontrol_target(r.label)===e)return l?(h=!0,r):c?r:(f=!0,i?MAP.skip:n(AST_EmptyStatement,r));if(r instanceof AST_SwitchBranch&&this.parent()===e){if(f)return MAP.skip;if(r instanceof AST_Case){var p=r.expression.evaluate(t);if(p.length<2)throw e;return p[1]===o||d?(d=!0,u(r)&&(f=!0),a(r,this),r):MAP.skip}return a(r,this),r}});p.stack=t.stack.slice(),e=e.transform(p)}catch(m){if(m!==e)throw m}return e}),e(AST_Case,function(e,n){return e.body=s(e.body,n),e}),e(AST_Try,function(e,n){return e.body=s(e.body,n),e}),AST_Definitions.DEFMETHOD("remove_initializers",function(){this.definitions.forEach(function(e){e.value=null})}),AST_Definitions.DEFMETHOD("to_assignments",function(){var e=this.definitions.reduce(function(e,t){if(t.value){var r=n(AST_SymbolRef,t.name,t.name);e.push(n(AST_Assign,t,{operator:"=",left:r,right:t.value}))}return e},[]);return 0==e.length?null:AST_Seq.from_array(e)}),e(AST_Definitions,function(e,t){return 0==e.definitions.length?n(AST_EmptyStatement,e):e}),e(AST_Function,function(e,n){return e=AST_Lambda.prototype.optimize.call(e,n),n.option("unused")&&!n.option("keep_fnames")&&e.name&&e.name.unreferenced()&&(e.name=null),e}),e(AST_Call,function(e,r){if(r.option("unsafe")){var a=e.expression;if(a instanceof AST_SymbolRef&&a.undeclared())switch(a.name){case"Array":if(1!=e.args.length)return n(AST_Array,e,{elements:e.args}).transform(r);break;case"Object":if(0==e.args.length)return n(AST_Object,e,{properties:[]});break;case"String":if(0==e.args.length)return n(AST_String,e,{value:""});if(e.args.length<=1)return n(AST_Binary,e,{left:e.args[0],operator:"+",right:n(AST_String,e,{value:""})}).transform(r);break;case"Number":if(0==e.args.length)return n(AST_Number,e,{value:0});if(1==e.args.length)return n(AST_UnaryPrefix,e,{expression:e.args[0],operator:"+"}).transform(r);case"Boolean":if(0==e.args.length)return n(AST_False,e);if(1==e.args.length)return n(AST_UnaryPrefix,e,{expression:n(AST_UnaryPrefix,null,{expression:e.args[0],operator:"!"}),operator:"!"}).transform(r);break;case"Function":if(0==e.args.length)return n(AST_Function,e,{argnames:[],body:[]});if(all(e.args,function(e){return e instanceof AST_String}))try{var i="(function("+e.args.slice(0,-1).map(function(e){return e.value}).join(",")+"){"+e.args[e.args.length-1].value+"})()",s=parse(i);s.figure_out_scope({screw_ie8:r.option("screw_ie8")});var o=new Compressor(r.options);s=s.transform(o),s.figure_out_scope({screw_ie8:r.option("screw_ie8")}),s.mangle_names();var u;try{s.walk(new TreeWalker(function(e){if(e instanceof AST_Lambda)throw u=e,s}))}catch(c){if(c!==s)throw c}if(!u)return e;var d=u.argnames.map(function(t,r){return n(AST_String,e.args[r],{value:t.print_to_string()})}),i=OutputStream();return AST_BlockStatement.prototype._codegen.call(u,u,i),i=i.toString().replace(/^\{|\}$/g,""),d.push(n(AST_String,e.args[e.args.length-1],{value:i})),e.args=d,e}catch(c){if(!(c instanceof JS_Parse_Error))throw console.log(c),c;r.warn("Error parsing code passed to new Function [{file}:{line},{col}]",e.args[e.args.length-1].start),r.warn(c.toString())}}else{if(a instanceof AST_Dot&&"toString"==a.property&&0==e.args.length)return n(AST_Binary,e,{left:n(AST_String,e,{value:""}),operator:"+",right:a.expression}).transform(r);if(a instanceof AST_Dot&&a.expression instanceof AST_Array&&"join"==a.property){var f=0==e.args.length?",":e.args[0].evaluate(r)[1];if(null!=f){var h=a.expression.elements.reduce(function(e,n){if(n=n.evaluate(r),0==e.length||1==n.length)e.push(n);else{var a=e[e.length-1];if(2==a.length){var i=""+a[1]+f+n[1];e[e.length-1]=[t(r,i,a[0]),i]}else e.push(n)}return e},[]);if(0==h.length)return n(AST_String,e,{value:""});if(1==h.length)return h[0][0];if(""==f){var p;return p=h[0][0]instanceof AST_String||h[1][0]instanceof AST_String?h.shift()[0]:n(AST_String,e,{value:""}),h.reduce(function(e,t){return n(AST_Binary,t[0],{operator:"+",left:e,right:t[0]})},p).transform(r)}var m=e.clone();return m.expression=m.expression.clone(),m.expression.expression=m.expression.expression.clone(),m.expression.expression.elements=h.map(function(e){return e[0]}),l(e,m)}}}}if(r.option("side_effects")&&e.expression instanceof AST_Function&&0==e.args.length&&!AST_Block.prototype.has_side_effects.call(e.expression,r))return n(AST_Undefined,e).transform(r);if(r.option("drop_console")&&e.expression instanceof AST_PropAccess){for(var g=e.expression.expression;g.expression;)g=g.expression;if(g instanceof AST_SymbolRef&&"console"==g.name&&g.undeclared())return n(AST_Undefined,e).transform(r)}return e.evaluate(r)[0]}),e(AST_New,function(e,t){if(t.option("unsafe")){var r=e.expression;if(r instanceof AST_SymbolRef&&r.undeclared())switch(r.name){case"Object":case"RegExp":case"Function":case"Error":case"Array":return n(AST_Call,e,e).transform(t)}}return e}),e(AST_Seq,function(e,t){if(!t.option("side_effects"))return e;if(!e.car.has_side_effects(t)){var r;if(!(e.cdr instanceof AST_SymbolRef&&"eval"==e.cdr.name&&e.cdr.undeclared()&&(r=t.parent())instanceof AST_Call&&r.expression===e))return e.cdr}if(t.option("cascade")){if(e.car instanceof AST_Assign&&!e.car.left.has_side_effects(t)){if(e.car.left.equivalent_to(e.cdr))return e.car;if(e.cdr instanceof AST_Call&&e.cdr.expression.equivalent_to(e.car.left))return e.cdr.expression=e.car,e.cdr}if(!e.car.has_side_effects(t)&&!e.cdr.has_side_effects(t)&&e.car.equivalent_to(e.cdr))return e.car}return e.cdr instanceof AST_UnaryPrefix&&"void"==e.cdr.operator&&!e.cdr.expression.has_side_effects(t)?(e.cdr.expression=e.car,e.cdr):e.cdr instanceof AST_Undefined?n(AST_UnaryPrefix,e,{operator:"void",expression:e.car}):e}),AST_Unary.DEFMETHOD("lift_sequences",function(e){if(e.option("sequences")&&this.expression instanceof AST_Seq){var n=this.expression,t=n.to_array();return this.expression=t.pop(),t.push(this),n=AST_Seq.from_array(t).transform(e)}return this;
}),e(AST_UnaryPostfix,function(e,n){return e.lift_sequences(n)}),e(AST_UnaryPrefix,function(e,t){e=e.lift_sequences(t);var r=e.expression;if(t.option("booleans")&&t.in_boolean_context()){switch(e.operator){case"!":if(r instanceof AST_UnaryPrefix&&"!"==r.operator)return r.expression;break;case"typeof":return t.warn("Boolean expression always true [{file}:{line},{col}]",e.start),n(AST_True,e)}r instanceof AST_Binary&&"!"==e.operator&&(e=l(e,r.negate(t)))}return e.evaluate(t)[0]}),AST_Binary.DEFMETHOD("lift_sequences",function(e){if(e.option("sequences")){if(this.left instanceof AST_Seq){var n=this.left,t=n.to_array();return this.left=t.pop(),t.push(this),n=AST_Seq.from_array(t).transform(e)}if(this.right instanceof AST_Seq&&this instanceof AST_Assign&&!d(this.left,e)){var n=this.right,t=n.to_array();return this.right=t.pop(),t.push(this),n=AST_Seq.from_array(t).transform(e)}}return this});var f=makePredicate("== === != !== * & | ^");e(AST_Binary,function(e,t){var r=t.has_directive("use asm")?noop:function(n,r){if(r||!e.left.has_side_effects(t)&&!e.right.has_side_effects(t)){n&&(e.operator=n);var a=e.left;e.left=e.right,e.right=a}};if(f(e.operator)&&(e.right instanceof AST_Constant&&!(e.left instanceof AST_Constant)&&(e.left instanceof AST_Binary&&PRECEDENCE[e.left.operator]>=PRECEDENCE[e.operator]||r(null,!0)),/^[!=]==?$/.test(e.operator))){if(e.left instanceof AST_SymbolRef&&e.right instanceof AST_Conditional){if(e.right.consequent instanceof AST_SymbolRef&&e.right.consequent.definition()===e.left.definition()){if(/^==/.test(e.operator))return e.right.condition;if(/^!=/.test(e.operator))return e.right.condition.negate(t)}if(e.right.alternative instanceof AST_SymbolRef&&e.right.alternative.definition()===e.left.definition()){if(/^==/.test(e.operator))return e.right.condition.negate(t);if(/^!=/.test(e.operator))return e.right.condition}}if(e.right instanceof AST_SymbolRef&&e.left instanceof AST_Conditional){if(e.left.consequent instanceof AST_SymbolRef&&e.left.consequent.definition()===e.right.definition()){if(/^==/.test(e.operator))return e.left.condition;if(/^!=/.test(e.operator))return e.left.condition.negate(t)}if(e.left.alternative instanceof AST_SymbolRef&&e.left.alternative.definition()===e.right.definition()){if(/^==/.test(e.operator))return e.left.condition.negate(t);if(/^!=/.test(e.operator))return e.left.condition}}}if(e=e.lift_sequences(t),t.option("comparisons"))switch(e.operator){case"===":case"!==":(e.left.is_string(t)&&e.right.is_string(t)||e.left.is_boolean()&&e.right.is_boolean())&&(e.operator=e.operator.substr(0,2));case"==":case"!=":e.left instanceof AST_String&&"undefined"==e.left.value&&e.right instanceof AST_UnaryPrefix&&"typeof"==e.right.operator&&t.option("unsafe")&&(e.right.expression instanceof AST_SymbolRef&&e.right.expression.undeclared()||(e.right=e.right.expression,e.left=n(AST_Undefined,e.left).optimize(t),2==e.operator.length&&(e.operator+="=")))}if(t.option("conditionals"))if("&&"==e.operator){var a=e.left.evaluate(t),i=e.right.evaluate(t);if(a.length>1)return a[1]?(t.warn("Condition left of && always true [{file}:{line},{col}]",e.start),i[0]):(t.warn("Condition left of && always false [{file}:{line},{col}]",e.start),a[0])}else if("||"==e.operator){var a=e.left.evaluate(t),i=e.right.evaluate(t);if(a.length>1)return a[1]?(t.warn("Condition left of || always true [{file}:{line},{col}]",e.start),a[0]):(t.warn("Condition left of || always false [{file}:{line},{col}]",e.start),i[0])}if(t.option("booleans")&&t.in_boolean_context())switch(e.operator){case"&&":var a=e.left.evaluate(t),i=e.right.evaluate(t);if(a.length>1&&!a[1]||i.length>1&&!i[1])return t.warn("Boolean && always false [{file}:{line},{col}]",e.start),e.left.has_side_effects(t)?n(AST_Seq,e,{car:e.left,cdr:n(AST_False)}).optimize(t):n(AST_False,e);if(a.length>1&&a[1])return i[0];if(i.length>1&&i[1])return a[0];break;case"||":var a=e.left.evaluate(t),i=e.right.evaluate(t);if(a.length>1&&a[1]||i.length>1&&i[1])return t.warn("Boolean || always true [{file}:{line},{col}]",e.start),e.left.has_side_effects(t)?n(AST_Seq,e,{car:e.left,cdr:n(AST_True)}).optimize(t):n(AST_True,e);if(a.length>1&&!a[1])return i[0];if(i.length>1&&!i[1])return a[0];break;case"+":var a=e.left.evaluate(t),i=e.right.evaluate(t);if(a.length>1&&a[0]instanceof AST_String&&a[1]||i.length>1&&i[0]instanceof AST_String&&i[1])return t.warn("+ in boolean context always true [{file}:{line},{col}]",e.start),n(AST_True,e)}if(t.option("comparisons")&&e.is_boolean()){if(!(t.parent()instanceof AST_Binary)||t.parent()instanceof AST_Assign){var s=n(AST_UnaryPrefix,e,{operator:"!",expression:e.negate(t)});e=l(e,s)}switch(e.operator){case"<":r(">");break;case"<=":r(">=")}}return"+"==e.operator&&e.right instanceof AST_String&&""===e.right.getValue()&&e.left instanceof AST_Binary&&"+"==e.left.operator&&e.left.is_string(t)?e.left:(t.option("evaluate")&&"+"==e.operator&&(e.left instanceof AST_Constant&&e.right instanceof AST_Binary&&"+"==e.right.operator&&e.right.left instanceof AST_Constant&&e.right.is_string(t)&&(e=n(AST_Binary,e,{operator:"+",left:n(AST_String,null,{value:""+e.left.getValue()+e.right.left.getValue(),start:e.left.start,end:e.right.left.end}),right:e.right.right})),e.right instanceof AST_Constant&&e.left instanceof AST_Binary&&"+"==e.left.operator&&e.left.right instanceof AST_Constant&&e.left.is_string(t)&&(e=n(AST_Binary,e,{operator:"+",left:e.left.left,right:n(AST_String,null,{value:""+e.left.right.getValue()+e.right.getValue(),start:e.left.right.start,end:e.right.end})})),e.left instanceof AST_Binary&&"+"==e.left.operator&&e.left.is_string(t)&&e.left.right instanceof AST_Constant&&e.right instanceof AST_Binary&&"+"==e.right.operator&&e.right.left instanceof AST_Constant&&e.right.is_string(t)&&(e=n(AST_Binary,e,{operator:"+",left:n(AST_Binary,e.left,{operator:"+",left:e.left.left,right:n(AST_String,null,{value:""+e.left.right.getValue()+e.right.left.getValue(),start:e.left.right.start,end:e.right.left.end})}),right:e.right.right}))),e.right instanceof AST_Binary&&e.right.operator==e.operator&&("&&"==e.operator||"||"==e.operator)?(e.left=n(AST_Binary,e.left,{operator:e.operator,left:e.left,right:e.right.left}),e.right=e.right.right,e.transform(t)):e.evaluate(t)[0])}),e(AST_SymbolRef,function(e,r){if(e.undeclared()){var a=r.option("global_defs");if(a&&a.hasOwnProperty(e.name))return t(r,a[e.name],e);switch(e.name){case"undefined":return n(AST_Undefined,e);case"NaN":return n(AST_NaN,e).transform(r);case"Infinity":return n(AST_Infinity,e).transform(r)}}return e}),e(AST_Infinity,function(e,t){return n(AST_Binary,e,{operator:"/",left:n(AST_Number,e,{value:1}),right:n(AST_Number,e,{value:0})})}),e(AST_Undefined,function(e,t){if(t.option("unsafe")){var r=t.find_parent(AST_Scope),a=r.find_variable("undefined");if(a){var i=n(AST_SymbolRef,e,{name:"undefined",scope:r,thedef:a});return i.reference(),i}}return e});var h=["+","-","/","*","%",">>","<<",">>>","|","^","&"];e(AST_Assign,function(e,n){return e=e.lift_sequences(n),"="==e.operator&&e.left instanceof AST_SymbolRef&&e.right instanceof AST_Binary&&e.right.left instanceof AST_SymbolRef&&e.right.left.name==e.left.name&&member(e.right.operator,h)&&(e.operator=e.right.operator+"=",e.right=e.right.right),e}),e(AST_Conditional,function(e,r){if(!r.option("conditionals"))return e;if(e.condition instanceof AST_Seq){var a=e.condition.car;return e.condition=e.condition.cdr,AST_Seq.cons(a,e)}var i=e.condition.evaluate(r);if(i.length>1)return i[1]?(r.warn("Condition always true [{file}:{line},{col}]",e.start),e.consequent):(r.warn("Condition always false [{file}:{line},{col}]",e.start),e.alternative);var s=i[0].negate(r);l(i[0],s)===s&&(e=n(AST_Conditional,e,{condition:s,consequent:e.alternative,alternative:e.consequent}));var o=e.consequent,u=e.alternative;if(o instanceof AST_Assign&&u instanceof AST_Assign&&o.operator==u.operator&&o.left.equivalent_to(u.left)&&!o.left.has_side_effects(r))return n(AST_Assign,e,{operator:o.operator,left:o.left,right:n(AST_Conditional,e,{condition:e.condition,consequent:o.right,alternative:u.right})});if(o instanceof AST_Call&&u.TYPE===o.TYPE&&o.args.length==u.args.length&&!o.expression.has_side_effects(r)&&o.expression.equivalent_to(u.expression)){if(0==o.args.length)return n(AST_Seq,e,{car:e.condition,cdr:o});if(1==o.args.length)return o.args[0]=n(AST_Conditional,e,{condition:e.condition,consequent:o.args[0],alternative:u.args[0]}),o}return o instanceof AST_Conditional&&o.alternative.equivalent_to(u)?n(AST_Conditional,e,{condition:n(AST_Binary,e,{left:e.condition,operator:"&&",right:o.condition}),consequent:o.consequent,alternative:u}):o instanceof AST_Constant&&u instanceof AST_Constant&&o.equivalent_to(u)?e.condition.has_side_effects(r)?AST_Seq.from_array([e.condition,t(r,o.value,e)]):t(r,o.value,e):o instanceof AST_True&&u instanceof AST_False?(e.condition=e.condition.negate(r),n(AST_UnaryPrefix,e.condition,{operator:"!",expression:e.condition})):o instanceof AST_False&&u instanceof AST_True?e.condition.negate(r):e}),e(AST_Boolean,function(e,t){if(t.option("booleans")){var r=t.parent();return r instanceof AST_Binary&&("=="==r.operator||"!="==r.operator)?(t.warn("Non-strict equality against boolean: {operator} {value} [{file}:{line},{col}]",{operator:r.operator,value:e.value,file:r.start.file,line:r.start.line,col:r.start.col}),n(AST_Number,e,{value:+e.value})):n(AST_UnaryPrefix,e,{operator:"!",expression:n(AST_Number,e,{value:1-e.value})})}return e}),e(AST_Sub,function(e,t){var r=e.property;if(r instanceof AST_String&&t.option("properties")){if(r=r.getValue(),RESERVED_WORDS(r)?t.option("screw_ie8"):is_identifier_string(r))return n(AST_Dot,e,{expression:e.expression,property:r}).optimize(t);var a=parseFloat(r);isNaN(a)||a.toString()!=r||(e.property=n(AST_Number,e.property,{value:a}))}return e}),e(AST_Dot,function(e,t){var r=e.property;return RESERVED_WORDS(r)&&!t.option("screw_ie8")?n(AST_Sub,e,{expression:e.expression,property:n(AST_String,e,{value:r})}).optimize(t):e.evaluate(t)[0]}),e(AST_Array,p),e(AST_Object,p),e(AST_RegExp,p)}();