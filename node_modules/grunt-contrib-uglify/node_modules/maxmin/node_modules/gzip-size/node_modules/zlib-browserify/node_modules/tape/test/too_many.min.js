var falafel=require("falafel"),tape=require("../"),tap=require("tap");tap.test("array test",function(e){e.plan(1);var n=tape.createHarness({exit:!1}),t=tap.createConsumer(),r=[];t.on("data",function(e){r.push(e)}),t.on("end",function(){var n=r.map(function(e){return e&&"object"==typeof e?{id:e.id,ok:e.ok,name:e.name.trim()}:e});e.same(n,["TAP version 13","array",{id:1,ok:!0,name:"should be equivalent"},{id:2,ok:!0,name:"should be equivalent"},{id:3,ok:!0,name:"should be equivalent"},{id:4,ok:!0,name:"should be equivalent"},{id:5,ok:!1,name:"plan != count"},{id:6,ok:!0,name:"should be equivalent"},"tests 6","pass  5","fail  1"])}),n.stream.pipe(t),n("array",function(e){e.plan(3);var n="("+function(){var e=[1,2,[3,4]],n=[5,6];g([e,n])}+")()",t=falafel(n,function(e){"ArrayExpression"===e.type&&e.update("fn("+e.source()+")")}),r=[[3,4],[1,2,[3,4]],[5,6],[[1,2,[3,4]],[5,6]]];Function(["fn","g"],t)(function(n){return e.same(r.shift(),n),n},function(n){e.same(n,[[1,2,[3,4]],[5,6]])})})});