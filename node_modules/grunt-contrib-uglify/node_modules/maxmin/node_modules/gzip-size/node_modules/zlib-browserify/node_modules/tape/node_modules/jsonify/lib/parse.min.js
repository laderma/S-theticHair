var at,ch,escapee={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},text,error=function(e){throw{name:"SyntaxError",message:e,at:at,text:text}},next=function(e){return e&&e!==ch&&error("Expected '"+e+"' instead of '"+ch+"'"),ch=text.charAt(at),at+=1,ch},number=function(){var e,n="";for("-"===ch&&(n="-",next("-"));ch>="0"&&"9">=ch;)n+=ch,next();if("."===ch)for(n+=".";next()&&ch>="0"&&"9">=ch;)n+=ch;if("e"===ch||"E"===ch)for(n+=ch,next(),("-"===ch||"+"===ch)&&(n+=ch,next());ch>="0"&&"9">=ch;)n+=ch,next();return e=+n,isFinite(e)?e:void error("Bad number")},string=function(){var e,n,r,t="";if('"'===ch)for(;next();){if('"'===ch)return next(),t;if("\\"===ch)if(next(),"u"===ch){for(r=0,n=0;4>n&&(e=parseInt(next(),16),isFinite(e));n+=1)r=16*r+e;t+=String.fromCharCode(r)}else{if("string"!=typeof escapee[ch])break;t+=escapee[ch]}else t+=ch}error("Bad string")},white=function(){for(;ch&&" ">=ch;)next()},word=function(){switch(ch){case"t":return next("t"),next("r"),next("u"),next("e"),!0;case"f":return next("f"),next("a"),next("l"),next("s"),next("e"),!1;case"n":return next("n"),next("u"),next("l"),next("l"),null}error("Unexpected '"+ch+"'")},value,array=function(){var e=[];if("["===ch){if(next("["),white(),"]"===ch)return next("]"),e;for(;ch;){if(e.push(value()),white(),"]"===ch)return next("]"),e;next(","),white()}}error("Bad array")},object=function(){var e,n={};if("{"===ch){if(next("{"),white(),"}"===ch)return next("}"),n;for(;ch;){if(e=string(),white(),next(":"),Object.hasOwnProperty.call(n,e)&&error('Duplicate key "'+e+'"'),n[e]=value(),white(),"}"===ch)return next("}"),n;next(","),white()}}error("Bad object")};value=function(){switch(white(),ch){case"{":return object();case"[":return array();case'"':return string();case"-":return number();default:return ch>="0"&&"9">=ch?number():word()}},module.exports=function(e,n){var t;return text=e,at=0,ch=" ",t=value(),white(),ch&&error("Syntax error"),"function"==typeof n?function r(e,t){var i,a,o=e[t];if(o&&"object"==typeof o)for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(a=r(o,i),void 0!==a?o[i]=a:delete o[i]);return n.call(e,t,o)}({"":t},""):t};