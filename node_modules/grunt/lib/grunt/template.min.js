"use strict";var grunt=require("../grunt"),template=module.exports={};template.date=require("dateformat"),template.today=function(e){return template.date(new Date,e)};var allDelimiters={};template.addDelimiters=function(e,n,t){var r=allDelimiters[e]={};r.opener=n,r.closer=t;var a=r.opener.replace(/(.)/g,"\\$1"),i="([\\s\\S]+?)"+r.closer.replace(/(.)/g,"\\$1");r.lodash={evaluate:new RegExp(a+i,"g"),interpolate:new RegExp(a+"="+i,"g"),escape:new RegExp(a+"-"+i,"g")}},template.addDelimiters("config","<%","%>"),template.setDelimiters=function(e){var n=allDelimiters[e in allDelimiters?e:"config"];return grunt.util._.templateSettings=n.lodash,n},template.process=function(e,n){n||(n={});var t=template.setDelimiters(n.delimiters),r=Object.create(n.data||grunt.config.data||{});"grunt"in r||(r.grunt=grunt);var a=e;try{for(;e.indexOf(t.opener)>=0&&(e=grunt.util._.template(e,r),e!==a);)a=e}catch(i){"SyntaxError: Unexpected token ILLEGAL"===String(i)&&/\n|\r/.test(e)&&grunt.log.errorlns("A special character was detected in this template. Inside template tags, the \\n and \\r special characters must be escaped as \\\\n and \\\\r. (grunt 0.4.0+)"),i.message="An error occurred while processing a template ("+i.message+").",grunt.warn(i,grunt.fail.code.TEMPLATE_ERROR)}return grunt.util.normalizelf(e)};