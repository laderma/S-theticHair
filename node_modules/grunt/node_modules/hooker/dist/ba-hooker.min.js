!function(e){function r(e){this.value=e}function a(e){this.value=e}function i(e,n){this.context=e,this.args=n}function s(e,n,r){var a;if("string"==typeof n)n=[n];else if(null==n){n=[];for(a in e)e.hasOwnProperty(a)&&n.push(a)}for(var i=n.length;i--;)("[object Function]"!==t.call(e[n[i]])||r(e,n[i])===!1)&&n.splice(i,1);return n}var n=[].slice,t={}.toString;e.override=function(e){return new r(e)},e.preempt=function(e){return new a(e)},e.filter=function(e,n){return new i(e,n)},e.hook=function(t,o,l){return null==l&&(l=o,o=null),"function"==typeof l&&(l={pre:l}),s(t,o,function(t,s){function u(){var u,c,d,f=n.call(arguments);return l.passName&&f.unshift(s),l.pre&&(u=l.pre.apply(this,f)),u instanceof i?c=u=o.apply(u.context,u.args):u instanceof a?c=u=u.value:(c=o.apply(this,arguments),u=u instanceof r?u.value:c),l.post&&(d=l.post.apply(this,[c].concat(f)),d instanceof r&&(u=d.value)),l.once&&e.unhook(t,s),u}var o=t[s];return t[s]=u,t[s]!==u?!1:void(t[s]._orig=o)})},e.orig=function(e,n){return e[n]._orig},e.unhook=function(n,t){return s(n,t,function(n,t){var r=e.orig(n,t);return r?void(n[t]=r):!1})}}("object"==typeof exports&&exports||this);