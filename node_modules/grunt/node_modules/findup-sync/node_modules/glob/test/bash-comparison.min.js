function alphasort(e,n){return e=e.toLowerCase(),n=n.toLowerCase(),e>n?1:n>e?-1:0}function cleanResults(e){return e.map(function(e){return e.replace(/\/+/g,"/").replace(/\/$/,"")}).sort(alphasort).reduce(function(e,n){return n!==e[e.length-1]&&e.push(n),e},[]).sort(alphasort).map(function(e){return"win32"!==process.platform?e:e.replace(/^[a-zA-Z]:[\/\\]+/,"/").replace(/[\\\/]+/g,"/")})}var tap=require("tap"),child_process=require("child_process"),bashResults=require("./bash-results.json"),globs=Object.keys(bashResults),glob=require("../"),path=require("path");process.chdir(path.resolve(__dirname,"..")),globs.forEach(function(e){var n=bashResults[e];"win32"===process.platform&&n.some(function(e){return/\/symlink\//.test(e)})||(tap.test(e,function(t){glob(e,function(r,i){if(r)throw r;i=cleanResults(i),t.deepEqual(i,n,e),t.end()})}),tap.test(e+" sync",function(t){var r=cleanResults(glob.sync(e));t.deepEqual(r,n,"should match shell"),t.end()}))});