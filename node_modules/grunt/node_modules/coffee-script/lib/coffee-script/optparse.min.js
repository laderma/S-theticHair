(function(){var e,n,t,r,a,i,o,s;exports.OptionParser=r=function(){function n(e,n){this.banner=n,this.rules=o(e)}return n.prototype.parse=function(n){var t,r,i,o,u,l,c,f,d,h,p,m,g,b,v,_;for(u={arguments:[]},h=!1,l=n,n=s(n),r=m=0,b=n.length;b>m;r=++m)if(t=n[r],h)h=!1;else{if("--"===t){c=l.indexOf("--"),u.arguments=u.arguments.concat(l.slice(c+1));break}if(i=!(!t.match(e)&&!t.match(a)),d=u.arguments.length>0,!d){for(o=!1,_=this.rules,g=0,v=_.length;v>g;g++)if(f=_[g],f.shortFlag===t||f.longFlag===t){p=!0,f.hasArgument&&(h=!0,p=n[r+1]),u[f.name]=f.isList?(u[f.name]||[]).concat(p):p,o=!0;break}if(i&&!o)throw new Error("unrecognized option: "+t)}(d||!i)&&u.arguments.push(t)}return u},n.prototype.help=function(){var e,n,t,r,a,i,o;for(n=[],this.banner&&n.unshift(""+this.banner+"\n"),o=this.rules,a=0,i=o.length;i>a;a++)t=o[a],r=15-t.longFlag.length,r=r>0?Array(r+1).join(" "):"",e=t.shortFlag?t.shortFlag+", ":"    ",n.push("  "+e+t.longFlag+r+t.description);return"\n"+n.join("\n")+"\n"},n}(),e=/^(--\w[\w\-]*)/,a=/^(-\w)$/,n=/^-(\w{2,})/,t=/\[(\w+(\*?))\]/,o=function(e){var n,t,r,a;for(a=[],t=0,r=e.length;r>t;t++)n=e[t],n.length<3&&n.unshift(null),a.push(i.apply(null,n));return a},i=function(n,r,a,i){var o;return null==i&&(i={}),o=r.match(t),r=r.match(e)[1],{name:r.substr(2),shortFlag:n,longFlag:r,description:a,hasArgument:!(!o||!o[1]),isList:!(!o||!o[2])}},s=function(e){var t,r,a,i,o,s,u,l,c;for(e=e.slice(0),i=[],o=0,u=e.length;u>o;o++)if(t=e[o],a=t.match(n))for(c=a[1].split(""),s=0,l=c.length;l>s;s++)r=c[s],i.push("-"+r);else i.push(t);return i}}).call(this);