!function(e){"use strict";var n=String.prototype.trim,t=String.prototype.trimRight,r=String.prototype.trimLeft,a=function(e){return 1*e||0},i=function(e,n,t){e+="",n=~~n;for(var r=[];n>0;r[--n]=e);return r.join(null==t?"":t)},s=function(e){return Array.prototype.slice.call(e)},o=function(e){return null!=e?"["+f.escapeRegExp(""+e)+"]":"\\s"},l={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},u={};for(var c in l)u[l[c]]=c;var d=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}var n=i,t=function(){return t.cache.hasOwnProperty(arguments[0])||(t.cache[arguments[0]]=t.parse(arguments[0])),t.format.call(null,t.cache[arguments[0]],arguments)};return t.format=function(t,r){var o,u,c,f,h,p,m,a=1,i=t.length,s="",l=[];for(u=0;i>u;u++)if(s=e(t[u]),"string"===s)l.push(t[u]);else if("array"===s){if(f=t[u],f[2])for(o=r[a],c=0;c<f[2].length;c++){if(!o.hasOwnProperty(f[2][c]))throw new Error(d('[_.sprintf] property "%s" does not exist',f[2][c]));o=o[f[2][c]]}else o=f[1]?r[f[1]]:r[a++];if(/[^s]/.test(f[8])&&"number"!=e(o))throw new Error(d("[_.sprintf] expecting number but found %s",e(o)));switch(f[8]){case"b":o=o.toString(2);break;case"c":o=String.fromCharCode(o);break;case"d":o=parseInt(o,10);break;case"e":o=f[7]?o.toExponential(f[7]):o.toExponential();break;case"f":o=f[7]?parseFloat(o).toFixed(f[7]):parseFloat(o);break;case"o":o=o.toString(8);break;case"s":o=(o=String(o))&&f[7]?o.substring(0,f[7]):o;break;case"u":o=Math.abs(o);break;case"x":o=o.toString(16);break;case"X":o=o.toString(16).toUpperCase()}o=/[def]/.test(f[8])&&f[3]&&o>=0?"+"+o:o,p=f[4]?"0"==f[4]?"0":f[4].charAt(1):" ",m=f[6]-String(o).length,h=f[6]?n(p,m):"",l.push(f[5]?o+h:h+o)}return l.join("")},t.cache={},t.parse=function(e){for(var n=e,t=[],r=[],a=0;n;){if(null!==(t=/^[^\x25]+/.exec(n)))r.push(t[0]);else if(null!==(t=/^\x25{2}/.exec(n)))r.push("%");else{if(null===(t=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(n)))throw new Error("[_.sprintf] huh?");if(t[2]){a|=1;var i=[],s=t[2],o=[];if(null===(o=/^([a-z_][a-z_\d]*)/i.exec(s)))throw new Error("[_.sprintf] huh?");for(i.push(o[1]);""!==(s=s.substring(o[0].length));)if(null!==(o=/^\.([a-z_][a-z_\d]*)/i.exec(s)))i.push(o[1]);else{if(null===(o=/^\[(\d+)\]/.exec(s)))throw new Error("[_.sprintf] huh?");i.push(o[1])}t[2]=i}else a|=2;if(3===a)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");r.push(t)}n=n.substring(t[0].length)}return r},t}(),f={VERSION:"2.2.0rc",isBlank:function(e){return/^\s*$/.test(e)},stripTags:function(e){return(""+e).replace(/<\/?[^>]+>/g,"")},capitalize:function(e){return e+="",e.charAt(0).toUpperCase()+e.substring(1)},chop:function(e,n){e+="",n=~~n||e.length;for(var t=[],r=0;r<e.length;r+=n)t.push(e.slice(r,r+n));return t},clean:function(e){return f.strip(e).replace(/\s+/g," ")},count:function(e,n){return e+="",n+="",e.split(n).length-1},chars:function(e){return(""+e).split("")},escapeHTML:function(e){return(""+e).replace(/[&<>"']/g,function(e){return"&"+u[e]+";"})},unescapeHTML:function(e){return(""+e).replace(/\&([^;]+);/g,function(e,n){var t;return n in l?l[n]:(t=n.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(t[1],16)):(t=n.match(/^#(\d+)$/))?String.fromCharCode(~~t[1]):e})},escapeRegExp:function(e){return e.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},insert:function(e,n,t){var r=f.chars(e);return r.splice(~~n,0,""+t),r.join("")},include:function(e,n){return!!~(""+e).indexOf(n)},join:function(){var e=s(arguments);return e.join(e.shift())},lines:function(e){return(""+e).split("\n")},reverse:function(e){return f.chars(e).reverse().join("")},splice:function(e,n,t,r){var a=f.chars(e);return a.splice(~~n,~~t,r),a.join("")},startsWith:function(e,n){return e+="",n+="",e.length>=n.length&&e.substring(0,n.length)===n},endsWith:function(e,n){return e+="",n+="",e.length>=n.length&&e.substring(e.length-n.length)===n},succ:function(e){e+="";var n=f.chars(e);return n.splice(e.length-1,1,String.fromCharCode(e.charCodeAt(e.length-1)+1)),n.join("")},titleize:function(e){return(""+e).replace(/\b./g,function(e){return e.toUpperCase()})},camelize:function(e){return f.trim(e).replace(/[-_\s]+(.)?/g,function(e,n){return n&&n.toUpperCase()})},underscored:function(e){return f.trim(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(e){return f.trim(e).replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").toLowerCase()},classify:function(e){return e+="",f.titleize(e.replace(/_/g," ")).replace(/\s/g,"")},humanize:function(e){return f.capitalize(this.underscored(e).replace(/_id$/,"").replace(/_/g," "))},trim:function(e,t){return e+="",!t&&n?n.call(e):(t=o(t),e.replace(new RegExp("^"+t+"+|"+t+"+$","g"),""))},ltrim:function(e,n){return e+="",!n&&r?r.call(e):(n=o(n),e.replace(new RegExp("^"+n+"+"),""))},rtrim:function(e,n){return e+="",!n&&t?t.call(e):(n=o(n),e.replace(new RegExp(n+"+$"),""))},truncate:function(e,n,t){return e+="",t=t||"...",n=~~n,e.length>n?e.slice(0,n)+t:e},prune:function(e,n,t){e+="",n=~~n,t=null!=t?""+t:"...";var r,a,i=e.replace(/\W/g,function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "});return a=i.charAt(n),r=i.slice(0,n),a&&a.match(/\S/)&&(r=r.replace(/\s\S+$/,"")),r=f.rtrim(r),(r+t).length>e.length?e:e.substring(0,r.length)+t},words:function(e,n){return f.trim(e,n).split(n||/\s+/)},pad:function(e,n,t,r){e+="";var a=0;switch(n=~~n,t?t.length>1&&(t=t.charAt(0)):t=" ",r){case"right":return a=n-e.length,e+i(t,a);case"both":return a=n-e.length,i(t,Math.ceil(a/2))+e+i(t,Math.floor(a/2));default:return a=n-e.length,i(t,a)+e}},lpad:function(e,n,t){return f.pad(e,n,t)},rpad:function(e,n,t){return f.pad(e,n,t,"right")},lrpad:function(e,n,t){return f.pad(e,n,t,"both")},sprintf:d,vsprintf:function(e,n){return n.unshift(e),d.apply(null,n)},toNumber:function(e,n){e+="";var t=a(a(e).toFixed(~~n));return 0!==t||e.match(/^0+$/)?t:Number.NaN},strRight:function(e,n){e+="",n=null!=n?""+n:n;var t=n?e.indexOf(n):-1;return~t?e.slice(t+n.length,e.length):e},strRightBack:function(e,n){e+="",n=null!=n?""+n:n;var t=n?e.lastIndexOf(n):-1;return~t?e.slice(t+n.length,e.length):e},strLeft:function(e,n){e+="",n=null!=n?""+n:n;var t=n?e.indexOf(n):-1;return~t?e.slice(0,t):e},strLeftBack:function(e,n){e+="",n=null!=n?""+n:n;var t=e.lastIndexOf(n);return~t?e.slice(0,t):e},toSentence:function(e,n,t){n||(n=", "),t||(t=" and ");for(var r=e.length,a="",i=0;r>i;i++)a+=e[i],i===r-2?a+=t:r-1>i&&(a+=n);return a},slugify:function(e){var n="ąàáäâãćęèéëêìíïîłńòóöôõùúüûñçżź",t="aaaaaaceeeeeiiiilnooooouuuunczz",r=new RegExp(o(n),"g");return e=(""+e).toLowerCase(),e=e.replace(r,function(e){var r=n.indexOf(e);return t.charAt(r)||"-"}),f.trim(e.replace(/[^\w\s-]/g,"").replace(/[-\s]+/g,"-"),"-")},exports:function(){var e={};for(var n in this)this.hasOwnProperty(n)&&!~f.words("include contains reverse").indexOf(n)&&(e[n]=this[n]);return e},repeat:i};f.strip=f.trim,f.lstrip=f.ltrim,f.rstrip=f.rtrim,f.center=f.lrpad,f.rjust=f.lpad,f.ljust=f.rpad,f.contains=f.include,"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(module.exports=f),exports._s=f):"function"==typeof define&&define.amd?define("underscore.string",function(){return f}):(e._=e._||{},e._.string=e._.str=f)}(this||window);