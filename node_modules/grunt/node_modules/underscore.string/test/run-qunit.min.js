function waitFor(e,n,t){var r,a=(new Date).getTime();setInterval(function i(){(new Date).getTime()-a<t&&!r?r=e():r?(n(),clearInterval(i)):phantom.exit(1)},100)}var page=new WebPage;page.onConsoleMessage=function(e){console.log(e)},page.open(phantom.args[0],function(e){waitFor(function(){return page.evaluate(function(){var e=document.getElementById("qunit-testresult");return e&&e.innerText.match("completed")})},function(){var e=page.evaluate(function(){for(var e=document.getElementById("qunit-testresult"),n=document.getElementsByClassName("fail"),t=0;t<n.length;t++)console.log(n[t].innerText);return console.log(e.innerText),parseInt(e.getElementsByClassName("failed")[0].innerHTML)});phantom.exit(e>0?1:0)},1e4)});