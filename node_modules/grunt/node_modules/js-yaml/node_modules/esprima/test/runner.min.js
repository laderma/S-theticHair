function adjustRegexLiteral(e,n){"use strict";return"value"===e&&n instanceof RegExp&&(n=n.toString()),n}function NotMatchingError(e,n){"use strict";Error.call(this,"Expected "),this.expected=e,this.actual=n}function errorToObject(e){"use strict";var n=e.toString();return"Error:"!==n.substr(0,6)&&"string"==typeof e.message&&(n="Error: "+e.message),{index:e.index,lineNumber:e.lineNumber,column:e.column,message:n}}function testParse(e,n,t){"use strict";function d(e,n){return"value"===e&&n instanceof RegExp&&(n=n.toString()),"loc"===e||"range"===e?void 0:n}var r,i,a,o,s,u,l;s=String,o={comment:"undefined"!=typeof t.comments,range:!0,loc:!0,tokens:"undefined"!=typeof t.tokens,raw:!0,tolerant:"undefined"!=typeof t.errors},"undefined"!=typeof t.tokens&&t.tokens.length>0&&(o.range="undefined"!=typeof t.tokens[0].range,o.loc="undefined"!=typeof t.tokens[0].loc),"undefined"!=typeof t.comments&&t.comments.length>0&&(o.range="undefined"!=typeof t.comments[0].range,o.loc="undefined"!=typeof t.comments[0].loc),r=JSON.stringify(t,null,4);try{if(i=e.parse(n,o),i=o.comment||o.tokens||o.tolerant?i:i.body[0],o.tolerant)for(u=0,l=i.errors.length;l>u;u+=1)i.errors[u]=errorToObject(i.errors[u]);a=JSON.stringify(i,adjustRegexLiteral,4),e.parse(new s(n),o)}catch(f){throw new NotMatchingError(r,f.toString())}if(r!==a)throw new NotMatchingError(r,a);if(!o.tolerant){o.range=!1,o.loc=!1,r=JSON.stringify(t,d,4);try{if(i=e.parse(n,o),i=o.comment||o.tokens?i:i.body[0],o.tolerant)for(u=0,l=i.errors.length;l>u;u+=1)i.errors[u]=errorToObject(i.errors[u]);a=JSON.stringify(i,d,4)}catch(f){throw new NotMatchingError(r,f.toString())}if(r!==a)throw new NotMatchingError(r,a)}}function testError(e,n,t){"use strict";var r,i,a,o,s;i=[{},{comment:!0},{raw:!0},{raw:!0,comment:!0}],s=!1;try{"test".match(new RegExp("[a-z]","x"))}catch(u){s=!0}for(a=JSON.stringify(t),r=0;r<i.length;r+=1){try{e.parse(n,i[r])}catch(u){o=JSON.stringify(errorToObject(u))}if(a!==o){if(t.message.indexOf("Invalid regular expression")>0&&"undefined"==typeof o&&!s)return;throw new NotMatchingError(a,o)}}}function testAPI(e,n,t){"use strict";var r,i,a;r=JSON.stringify(t.result,null,4);try{i="undefined"!=typeof t.property?e[t.property]:e[t.call].apply(e,t.args),a=JSON.stringify(i,adjustRegexLiteral,4)}catch(o){throw new NotMatchingError(r,o.toString())}if(r!==a)throw new NotMatchingError(r,a)}function runTest(e,n,t){"use strict";t.hasOwnProperty("lineNumber")?testError(e,n,t):t.hasOwnProperty("result")?testAPI(e,n,t):testParse(e,n,t)}var runTests;NotMatchingError.prototype=new Error,"undefined"!=typeof window?runTests=function(){"use strict";function l(e,n){"string"==typeof e.innerText?e.innerText=n:e.textContent=n}function c(e){var n,t;n=document.getElementById("report"),t=document.createElement("h4"),l(t,e),n.appendChild(t)}function f(e){var n,t;n=document.getElementById("report"),t=document.createElement("pre"),t.setAttribute("class","code"),l(t,e),n.appendChild(t)}function d(e,n,t){var r,i;r=document.getElementById("report"),i=document.createElement("p"),l(i,"Code:"),r.appendChild(i),i=document.createElement("pre"),i.setAttribute("class","code"),l(i,e),r.appendChild(i),i=document.createElement("p"),l(i,"Expected"),r.appendChild(i),i=document.createElement("pre"),i.setAttribute("class","expected"),l(i,n),r.appendChild(i),i=document.createElement("p"),l(i,"Actual"),r.appendChild(i),i=document.createElement("pre"),i.setAttribute("class","actual"),l(i,t),r.appendChild(i)}var t,r,i,a,o,e=0,n=0;l(document.getElementById("version"),esprima.version),a=new Date;for(t in testFixture)if(testFixture.hasOwnProperty(t)){c(t),r=testFixture[t];for(i in r)if(r.hasOwnProperty(i)){o=r[i],e+=1;try{runTest(esprima,i,o),f(i,JSON.stringify(o,null,4))}catch(h){n+=1,d(i,h.expected,h.actual)}}}a=new Date-a,n>0?l(document.getElementById("status"),e+" tests. Failures: "+n+". "+a+" ms"):l(document.getElementById("status"),e+" tests. No failure. "+a+" ms")}:!function(){"use strict";var o,s,e=require("../esprima"),n=require("vm"),t=require("fs"),r=0,i=[],a=new Date;n.runInThisContext(t.readFileSync(__dirname+"/test.js","utf-8")),Object.keys(testFixture).forEach(function(n){Object.keys(testFixture[n]).forEach(function(t){r+=1,o=testFixture[n][t];try{runTest(e,t,o)}catch(a){a.source=t,i.push(a)}})}),a=new Date-a,s=r+" tests. "+i.length+" failures. "+a+" ms",i.length?(console.error(s),i.forEach(function(e){console.error(e.source+": Expected\n    "+e.expected.split("\n").join("\n    ")+"\nto match\n    "+e.actual)})):console.log(s),process.exit(0===i.length?0:1)}();