!function(e,n){"use strict";function l(e,n){var t,r,i=e.toLowerCase();for(n=[].concat(n),t=0;t<n.length;t+=1)if(r=n[t]){if(r.test&&r.test(e))return!0;if(r.toLowerCase()===i)return!0}}var t=n.prototype.trim,r=n.prototype.trimRight,i=n.prototype.trimLeft,a=function(e){return 1*e||0},o=function(e,n){if(1>n)return"";for(var t="";n>0;)1&n&&(t+=e),n>>=1,e+=e;return t},s=[].slice,u=function(e){return null==e?"\\s":e.source?e.source:"["+h.escapeRegExp(e)+"]"},c={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"},f={};for(var d in c)f[c[d]]=d;f["'"]="#39";var p=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}var t=o,r=function(){return r.cache.hasOwnProperty(arguments[0])||(r.cache[arguments[0]]=r.parse(arguments[0])),r.format.call(null,r.cache[arguments[0]],arguments)};return r.format=function(r,i){var u,c,f,d,h,m,g,a=1,o=r.length,s="",l=[];for(c=0;o>c;c++)if(s=e(r[c]),"string"===s)l.push(r[c]);else if("array"===s){if(d=r[c],d[2])for(u=i[a],f=0;f<d[2].length;f++){if(!u.hasOwnProperty(d[2][f]))throw new Error(p('[_.sprintf] property "%s" does not exist',d[2][f]));u=u[d[2][f]]}else u=d[1]?i[d[1]]:i[a++];if(/[^s]/.test(d[8])&&"number"!=e(u))throw new Error(p("[_.sprintf] expecting number but found %s",e(u)));switch(d[8]){case"b":u=u.toString(2);break;case"c":u=n.fromCharCode(u);break;case"d":u=parseInt(u,10);break;case"e":u=d[7]?u.toExponential(d[7]):u.toExponential();break;case"f":u=d[7]?parseFloat(u).toFixed(d[7]):parseFloat(u);break;case"o":u=u.toString(8);break;case"s":u=(u=n(u))&&d[7]?u.substring(0,d[7]):u;break;case"u":u=Math.abs(u);break;case"x":u=u.toString(16);break;case"X":u=u.toString(16).toUpperCase()}u=/[def]/.test(d[8])&&d[3]&&u>=0?"+"+u:u,m=d[4]?"0"==d[4]?"0":d[4].charAt(1):" ",g=d[6]-n(u).length,h=d[6]?t(m,g):"",l.push(d[5]?u+h:h+u)}return l.join("")},r.cache={},r.parse=function(e){for(var n=e,t=[],r=[],i=0;n;){if(null!==(t=/^[^\x25]+/.exec(n)))r.push(t[0]);else if(null!==(t=/^\x25{2}/.exec(n)))r.push("%");else{if(null===(t=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(n)))throw new Error("[_.sprintf] huh?");if(t[2]){i|=1;var a=[],o=t[2],s=[];if(null===(s=/^([a-z_][a-z_\d]*)/i.exec(o)))throw new Error("[_.sprintf] huh?");for(a.push(s[1]);""!==(o=o.substring(s[0].length));)if(null!==(s=/^\.([a-z_][a-z_\d]*)/i.exec(o)))a.push(s[1]);else{if(null===(s=/^\[(\d+)\]/.exec(o)))throw new Error("[_.sprintf] huh?");a.push(s[1])}t[2]=a}else i|=2;if(3===i)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");r.push(t)}n=n.substring(t[0].length)}return r},r}(),h={VERSION:"2.4.0",isBlank:function(e){return null==e&&(e=""),/^\s*$/.test(e)},stripTags:function(e){return null==e?"":n(e).replace(/<\/?[^>]+>/g,"")},capitalize:function(e){return e=null==e?"":n(e),e.charAt(0).toUpperCase()+e.slice(1)},chop:function(e,t){return null==e?[]:(e=n(e),t=~~t,t>0?e.match(new RegExp(".{1,"+t+"}","g")):[e])},clean:function(e){return h.strip(e).replace(/\s+/g," ")},count:function(e,t){if(null==e||null==t)return 0;e=n(e),t=n(t);for(var r=0,i=0,a=t.length;;){if(i=e.indexOf(t,i),-1===i)break;r++,i+=a}return r},chars:function(e){return null==e?[]:n(e).split("")},swapCase:function(e){return null==e?"":n(e).replace(/\S/g,function(e){return e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()})},escapeHTML:function(e){return null==e?"":n(e).replace(/[&<>"']/g,function(e){return"&"+f[e]+";"})},unescapeHTML:function(e){return null==e?"":n(e).replace(/\&([^;]+);/g,function(e,t){var r;return t in c?c[t]:(r=t.match(/^#x([\da-fA-F]+)$/))?n.fromCharCode(parseInt(r[1],16)):(r=t.match(/^#(\d+)$/))?n.fromCharCode(~~r[1]):e})},escapeRegExp:function(e){return null==e?"":n(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(e,n,t,r){var i=h.chars(e);return i.splice(~~n,~~t,r),i.join("")},insert:function(e,n,t){return h.splice(e,n,0,t)},include:function(e,t){return""===t?!0:null==e?!1:-1!==n(e).indexOf(t)},join:function(){var e=s.call(arguments),n=e.shift();return null==n&&(n=""),e.join(n)},lines:function(e){return null==e?[]:n(e).split("\n")},reverse:function(e){return h.chars(e).reverse().join("")},startsWith:function(e,t){return""===t?!0:null==e||null==t?!1:(e=n(e),t=n(t),e.length>=t.length&&e.slice(0,t.length)===t)},endsWith:function(e,t){return""===t?!0:null==e||null==t?!1:(e=n(e),t=n(t),e.length>=t.length&&e.slice(e.length-t.length)===t)},succ:function(e){return null==e?"":(e=n(e),e.slice(0,-1)+n.fromCharCode(e.charCodeAt(e.length-1)+1))},titleize:function(e){return null==e?"":(e=n(e).toLowerCase(),e.replace(/(?:^|\s|-)\S/g,function(e){return e.toUpperCase()}))},camelize:function(e){return h.trim(e).replace(/[-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""})},underscored:function(e){return h.trim(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(e){return h.trim(e).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(e){return h.capitalize(h.camelize(n(e).replace(/[\W_]/g," ")).replace(/\s/g,""))},humanize:function(e){return h.capitalize(h.underscored(e).replace(/_id$/,"").replace(/_/g," "))},trim:function(e,r){return null==e?"":!r&&t?t.call(e):(r=u(r),n(e).replace(new RegExp("^"+r+"+|"+r+"+$","g"),""))},ltrim:function(e,t){return null==e?"":!t&&i?i.call(e):(t=u(t),n(e).replace(new RegExp("^"+t+"+"),""))},rtrim:function(e,t){return null==e?"":!t&&r?r.call(e):(t=u(t),n(e).replace(new RegExp(t+"+$"),""))},truncate:function(e,t,r){return null==e?"":(e=n(e),r=r||"...",t=~~t,e.length>t?e.slice(0,t)+r:e)},prune:function(e,t,r){if(null==e)return"";if(e=n(e),t=~~t,r=null!=r?n(r):"...",e.length<=t)return e;var i=function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "},a=e.slice(0,t+1).replace(/.(?=\W*\w*$)/g,i);return a=a.slice(a.length-2).match(/\w\w/)?a.replace(/\s*\S+$/,""):h.rtrim(a.slice(0,a.length-1)),(a+r).length>e.length?e:e.slice(0,a.length)+r},words:function(e,n){return h.isBlank(e)?[]:h.trim(e,n).split(n||/\s+/)},pad:function(e,t,r,i){e=null==e?"":n(e),t=~~t;var a=0;switch(r?r.length>1&&(r=r.charAt(0)):r=" ",i){case"right":return a=t-e.length,e+o(r,a);case"both":return a=t-e.length,o(r,Math.ceil(a/2))+e+o(r,Math.floor(a/2));default:return a=t-e.length,o(r,a)+e}},lpad:function(e,n,t){return h.pad(e,n,t)},rpad:function(e,n,t){return h.pad(e,n,t,"right")},lrpad:function(e,n,t){return h.pad(e,n,t,"both")},sprintf:p,vsprintf:function(e,n){return n.unshift(e),p.apply(null,n)},toNumber:function(e,n){return e?(e=h.trim(e),e.match(/^-?\d+(?:\.\d+)?$/)?a(a(e).toFixed(~~n)):NaN):0},numberFormat:function(e,n,t,r){if(isNaN(e)||null==e)return"";e=e.toFixed(~~n),r="string"==typeof r?r:",";var i=e.split("."),a=i[0],o=i[1]?(t||".")+i[1]:"";return a.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+r)+o},strRight:function(e,t){if(null==e)return"";e=n(e),t=null!=t?n(t):t;var r=t?e.indexOf(t):-1;return~r?e.slice(r+t.length,e.length):e},strRightBack:function(e,t){if(null==e)return"";e=n(e),t=null!=t?n(t):t;var r=t?e.lastIndexOf(t):-1;return~r?e.slice(r+t.length,e.length):e},strLeft:function(e,t){if(null==e)return"";e=n(e),t=null!=t?n(t):t;var r=t?e.indexOf(t):-1;return~r?e.slice(0,r):e},strLeftBack:function(e,n){if(null==e)return"";e+="",n=null!=n?""+n:n;var t=e.lastIndexOf(n);return~t?e.slice(0,t):e},toSentence:function(e,n,t,r){n=n||", ",t=t||" and ";var i=e.slice(),a=i.pop();return e.length>2&&r&&(t=h.rtrim(n)+t),i.length?i.join(n)+t+a:a},toSentenceSerial:function(){var e=s.call(arguments);return e[3]=!0,h.toSentence.apply(h,e)},slugify:function(e){if(null==e)return"";var t="ąàáäâãåæăćęèéëêìíïîłńòóöôõøśșțùúüûñçżź",r="aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz",i=new RegExp(u(t),"g");return e=n(e).toLowerCase().replace(i,function(e){var n=t.indexOf(e);return r.charAt(n)||"-"}),h.dasherize(e.replace(/[^\w\s-]/g,""))},surround:function(e,n){return[n,e,n].join("")},quote:function(e,n){return h.surround(e,n||'"')},unquote:function(e,n){return n=n||'"',e[0]===n&&e[e.length-1]===n?e.slice(1,e.length-1):e},exports:function(){var e={};for(var n in this)this.hasOwnProperty(n)&&!n.match(/^(?:include|contains|reverse)$/)&&(e[n]=this[n]);return e},repeat:function(e,t,r){if(null==e)return"";if(t=~~t,null==r)return o(n(e),t);for(var i=[];t>0;i[--t]=e);return i.join(r)},naturalCmp:function(e,t){if(e==t)return 0;if(!e)return-1;if(!t)return 1;for(var r=/(\.\d+)|(\d+)|(\D+)/g,i=n(e).toLowerCase().match(r),a=n(t).toLowerCase().match(r),o=Math.min(i.length,a.length),s=0;o>s;s++){var u=i[s],l=a[s];if(u!==l){var c=parseInt(u,10);if(!isNaN(c)){var f=parseInt(l,10);if(!isNaN(f)&&c-f)return c-f}return l>u?-1:1}}return i.length===a.length?i.length-a.length:t>e?-1:1},levenshtein:function(e,t){if(null==e&&null==t)return 0;if(null==e)return n(t).length;if(null==t)return n(e).length;e=n(e),t=n(t);for(var i,a,r=[],o=0;o<=t.length;o++)for(var s=0;s<=e.length;s++)a=o&&s?e.charAt(s-1)===t.charAt(o-1)?i:Math.min(r[s],r[s-1],i)+1:o+s,i=r[s],r[s]=a;return r.pop()},toBoolean:function(e,n,t){return"number"==typeof e&&(e=""+e),"string"!=typeof e?!!e:(e=h.trim(e),l(e,n||["true","1"])?!0:l(e,t||["false","0"])?!1:void 0)}};h.strip=h.trim,h.lstrip=h.ltrim,h.rstrip=h.rtrim,h.center=h.lrpad,h.rjust=h.lpad,h.ljust=h.rpad,h.contains=h.include,h.q=h.quote,h.toBool=h.toBoolean,"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(module.exports=h),exports._s=h),"function"==typeof define&&define.amd&&define("underscore.string",[],function(){return h}),e._=e._||{},e._.string=e._.str=h}(this,String);