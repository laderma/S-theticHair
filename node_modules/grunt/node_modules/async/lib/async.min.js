!function(){var e={},n=this,t=n.async;"undefined"!=typeof module&&module.exports?module.exports=e:n.async=e,e.noConflict=function(){return n.async=t,e};var r=function(e,n){if(e.forEach)return e.forEach(n);for(var t=0;t<e.length;t+=1)n(e[t],t,e)},a=function(e,n){if(e.map)return e.map(n);var t=[];return r(e,function(e,r,a){t.push(n(e,r,a))}),t},i=function(e,n,t){return e.reduce?e.reduce(n,t):(r(e,function(e,r,a){t=n(t,e,r,a)}),t)},s=function(e){if(Object.keys)return Object.keys(e);var n=[];for(var t in e)e.hasOwnProperty(t)&&n.push(t);return n};"undefined"!=typeof process&&process.nextTick?e.nextTick=process.nextTick:e.nextTick=function(e){setTimeout(e,0)},e.forEach=function(e,n,t){if(t=t||function(){},!e.length)return t();var a=0;r(e,function(r){n(r,function(n){n?(t(n),t=function(){}):(a+=1,a===e.length&&t(null))})})},e.forEachSeries=function(e,n,t){if(t=t||function(){},!e.length)return t();var r=0,a=function(){n(e[r],function(n){n?(t(n),t=function(){}):(r+=1,r===e.length?t(null):a())})};a()},e.forEachLimit=function(e,n,t,r){if(r=r||function(){},!e.length||0>=n)return r();var a=0,i=0,s=0;!function o(){if(a===e.length)return r();for(;n>s&&i<e.length;)i+=1,s+=1,t(e[i-1],function(n){n?(r(n),r=function(){}):(a+=1,s-=1,a===e.length?r():o())})}()};var o=function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[e.forEach].concat(t))}},l=function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[e.forEachSeries].concat(t))}},u=function(e,n,t,r){var i=[];n=a(n,function(e,n){return{index:n,value:e}}),e(n,function(e,n){t(e.value,function(t,r){i[e.index]=r,n(t)})},function(e){r(e,i)})};e.map=o(u),e.mapSeries=l(u),e.reduce=function(n,t,r,a){e.forEachSeries(n,function(e,n){r(t,e,function(e,r){t=r,n(e)})},function(e){a(e,t)})},e.inject=e.reduce,e.foldl=e.reduce,e.reduceRight=function(n,t,r,i){var s=a(n,function(e){return e}).reverse();e.reduce(s,t,r,i)},e.foldr=e.reduceRight;var c=function(e,n,t,r){var i=[];n=a(n,function(e,n){return{index:n,value:e}}),e(n,function(e,n){t(e.value,function(t){t&&i.push(e),n()})},function(e){r(a(i.sort(function(e,n){return e.index-n.index}),function(e){return e.value}))})};e.filter=o(c),e.filterSeries=l(c),e.select=e.filter,e.selectSeries=e.filterSeries;var d=function(e,n,t,r){var i=[];n=a(n,function(e,n){return{index:n,value:e}}),e(n,function(e,n){t(e.value,function(t){t||i.push(e),n()})},function(e){r(a(i.sort(function(e,n){return e.index-n.index}),function(e){return e.value}))})};e.reject=o(d),e.rejectSeries=l(d);var f=function(e,n,t,r){e(n,function(e,n){t(e,function(t){t?(r(e),r=function(){}):n()})},function(e){r()})};e.detect=o(f),e.detectSeries=l(f),e.some=function(n,t,r){e.forEach(n,function(e,n){t(e,function(e){e&&(r(!0),r=function(){}),n()})},function(e){r(!1)})},e.any=e.some,e.every=function(n,t,r){e.forEach(n,function(e,n){t(e,function(e){e||(r(!1),r=function(){}),n()})},function(e){r(!0)})},e.all=e.every,e.sortBy=function(n,t,r){e.map(n,function(e,n){t(e,function(t,r){t?n(t):n(null,{value:e,criteria:r})})},function(e,n){if(e)return r(e);var t=function(e,n){var t=e.criteria,r=n.criteria;return r>t?-1:t>r?1:0};r(null,a(n.sort(t),function(e){return e.value}))})},e.auto=function(e,n){n=n||function(){};var t=s(e);if(!t.length)return n(null);var a={},o=[],l=function(e){o.unshift(e)},u=function(e){for(var n=0;n<o.length;n+=1)if(o[n]===e)return void o.splice(n,1)},c=function(){r(o.slice(0),function(e){e()})};l(function(){s(a).length===t.length&&(n(null,a),n=function(){})}),r(t,function(t){var r=e[t]instanceof Function?[e[t]]:e[t],s=function(e){if(e)n(e),n=function(){};else{var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),a[t]=r,c()}},o=r.slice(0,Math.abs(r.length-1))||[],d=function(){return i(o,function(e,n){return e&&a.hasOwnProperty(n)},!0)&&!a.hasOwnProperty(t)};if(d())r[r.length-1](s,a);else{var f=function(){d()&&(u(f),r[r.length-1](s,a))};l(f)}})},e.waterfall=function(n,t){if(t=t||function(){},!n.length)return t();var r=function(n){return function(a){if(a)t(a),t=function(){};else{var i=Array.prototype.slice.call(arguments,1),s=n.next();s?i.push(r(s)):i.push(t),e.nextTick(function(){n.apply(null,i)})}}};r(e.iterator(n))()},e.parallel=function(n,t){if(t=t||function(){},n.constructor===Array)e.map(n,function(e,n){e&&e(function(e){var t=Array.prototype.slice.call(arguments,1);t.length<=1&&(t=t[0]),n.call(null,e,t)})},t);else{var r={};e.forEach(s(n),function(e,t){n[e](function(n){var a=Array.prototype.slice.call(arguments,1);a.length<=1&&(a=a[0]),r[e]=a,t(n)})},function(e){t(e,r)})}},e.series=function(n,t){if(t=t||function(){},n.constructor===Array)e.mapSeries(n,function(e,n){e&&e(function(e){var t=Array.prototype.slice.call(arguments,1);t.length<=1&&(t=t[0]),n.call(null,e,t)})},t);else{var r={};e.forEachSeries(s(n),function(e,t){n[e](function(n){var a=Array.prototype.slice.call(arguments,1);a.length<=1&&(a=a[0]),r[e]=a,t(n)})},function(e){t(e,r)})}},e.iterator=function(e){var n=function(t){var r=function(){return e.length&&e[t].apply(null,arguments),r.next()};return r.next=function(){return t<e.length-1?n(t+1):null},r};return n(0)},e.apply=function(e){var n=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,n.concat(Array.prototype.slice.call(arguments)))}};var h=function(e,n,t,r){var a=[];e(n,function(e,n){t(e,function(e,t){a=a.concat(t||[]),n(e)})},function(e){r(e,a)})};e.concat=o(h),e.concatSeries=l(h),e.whilst=function(n,t,r){n()?t(function(a){return a?r(a):void e.whilst(n,t,r)}):r()},e.until=function(n,t,r){n()?r():t(function(a){return a?r(a):void e.until(n,t,r)})},e.queue=function(n,t){var a=0,i={tasks:[],concurrency:t,saturated:null,empty:null,drain:null,push:function(n,a){n.constructor!==Array&&(n=[n]),r(n,function(n){i.tasks.push({data:n,callback:"function"==typeof a?a:null}),i.saturated&&i.tasks.length==t&&i.saturated(),e.nextTick(i.process)})},process:function(){if(a<i.concurrency&&i.tasks.length){var e=i.tasks.shift();i.empty&&0==i.tasks.length&&i.empty(),a+=1,n(e.data,function(){a-=1,e.callback&&e.callback.apply(e,arguments),i.drain&&i.tasks.length+a==0&&i.drain(),i.process()})}},length:function(){return i.tasks.length},running:function(){return a}};return i};var p=function(e){return function(n){var t=Array.prototype.slice.call(arguments,1);n.apply(null,t.concat([function(n){var t=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(n?console.error&&console.error(n):console[e]&&r(t,function(n){console[e](n)}))}]))}};e.log=p("log"),e.dir=p("dir"),e.memoize=function(e,n){var t={},r={};n=n||function(e){return e};var a=function(){var a=Array.prototype.slice.call(arguments),i=a.pop(),s=n.apply(null,a);s in t?i.apply(null,t[s]):s in r?r[s].push(i):(r[s]=[i],e.apply(null,a.concat([function(){t[s]=arguments;var e=r[s];delete r[s];for(var n=0,a=e.length;a>n;n++)e[n].apply(null,arguments)}])))};return a.unmemoized=e,a},e.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}}}();