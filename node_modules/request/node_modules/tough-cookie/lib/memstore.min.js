function MemoryCookieStore(){this.idx={}}var tough=require("./cookie"),permuteDomain=tough.permuteDomain,permutePath=tough.permutePath,util=require("util");module.exports.MemoryCookieStore=MemoryCookieStore,MemoryCookieStore.prototype.idx=null,MemoryCookieStore.prototype.inspect=function(){return"{ idx: "+util.inspect(this.idx,!1,2)+" }"},MemoryCookieStore.prototype.findCookie=function(e,n,t,r){return this.idx[e]&&this.idx[e][n]?r(null,this.idx[e][n][t]||null):r(null,void 0)},MemoryCookieStore.prototype.findCookies=function(e,n,t){var r=[];if(!e)return t(null,[]);var a;if(n)if("/"===n)a=function(e){var n=e["/"];if(n)for(var t in n)r.push(n[t])};else{var i=permutePath(n)||[n];a=function(e){i.forEach(function(n){var t=e[n];if(t)for(var a in t)r.push(t[a])})}}else a=function(e){for(var n in e){var t=e[n];for(var a in t)r.push(t[a])}};var s=permuteDomain(e)||[e],o=this.idx;s.forEach(function(e){var n=o[e];n&&a(n)}),t(null,r)},MemoryCookieStore.prototype.putCookie=function(e,n){this.idx[e.domain]||(this.idx[e.domain]={}),this.idx[e.domain][e.path]||(this.idx[e.domain][e.path]={}),this.idx[e.domain][e.path][e.key]=e,n(null)},MemoryCookieStore.prototype.updateCookie=function(e,n,t){this.putCookie(n,t)},MemoryCookieStore.prototype.removeCookie=function(e,n,t,r){this.idx[e]&&this.idx[e][n]&&this.idx[e][n][t]&&delete this.idx[e][n][t],r(null)},MemoryCookieStore.prototype.removeCookies=function(e,n,t){return this.idx[e]||(n?delete this.idx[e][n]:delete this.idx[e]),t(null)};