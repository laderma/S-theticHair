function sha1(e,n){return crypto.createHmac("sha1",e).update(n).digest("base64")}function rfc3986(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/\*/g,"%2A").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/'/g,"%27")}function hmacsign(e,n,t,r,a){var i=Object.keys(t).sort().map(function(e){return escape(rfc3986(e))+"%3D"+escape(rfc3986(t[e]))}).join("%26"),s=[e?e.toUpperCase():"GET",rfc3986(n),i].join("&"),o=[r,a||""].map(rfc3986).join("&");return sha1(o,s)}var crypto=require("crypto"),qs=require("querystring");exports.hmacsign=hmacsign,exports.rfc3986=rfc3986;