!function(){function r(e){var t=!1;return function(){if(t)throw new Error("Callback was already called.");t=!0,e.apply(n,arguments)}}var n,t,e={};n=this,null!=n&&(t=n.async),e.noConflict=function(){return n.async=t,e};var i=Object.prototype.toString,a=Array.isArray||function(e){return"[object Array]"===i.call(e)},o=function(e,n){for(var t=0;t<e.length;t+=1)n(e[t],t,e)},s=function(e,n){if(e.map)return e.map(n);var t=[];return o(e,function(e,r,i){t.push(n(e,r,i))}),t},u=function(e,n,t){return e.reduce?e.reduce(n,t):(o(e,function(e,r,i){t=n(t,e,r,i)}),t)},l=function(e){if(Object.keys)return Object.keys(e);var n=[];for(var t in e)e.hasOwnProperty(t)&&n.push(t);return n};"undefined"!=typeof process&&process.nextTick?(e.nextTick=process.nextTick,"undefined"!=typeof setImmediate?e.setImmediate=function(e){setImmediate(e)}:e.setImmediate=e.nextTick):"function"==typeof setImmediate?(e.nextTick=function(e){setImmediate(e)},e.setImmediate=e.nextTick):(e.nextTick=function(e){setTimeout(e,0)},e.setImmediate=e.nextTick),e.each=function(e,n,t){function a(n){n?(t(n),t=function(){}):(i+=1,i>=e.length&&t())}if(t=t||function(){},!e.length)return t();var i=0;o(e,function(e){n(e,r(a))})},e.forEach=e.each,e.eachSeries=function(e,n,t){if(t=t||function(){},!e.length)return t();var r=0,i=function(){n(e[r],function(n){n?(t(n),t=function(){}):(r+=1,r>=e.length?t():i())})};i()},e.forEachSeries=e.eachSeries,e.eachLimit=function(e,n,t,r){var i=c(n);i.apply(null,[e,t,r])},e.forEachLimit=e.eachLimit;var c=function(e){return function(n,t,r){if(r=r||function(){},!n.length||0>=e)return r();var i=0,a=0,o=0;!function s(){if(i>=n.length)return r();for(;e>o&&a<n.length;)a+=1,o+=1,t(n[a-1],function(e){e?(r(e),r=function(){}):(i+=1,o-=1,i>=n.length?r():s())})}()}},f=function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[e.each].concat(t))}},d=function(e,n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[c(e)].concat(t))}},h=function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[e.eachSeries].concat(t))}},p=function(e,n,t,r){if(n=s(n,function(e,n){return{index:n,value:e}}),r){var i=[];e(n,function(e,n){t(e.value,function(t,r){i[e.index]=r,n(t)})},function(e){r(e,i)})}else e(n,function(e,n){t(e.value,function(e){n(e)})})};e.map=f(p),e.mapSeries=h(p),e.mapLimit=function(e,n,t,r){return m(n)(e,t,r)};var m=function(e){return d(e,p)};e.reduce=function(n,t,r,i){e.eachSeries(n,function(e,n){r(t,e,function(e,r){t=r,n(e)})},function(e){i(e,t)})},e.inject=e.reduce,e.foldl=e.reduce,e.reduceRight=function(n,t,r,i){var a=s(n,function(e){return e}).reverse();e.reduce(a,t,r,i)},e.foldr=e.reduceRight;var g=function(e,n,t,r){var i=[];n=s(n,function(e,n){return{index:n,value:e}}),e(n,function(e,n){t(e.value,function(t){t&&i.push(e),n()})},function(e){r(s(i.sort(function(e,n){return e.index-n.index}),function(e){return e.value}))})};e.filter=f(g),e.filterSeries=h(g),e.select=e.filter,e.selectSeries=e.filterSeries;var v=function(e,n,t,r){var i=[];n=s(n,function(e,n){return{index:n,value:e}}),e(n,function(e,n){t(e.value,function(t){t||i.push(e),n()})},function(e){r(s(i.sort(function(e,n){return e.index-n.index}),function(e){return e.value}))})};e.reject=f(v),e.rejectSeries=h(v);var b=function(e,n,t,r){e(n,function(e,n){t(e,function(t){t?(r(e),r=function(){}):n()})},function(e){r()})};e.detect=f(b),e.detectSeries=h(b),e.some=function(n,t,r){e.each(n,function(e,n){t(e,function(e){e&&(r(!0),r=function(){}),n()})},function(e){r(!1)})},e.any=e.some,e.every=function(n,t,r){e.each(n,function(e,n){t(e,function(e){e||(r(!1),r=function(){}),n()})},function(e){r(!0)})},e.all=e.every,e.sortBy=function(n,t,r){e.map(n,function(e,n){t(e,function(t,r){t?n(t):n(null,{value:e,criteria:r})})},function(e,n){if(e)return r(e);var t=function(e,n){var t=e.criteria,r=n.criteria;return r>t?-1:t>r?1:0};r(null,s(n.sort(t),function(e){return e.value}))})},e.auto=function(n,t){t=t||function(){};var r=l(n),i=r.length;if(!i)return t();var s={},c=[],f=function(e){c.unshift(e)},d=function(e){for(var n=0;n<c.length;n+=1)if(c[n]===e)return void c.splice(n,1)},h=function(){i--,o(c.slice(0),function(e){e()})};f(function(){if(!i){var e=t;t=function(){},e(null,s)}}),o(r,function(r){var i=a(n[r])?n[r]:[n[r]],c=function(n){var i=Array.prototype.slice.call(arguments,1);if(i.length<=1&&(i=i[0]),n){var a={};o(l(s),function(e){a[e]=s[e]}),a[r]=i,t(n,a),t=function(){}}else s[r]=i,e.setImmediate(h)},p=i.slice(0,Math.abs(i.length-1))||[],m=function(){return u(p,function(e,n){return e&&s.hasOwnProperty(n)},!0)&&!s.hasOwnProperty(r)};if(m())i[i.length-1](c,s);else{var g=function(){m()&&(d(g),i[i.length-1](c,s))};f(g)}})},e.retry=function(n,t,r){var i=5,a=[];"function"==typeof n&&(r=t,t=n,n=i),n=parseInt(n,10)||i;var o=function(i,o){for(var s=function(e,n){return function(t){e(function(e,r){t(!e||n,{err:e,result:r})},o)}};n;)a.push(s(t,!(n-=1)));e.series(a,function(e,n){n=n[n.length-1],(i||r)(n.err,n.result)})};return r?o():o},e.waterfall=function(n,t){if(t=t||function(){},!a(n)){var r=new Error("First argument to waterfall must be an array of functions");return t(r)}if(!n.length)return t();var i=function(n){return function(r){if(r)t.apply(null,arguments),t=function(){};else{var a=Array.prototype.slice.call(arguments,1),o=n.next();o?a.push(i(o)):a.push(t),e.setImmediate(function(){n.apply(null,a)})}}};i(e.iterator(n))()};var y=function(e,n,t){if(t=t||function(){},a(n))e.map(n,function(e,n){e&&e(function(e){var t=Array.prototype.slice.call(arguments,1);t.length<=1&&(t=t[0]),n.call(null,e,t)})},t);else{var r={};e.each(l(n),function(e,t){n[e](function(n){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[e]=i,t(n)})},function(e){t(e,r)})}};e.parallel=function(n,t){y({map:e.map,each:e.each},n,t)},e.parallelLimit=function(e,n,t){y({map:m(n),each:c(n)},e,t)},e.series=function(n,t){if(t=t||function(){},a(n))e.mapSeries(n,function(e,n){e&&e(function(e){var t=Array.prototype.slice.call(arguments,1);t.length<=1&&(t=t[0]),n.call(null,e,t)})},t);else{var r={};e.eachSeries(l(n),function(e,t){n[e](function(n){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[e]=i,t(n)})},function(e){t(e,r)})}},e.iterator=function(e){var n=function(t){var r=function(){return e.length&&e[t].apply(null,arguments),r.next()};return r.next=function(){return t<e.length-1?n(t+1):null},r};return n(0)},e.apply=function(e){var n=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,n.concat(Array.prototype.slice.call(arguments)))}};var _=function(e,n,t,r){var i=[];e(n,function(e,n){t(e,function(e,t){i=i.concat(t||[]),n(e)})},function(e){r(e,i)})};e.concat=f(_),e.concatSeries=h(_),e.whilst=function(n,t,r){n()?t(function(i){return i?r(i):void e.whilst(n,t,r)}):r()},e.doWhilst=function(n,t,r){n(function(i){if(i)return r(i);var a=Array.prototype.slice.call(arguments,1);t.apply(null,a)?e.doWhilst(n,t,r):r()})},e.until=function(n,t,r){n()?r():t(function(i){return i?r(i):void e.until(n,t,r)})},e.doUntil=function(n,t,r){n(function(i){if(i)return r(i);var a=Array.prototype.slice.call(arguments,1);t.apply(null,a)?r():e.doUntil(n,t,r)})},e.queue=function(n,t){function i(n,t,r,i){return n.started||(n.started=!0),a(t)||(t=[t]),0==t.length?e.setImmediate(function(){n.drain&&n.drain()}):void o(t,function(t){var a={data:t,callback:"function"==typeof i?i:null};r?n.tasks.unshift(a):n.tasks.push(a),n.saturated&&n.tasks.length===n.concurrency&&n.saturated(),e.setImmediate(n.process)})}void 0===t&&(t=1);var s=0,u={tasks:[],concurrency:t,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(e,n){i(u,e,!1,n)},kill:function(){u.drain=null,u.tasks=[]},unshift:function(e,n){i(u,e,!0,n)},process:function(){if(!u.paused&&s<u.concurrency&&u.tasks.length){var e=u.tasks.shift();u.empty&&0===u.tasks.length&&u.empty(),s+=1;var t=function(){s-=1,e.callback&&e.callback.apply(e,arguments),u.drain&&u.tasks.length+s===0&&u.drain(),u.process()},i=r(t);n(e.data,i)}},length:function(){return u.tasks.length},running:function(){return s},idle:function(){return u.tasks.length+s===0},pause:function(){u.paused!==!0&&(u.paused=!0)},resume:function(){if(u.paused!==!1){u.paused=!1;for(var n=1;n<=u.concurrency;n++)e.setImmediate(u.process)}}};return u},e.priorityQueue=function(n,t){function r(e,n){return e.priority-n.priority}function i(e,n,t){for(var r=-1,i=e.length-1;i>r;){var a=r+(i-r+1>>>1);t(n,e[a])>=0?r=a:i=a-1}return r}function s(n,t,s,u){return n.started||(n.started=!0),a(t)||(t=[t]),0==t.length?e.setImmediate(function(){n.drain&&n.drain()}):void o(t,function(t){var a={data:t,priority:s,callback:"function"==typeof u?u:null};n.tasks.splice(i(n.tasks,a,r)+1,0,a),n.saturated&&n.tasks.length===n.concurrency&&n.saturated(),e.setImmediate(n.process)})}var u=e.queue(n,t);return u.push=function(e,n,t){s(u,e,n,t)},delete u.unshift,u},e.cargo=function(n,t){var r=!1,i=[],u={tasks:i,payload:t,saturated:null,empty:null,drain:null,drained:!0,push:function(n,r){a(n)||(n=[n]),o(n,function(e){i.push({data:e,callback:"function"==typeof r?r:null}),u.drained=!1,u.saturated&&i.length===t&&u.saturated()}),e.setImmediate(u.process)},process:function l(){if(!r){if(0===i.length)return u.drain&&!u.drained&&u.drain(),void(u.drained=!0);var e="number"==typeof t?i.splice(0,t):i.splice(0,i.length),a=s(e,function(e){return e.data});u.empty&&u.empty(),r=!0,n(a,function(){r=!1;var n=arguments;o(e,function(e){e.callback&&e.callback.apply(null,n)}),l()})}},length:function(){return i.length},running:function(){return r}};return u};var w=function(e){return function(n){var t=Array.prototype.slice.call(arguments,1);n.apply(null,t.concat([function(n){var t=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(n?console.error&&console.error(n):console[e]&&o(t,function(n){console[e](n)}))}]))}};e.log=w("log"),e.dir=w("dir"),e.memoize=function(n,t){var r={},i={};t=t||function(e){return e};var a=function(){var a=Array.prototype.slice.call(arguments),o=a.pop(),s=t.apply(null,a);s in r?e.nextTick(function(){o.apply(null,r[s])}):s in i?i[s].push(o):(i[s]=[o],n.apply(null,a.concat([function(){r[s]=arguments;var e=i[s];delete i[s];for(var n=0,t=e.length;t>n;n++)e[n].apply(null,arguments)}])))};return a.memo=r,a.unmemoized=n,a},e.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},e.times=function(n,t,r){for(var i=[],a=0;n>a;a++)i.push(a);return e.map(i,t,r)},e.timesSeries=function(n,t,r){for(var i=[],a=0;n>a;a++)i.push(a);return e.mapSeries(i,t,r)},e.seq=function(){var n=arguments;return function(){var t=this,r=Array.prototype.slice.call(arguments),i=r.pop();e.reduce(n,r,function(e,n,r){n.apply(t,e.concat([function(){var e=arguments[0],n=Array.prototype.slice.call(arguments,1);r(e,n)}]))},function(e,n){i.apply(t,[e].concat(n))})}},e.compose=function(){return e.seq.apply(null,Array.prototype.reverse.call(arguments))};var k=function(e,n){var t=function(){var t=this,r=Array.prototype.slice.call(arguments),i=r.pop();return e(n,function(e,n){e.apply(t,r.concat([n]))},i)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return t.apply(this,r)}return t};e.applyEach=f(k),e.applyEachSeries=h(k),e.forever=function(e,n){function t(r){if(r){if(n)return n(r);throw r}e(t)}t()},"undefined"!=typeof module&&module.exports?module.exports=e:"undefined"!=typeof define&&define.amd?define([],function(){return e}):n.async=e}();