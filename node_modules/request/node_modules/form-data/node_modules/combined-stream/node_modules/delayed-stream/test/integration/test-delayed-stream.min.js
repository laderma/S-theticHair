var common=require("../common"),assert=common.assert,fake=common.fake.create(),DelayedStream=common.DelayedStream,Stream=require("stream").Stream;!function(){var e=new Stream,n=DelayedStream.create(e,{pauseStream:!1});fake.expect(n,"emit",0);var t=[];e.on("foo",function(e){t.push(e)}),e.emit("foo",1),e.emit("foo",2),assert.deepEqual(t,[1,2]),fake.verify(),fake.stub(n,"emit").times(1/0).withArg(1,"newListener"),fake.expect(n,"emit",["foo",1]),fake.expect(n,"emit",["foo",2]),fake.expect(e,"resume"),n.resume(),fake.verify(),fake.expect(e,"resume"),n.resume(),fake.verify(),fake.expect(n,"emit",["foo",3]),e.emit("foo",3),fake.verify()}();