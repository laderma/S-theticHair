function spawn(n,e,r){if("Windows_NT"===os){n=n.replace(/\//g,"\\"),"rm"===n&&(n="rmdir",("-rf"===e[0]||"-fr"==e[0])&&(e[0]="/q",e.unshift("/s")),"-f"===e[0]&&(e[0]="/q"),"-r"===e[0]&&(e[0]="/s")),e=e||[],r=r||{};var a,t;if(t=/((?:[A-Z_]+\=[^ \=]+ )+)?([^\r\n]+)/.exec(n))try{var i=require("fs").readFileSync(t[2],"utf8");(a=/\#\!\/usr\/bin\/env ([^\r\n]+)/.exec(i))&&(e.unshift(t[2]),n=(t[1]||"")+a[1])}catch(s){}if(a=/((?:[A-Z_]+\=[^ \=]+ )+)([^\r\n]+)/.exec(n)){n=a[2],r.env=r.env||shallowClone(process.env);var l=a[1].split(" ");l.forEach(function(n){n=n.split("="),2===n.length&&(r.env[n[0]]=n[1])})}e.unshift(n),e.unshift("/c"),e.unshift("/d"),n="cmd"}return cSpawn(n,e,r)}function shallowClone(n){var e={};return Object.keys(n).forEach(function(r){e[r]=n[r]}),e}var cSpawn=require("child_process").spawn,os=require("os").type();exports=module.exports=spawn;