function tinylr(e){var n=new Server(e);return servers.push(n),n}function middleware(e){var n=new Server(e);return servers.push(n),function(e,t,r){n.handler(e,t,r)}}function changed(e){var n=[].slice.call(arguments);"function"===n[n.length-1]&&(e=n.pop()),e="function"==typeof e?e:function(){},debug("Notifying %d servers - Files: ",servers.length,n),servers.forEach(function(e){var t={params:{files:n}};e&&e.changed(t)}),e()}var util=require("util"),Server=require("./server"),Client=require("./client"),debug=require("debug")("tinylr"),servers=[];module.exports=tinylr,tinylr.Server=Server,tinylr.Client=Client,tinylr.middleware=middleware,tinylr.changed=changed;