function logger(e){return e=e||"%s - %s",function(n,t,r){debug(e,n.method,n.url),r()}}function throttle(e,n){var t=Date.now();return function(){var r=Date.now(),a=r-t;e>a||(t=r,n.apply(this,arguments))}}var fs=require("fs"),path=require("path"),express=require("express"),tinylr=require("../.."),debug=require("debug")("tinylr:server");process.env.DEBUG=process.env.DEBUG||"tinylr*";var app=module.exports=express(),watch=function e(n){return n=n||new(require("events").EventEmitter),n.on("rename",function(e){tinylr.changed(e)}),fs.watch(path.join(__dirname,"styles/site.css"),throttle(200,function(e,t){n.emit(e,t)})),e}();app.use(logger()).use("/",express["static"](path.join(__dirname))).use(tinylr.middleware({app:app}));