function typeis(e,n){var t,r=n,i=typenormalize(e);if(!i)return!1;if(r&&!Array.isArray(r))for(r=new Array(arguments.length-1),t=0;t<r.length;t++)r[t]=arguments[t+1];if(!r||!r.length)return i;var a;for(t=0;t<r.length;t++)if(mimeMatch(normalize(a=r[t]),i))return"+"===a[0]||~a.indexOf("*")?i:a;return!1}function hasbody(e){var n=e.headers;return"transfer-encoding"in n?!0:!isNaN(n["content-length"])}function typeofrequest(e,n){var t=n;if(!hasbody(e))return null;if(arguments.length>2){t=new Array(arguments.length-1);for(var r=0;r<t.length;r++)t[r]=arguments[r+1]}var i=e.headers["content-type"];return typeis(i,t)}function normalize(e){switch(e){case"urlencoded":return"application/x-www-form-urlencoded";case"multipart":e="multipart/*"}return"+"===e[0]||~e.indexOf("/")?e:mime.lookup(e)}function mimeMatch(e,n){return e===!1?!1:e===n?!0:(n=n.split("/"),"+"===e[0]?Boolean(n[1])&&e.length<=n[1].length&&e===n[1].substr(0-e.length):~e.indexOf("*")?(e=e.split("/"),"*"===e[0]?e[1]===n[1]:"*"===e[1]?e[0]===n[0]:"*"===e[1][0]&&"+"===e[1][1]?e[0]===n[0]&&e[1].length<=n[1].length+1&&e[1].substr(1)===n[1].substr(1-e[1].length):!1):!1)}function typenormalize(e){try{var n=typer.parse(e);return delete n.parameters,typer.format(n)}catch(t){return null}}var typer=require("media-typer"),mime=require("mime-types");module.exports=typeofrequest,typeofrequest.is=typeis,typeofrequest.hasBody=hasbody,typeofrequest.normalize=normalize,typeofrequest.match=mimeMatch;