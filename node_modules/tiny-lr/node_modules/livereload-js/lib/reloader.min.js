(function(){var e,n,t,r,a,i,o;o=function(e){var n,t,r;return(t=e.indexOf("#"))>=0?(n=e.slice(t),e=e.slice(0,t)):n="",(t=e.indexOf("?"))>=0?(r=e.slice(t),e=e.slice(0,t)):r="",{url:e,params:r,hash:n}},r=function(e){var n;return e=o(e).url,n=0===e.indexOf("file://")?e.replace(/^file:\/\/(localhost)?/,""):e.replace(/^([^:]+:)?\/\/([^:\/]+)(:\d*)?\//,"/"),decodeURIComponent(n)},i=function(e,n,r){var a,i,o,s,u;for(a={score:0},s=0,u=n.length;u>s;s++)i=n[s],o=t(e,r(i)),o>a.score&&(a={object:i,score:o});return a.score>0?a:null},t=function(e,n){var t,r,a,i;if(e=e.replace(/^\/+/,"").toLowerCase(),n=n.replace(/^\/+/,"").toLowerCase(),e===n)return 1e4;for(t=e.split("/").reverse(),r=n.split("/").reverse(),i=Math.min(t.length,r.length),a=0;i>a&&t[a]===r[a];)++a;return a},a=function(e,n){return t(e,n)>0},e=[{selector:"background",styleNames:["backgroundImage"]},{selector:"border",styleNames:["borderImage","webkitBorderImage","MozBorderImage"]}],exports.Reloader=n=function(){function n(e,n,t){this.window=e,this.console=n,this.Timer=t,this.document=this.window.document,this.importCacheWaitPeriod=200,this.plugins=[]}return n.prototype.addPlugin=function(e){return this.plugins.push(e)},n.prototype.analyze=function(e){return results},n.prototype.reload=function(e,n){var t,r,a,i,o;for(this.options=n,null==(r=this.options).stylesheetReloadTimeout&&(r.stylesheetReloadTimeout=15e3),o=this.plugins,a=0,i=o.length;i>a;a++)if(t=o[a],t.reload&&t.reload(e,n))return;return n.liveCSS&&e.match(/\.css$/i)&&this.reloadStylesheet(e)?void 0:n.liveImg&&e.match(/\.(jpe?g|png|gif)$/i)?void this.reloadImages(e):this.reloadPage()},n.prototype.reloadPage=function(){return this.window.document.location.reload()},n.prototype.reloadImages=function(n){var t,i,o,s,u,l,c,f,d,h,p,m,g,b,v,_,y,k;for(t=this.generateUniqueString(),b=this.document.images,l=0,h=b.length;h>l;l++)i=b[l],a(n,r(i.src))&&(i.src=this.generateCacheBustUrl(i.src,t));if(this.document.querySelectorAll)for(c=0,p=e.length;p>c;c++)for(v=e[c],o=v.selector,s=v.styleNames,_=this.document.querySelectorAll("[style*="+o+"]"),f=0,m=_.length;m>f;f++)i=_[f],this.reloadStyleImages(i.style,s,n,t);if(this.document.styleSheets){for(y=this.document.styleSheets,k=[],d=0,g=y.length;g>d;d++)u=y[d],k.push(this.reloadStylesheetImages(u,n,t));return k}},n.prototype.reloadStylesheetImages=function(n,t,r){var a,i,o,s,u,l,c,f;try{o=null!=n?n.cssRules:void 0}catch(d){a=d}if(o)for(u=0,c=o.length;c>u;u++)switch(i=o[u],i.type){case CSSRule.IMPORT_RULE:this.reloadStylesheetImages(i.styleSheet,t,r);break;case CSSRule.STYLE_RULE:for(l=0,f=e.length;f>l;l++)s=e[l].styleNames,this.reloadStyleImages(i.style,s,t,r);break;case CSSRule.MEDIA_RULE:this.reloadStylesheetImages(i,t,r)}},n.prototype.reloadStyleImages=function(e,n,t,i){var o,s,u,l,c;for(l=0,c=n.length;c>l;l++)s=n[l],u=e[s],"string"==typeof u&&(o=u.replace(/\burl\s*\(([^)]*)\)/,function(e){return function(n,o){return a(t,r(o))?"url("+e.generateCacheBustUrl(o,i)+")":n}}(this)),o!==u&&(e[s]=o))},n.prototype.reloadStylesheet=function(e){var n,t,a,o,s,u,l,c,f,d,h,p,m,g,b;for(a=function(){var e,n,r,a;for(r=this.document.getElementsByTagName("link"),a=[],e=0,n=r.length;n>e;e++)t=r[e],t.rel.match(/^stylesheet$/i)&&!t.__LiveReload_pendingRemoval&&a.push(t);return a}.call(this),n=[],g=this.document.getElementsByTagName("style"),u=0,d=g.length;d>u;u++)s=g[u],s.sheet&&this.collectImportedStylesheets(s,s.sheet,n);for(l=0,h=a.length;h>l;l++)t=a[l],this.collectImportedStylesheets(t,t.sheet,n);if(this.window.StyleFix&&this.document.querySelectorAll)for(b=this.document.querySelectorAll("style[data-href]"),c=0,p=b.length;p>c;c++)s=b[c],a.push(s);if(this.console.log("LiveReload found "+a.length+" LINKed stylesheets, "+n.length+" @imported stylesheets"),o=i(e,a.concat(n),function(e){return function(n){return r(e.linkHref(n))}}(this)))o.object.rule?(this.console.log("LiveReload is reloading imported stylesheet: "+o.object.href),this.reattachImportedRule(o.object)):(this.console.log("LiveReload is reloading stylesheet: "+this.linkHref(o.object)),this.reattachStylesheetLink(o.object));else for(this.console.log("LiveReload will reload all stylesheets because path '"+e+"' did not match any specific one"),f=0,m=a.length;m>f;f++)t=a[f],this.reattachStylesheetLink(t);return!0},n.prototype.collectImportedStylesheets=function(e,n,t){var r,a,i,o,s,u;try{o=null!=n?n.cssRules:void 0}catch(l){r=l}if(o&&o.length)for(a=s=0,u=o.length;u>s;a=++s)switch(i=o[a],i.type){case CSSRule.CHARSET_RULE:continue;case CSSRule.IMPORT_RULE:t.push({link:e,rule:i,index:a,href:i.href}),this.collectImportedStylesheets(e,i.styleSheet,t)}},n.prototype.waitUntilCssLoads=function(e,n){var t,r,a;return t=!1,r=function(e){return function(){return t?void 0:(t=!0,n())}}(this),e.onload=function(e){return function(){return e.console.log("LiveReload: the new stylesheet has finished loading"),e.knownToSupportCssOnLoad=!0,r()}}(this),this.knownToSupportCssOnLoad||(a=function(n){return function(){return e.sheet?(n.console.log("LiveReload is polling until the new CSS finishes loading..."),r()):n.Timer.start(50,a)}}(this))(),this.Timer.start(this.options.stylesheetReloadTimeout,r)},n.prototype.linkHref=function(e){return e.href||e.getAttribute("data-href")},n.prototype.reattachStylesheetLink=function(e){var n,t;if(!e.__LiveReload_pendingRemoval)return e.__LiveReload_pendingRemoval=!0,"STYLE"===e.tagName?(n=this.document.createElement("link"),n.rel="stylesheet",n.media=e.media,n.disabled=e.disabled):n=e.cloneNode(!1),n.href=this.generateCacheBustUrl(this.linkHref(e)),t=e.parentNode,t.lastChild===e?t.appendChild(n):t.insertBefore(n,e.nextSibling),this.waitUntilCssLoads(n,function(t){return function(){var r;return r=/AppleWebKit/.test(navigator.userAgent)?5:200,t.Timer.start(r,function(){var r;if(e.parentNode)return e.parentNode.removeChild(e),n.onreadystatechange=null,null!=(r=t.window.StyleFix)?r.link(n):void 0})}}(this))},n.prototype.reattachImportedRule=function(e){var n,t,r,a,i,o,s,u;return s=e.rule,t=e.index,r=e.link,o=s.parentStyleSheet,n=this.generateCacheBustUrl(s.href),a=s.media.length?[].join.call(s.media,", "):"",i='@import url("'+n+'") '+a+";",s.__LiveReload_newHref=n,u=this.document.createElement("link"),u.rel="stylesheet",u.href=n,u.__LiveReload_pendingRemoval=!0,r.parentNode&&r.parentNode.insertBefore(u,r),this.Timer.start(this.importCacheWaitPeriod,function(e){return function(){return u.parentNode&&u.parentNode.removeChild(u),s.__LiveReload_newHref===n?(o.insertRule(i,t),o.deleteRule(t+1),s=o.cssRules[t],s.__LiveReload_newHref=n,e.Timer.start(e.importCacheWaitPeriod,function(){return s.__LiveReload_newHref===n?(o.insertRule(i,t),o.deleteRule(t+1)):void 0})):void 0}}(this))},n.prototype.generateUniqueString=function(){return"livereload="+Date.now()},n.prototype.generateCacheBustUrl=function(e,n){var t,r,a,i,s;return null==n&&(n=this.generateUniqueString()),s=o(e),e=s.url,t=s.hash,r=s.params,this.options.overrideURL&&e.indexOf(this.options.serverURL)<0&&(a=e,e=this.options.serverURL+this.options.overrideURL+"?url="+encodeURIComponent(e),this.console.log("LiveReload is overriding source URL "+a+" with "+e)),i=r.replace(/(\?|&)livereload=(\d+)/,function(e,t){return""+t+n}),i===r&&(i=0===r.length?"?"+n:""+r+"&"+n),e+i+t},n}()}).call(this);