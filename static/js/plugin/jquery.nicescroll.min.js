!function(n){function u(){var n=document.getElementsByTagName("script"),e=n[n.length-1].src.split("?")[0];return e.split("/").length>0?e.split("/").slice(0,-1).join("/")+"/":""}function D(n,e,a){for(var r=0;r<e.length;r++)a(n,e[r])}var e=!1,r=!1,i=5e3,s=2e3,l=0,o=n,h=u(),d=["ms","moz","webkit","o"],c=window.requestAnimationFrame||!1,g=window.cancelAnimationFrame||!1;if(!c)for(var f in d){var m=d[f];c||(c=window[m+"RequestAnimationFrame"]),g||(g=window[m+"CancelAnimationFrame"]||window[m+"CancelRequestAnimationFrame"])}var p=window.MutationObserver||window.WebKitMutationObserver||!1,b={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"5px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:24,touchbehavior:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0,enablemouselockapi:!0,cursorfixedheight:!1,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:!0,enablescrollonselection:!0,overflowx:!0,overflowy:!0,cursordragspeed:.3,rtlmode:!1,cursordragontouch:!1,oneaxismousemode:"auto"},H=!1,k=function(){function s(){var a=["-moz-grab","-webkit-grab","grab"];(e.ischrome&&!e.ischrome22||e.isie)&&(a=[]);for(var r=0;r<a.length;r++){var t=a[r];if(n.style.cursor=t,n.style.cursor==t)return t}return"url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur),n-resize"}if(H)return H;var n=document.createElement("DIV"),e={};e.haspointerlock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,e.isopera="opera"in window,e.isopera12=e.isopera&&"getUserMedia"in navigator,e.isoperamini="[object OperaMini]"===Object.prototype.toString.call(window.operamini),e.isie="all"in document&&"attachEvent"in n&&!e.isopera,e.isieold=e.isie&&!("msInterpolationMode"in n.style),e.isie7=e.isie&&!e.isieold&&(!("documentMode"in document)||7==document.documentMode),e.isie8=e.isie&&"documentMode"in document&&8==document.documentMode,e.isie9=e.isie&&"performance"in window&&document.documentMode>=9,e.isie10=e.isie&&"performance"in window&&document.documentMode>=10,e.isie9mobile=/iemobile.9/i.test(navigator.userAgent),e.isie9mobile&&(e.isie9=!1),e.isie7mobile=!e.isie9mobile&&e.isie7&&/iemobile/i.test(navigator.userAgent),e.ismozilla="MozAppearance"in n.style,e.iswebkit="WebkitAppearance"in n.style,e.ischrome="chrome"in window,e.ischrome22=e.ischrome&&e.haspointerlock,e.ischrome26=e.ischrome&&"transition"in n.style,e.cantouch="ontouchstart"in document.documentElement||"ontouchstart"in window,e.hasmstouch=window.navigator.msPointerEnabled||!1,e.ismac=/^mac$/i.test(navigator.platform),e.isios=e.cantouch&&/iphone|ipad|ipod/i.test(navigator.platform),e.isios4=e.isios&&!("seal"in Object),e.isandroid=/android/i.test(navigator.userAgent),e.trstyle=!1,e.hastransform=!1,e.hastranslate3d=!1,e.transitionstyle=!1,e.hastransition=!1,e.transitionend=!1;for(var a=["transform","msTransform","webkitTransform","MozTransform","OTransform"],r=0;r<a.length;r++)if("undefined"!=typeof n.style[a[r]]){e.trstyle=a[r];break}e.hastransform=0!=e.trstyle,e.hastransform&&(n.style[e.trstyle]="translate3d(1px,2px,3px)",e.hastranslate3d=/translate3d/.test(n.style[e.trstyle])),e.transitionstyle=!1,e.prefixstyle="",e.transitionend=!1;for(var a=["transition","webkitTransition","MozTransition","OTransition","OTransition","msTransition","KhtmlTransition"],t=["","-webkit-","-moz-","-o-","-o","-ms-","-khtml-"],i=["transitionend","webkitTransitionEnd","transitionend","otransitionend","oTransitionEnd","msTransitionEnd","KhtmlTransitionEnd"],r=0;r<a.length;r++)if(a[r]in n.style){e.transitionstyle=a[r],e.prefixstyle=t[r],e.transitionend=i[r];break}return e.ischrome26&&(e.prefixstyle=t[1]),e.hastransition=e.transitionstyle,e.cursorgrabvalue=s(),e.hasmousecapture="setCapture"in n,e.hasMutationObserver=p!==!1,n=null,H=e,e},S=function(n,a){function f(){var n=t.doc.css(d.trstyle);return n&&"matrix"==n.substr(0,6)?n.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/):!1}function m(){var n=t.win;if("zIndex"in n)return n.zIndex();for(;n.length>0;){if(9==n[0].nodeType)return!1;var e=n.css("zIndex");if(!isNaN(e)&&0!=e)return parseInt(e);n=n.parent()}return!1}function S(n,e,a){var r=n.css(e),i=parseFloat(r);if(isNaN(i)){i=H[r]||0;var s=3==i?a?t.win.outerHeight()-t.win.innerHeight():t.win.outerWidth()-t.win.innerWidth():1;return t.isie8&&i&&(i+=1),s?i:0}return i}function w(n,e,a,r){t._bind(n,e,function(r){var r=r?r:window.event,t={original:r,target:r.target||r.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==r.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){return r.preventDefault?r.preventDefault():r.returnValue=!1,!1},stopImmediatePropagation:function(){r.stopImmediatePropagation?r.stopImmediatePropagation():r.cancelBubble=!0}};return"mousewheel"==e?(t.deltaY=-1/40*r.wheelDelta,r.wheelDeltaX&&(t.deltaX=-1/40*r.wheelDeltaX)):t.deltaY=r.detail,a.call(n,t)},r)}function z(n,e,a){var r,i;if(0==n.deltaMode?(r=-Math.floor(n.deltaX*(t.opt.mousescrollstep/54)),i=-Math.floor(n.deltaY*(t.opt.mousescrollstep/54))):1==n.deltaMode&&(r=-Math.floor(n.deltaX*t.opt.mousescrollstep),i=-Math.floor(n.deltaY*t.opt.mousescrollstep)),e&&t.opt.oneaxismousemode&&0==r&&i&&(r=i,i=0),r&&(t.scrollmom&&t.scrollmom.stop(),t.lastdeltax+=r,t.debounced("mousewheelx",function(){var n=t.lastdeltax;t.lastdeltax=0,t.rail.drag||t.doScrollLeftBy(n)},120)),i){if(t.opt.nativeparentscrolling&&a&&!t.ispage&&!t.zoomactive)if(0>i){if(t.getScrollTop()>=t.page.maxh)return!0}else if(t.getScrollTop()<=0)return!0;t.scrollmom&&t.scrollmom.stop(),t.lastdeltay+=i,t.debounced("mousewheely",function(){var n=t.lastdeltay;t.lastdeltay=0,t.rail.drag||t.doScrollBy(n)},120)}return n.stopImmediatePropagation(),n.preventDefault()}var t=this;if(this.version="3.5.0 BETA5",this.name="nicescroll",this.me=a,this.opt={doc:o("body"),win:!1},o.extend(this.opt,b),this.opt.snapbackspeed=80,n)for(var u in t.opt)"undefined"!=typeof n[u]&&(t.opt[u]=n[u]);this.doc=t.opt.doc,this.iddoc=this.doc&&this.doc[0]?this.doc[0].id||"":"",this.ispage=/BODY|HTML/.test(t.opt.win?t.opt.win[0].nodeName:this.doc[0].nodeName),this.haswrapper=t.opt.win!==!1,this.win=t.opt.win||(this.ispage?o(window):this.doc),this.docscroll=this.ispage&&!this.haswrapper?o(window):this.win,this.body=o("body"),this.viewport=!1,this.isfixed=!1,this.iframe=!1,this.isiframe="IFRAME"==this.doc[0].nodeName&&"IFRAME"==this.win[0].nodeName,this.istextarea="TEXTAREA"==this.win[0].nodeName,this.forcescreen=!1,this.canshowonmouseevent="scroll"!=t.opt.autohidemode,this.onmousedown=!1,this.onmouseup=!1,this.onmousemove=!1,this.onmousewheel=!1,this.onkeypress=!1,this.ongesturezoom=!1,this.onclick=!1,this.onscrollstart=!1,this.onscrollend=!1,this.onscrollcancel=!1,this.onzoomin=!1,this.onzoomout=!1,this.view=!1,this.page=!1,this.scroll={x:0,y:0},this.scrollratio={x:0,y:0},this.cursorheight=20,this.scrollvaluemax=0,this.checkrtlmode=!1,this.scrollrunning=!1,this.scrollmom=!1,this.observer=!1,this.observerremover=!1;do this.id="ascrail"+s++;while(document.getElementById(this.id));this.rail=!1,this.cursor=!1,this.cursorfreezed=!1,this.selectiondrag=!1,this.zoom=!1,this.zoomactive=!1,this.hasfocus=!1,this.hasmousefocus=!1,this.visibility=!0,this.locked=!1,this.hidden=!1,this.cursoractive=!0,this.overflowx=t.opt.overflowx,this.overflowy=t.opt.overflowy,this.nativescrollingarea=!1,this.checkarea=0,this.events=[],this.saved={},this.delaylist={},this.synclist={},this.lastdeltax=0,this.lastdeltay=0,this.detected=k();var d=o.extend({},this.detected);this.canhwscroll=d.hastransform&&t.opt.hwacceleration,this.ishwscroll=this.canhwscroll&&t.haswrapper,this.istouchcapable=!1,d.cantouch&&d.ischrome&&!d.isios&&!d.isandroid&&(this.istouchcapable=!0,d.cantouch=!1),d.cantouch&&d.ismozilla&&!d.isios&&!d.isandroid&&(this.istouchcapable=!0,d.cantouch=!1),t.opt.enablemouselockapi||(d.hasmousecapture=!1,d.haspointerlock=!1),this.delayed=function(n,e,a,r){var i=t.delaylist[n],s=(new Date).getTime();return!r&&i&&i.tt?!1:(i&&i.tt&&clearTimeout(i.tt),void(i&&i.last+a>s&&!i.tt?t.delaylist[n]={last:s+a,tt:setTimeout(function(){t.delaylist[n].tt=0,e.call()},a)}:i&&i.tt||(t.delaylist[n]={last:s,tt:0},setTimeout(function(){e.call()},0))))},this.debounced=function(n,e,a){var r=t.delaylist[n];(new Date).getTime();t.delaylist[n]=e,r||setTimeout(function(){var e=t.delaylist[n];t.delaylist[n]=!1,e.call()},a)},this.synched=function(n,e){function a(){t.onsync||(c(function(){t.onsync=!1;for(n in t.synclist){var e=t.synclist[n];e&&e.call(t),t.synclist[n]=!1}}),t.onsync=!0)}return t.synclist[n]=e,a(),n},this.unsynched=function(n){t.synclist[n]&&(t.synclist[n]=!1)},this.css=function(n,e){for(var a in e)t.saved.css.push([n,a,n.css(a)]),n.css(a,e[a])},this.scrollTop=function(n){return"undefined"==typeof n?t.getScrollTop():t.setScrollTop(n)},this.scrollLeft=function(n){return"undefined"==typeof n?t.getScrollLeft():t.setScrollLeft(n)},BezierClass=function(n,e,a,r,t,i,s){this.st=n,this.ed=e,this.spd=a,this.p1=r||0,this.p2=t||1,this.p3=i||0,this.p4=s||1,this.ts=(new Date).getTime(),this.df=this.ed-this.st},BezierClass.prototype={B2:function(n){return 3*n*n*(1-n)},B3:function(n){return 3*n*(1-n)*(1-n)},B4:function(n){return(1-n)*(1-n)*(1-n)},getNow:function(){var n=(new Date).getTime(),e=1-(n-this.ts)/this.spd,a=this.B2(e)+this.B3(e)+this.B4(e);return 0>e?this.ed:this.st+Math.round(this.df*a)},update:function(n,e){return this.st=this.getNow(),this.ed=n,this.spd=e,this.ts=(new Date).getTime(),this.df=this.ed-this.st,this}},this.ishwscroll?(this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"},d.hastranslate3d&&d.isios&&this.doc.css("-webkit-backface-visibility","hidden"),this.getScrollTop=function(n){if(!n){var e=f();if(e)return 16==e.length?-e[13]:-e[5];if(t.timerscroll&&t.timerscroll.bz)return t.timerscroll.bz.getNow()}return t.doc.translate.y},this.getScrollLeft=function(n){if(!n){var e=f();if(e)return 16==e.length?-e[12]:-e[4];if(t.timerscroll&&t.timerscroll.bh)return t.timerscroll.bh.getNow()}return t.doc.translate.x},document.createEvent?this.notifyScrollEvent=function(n){var e=document.createEvent("UIEvents");e.initUIEvent("scroll",!1,!0,window,1),n.dispatchEvent(e)}:document.fireEvent?this.notifyScrollEvent=function(n){var e=document.createEventObject();n.fireEvent("onscroll"),e.cancelBubble=!0}:this.notifyScrollEvent=function(n,e){},d.hastranslate3d&&t.opt.enabletranslate3d?(this.setScrollTop=function(n,e){t.doc.translate.y=n,t.doc.translate.ty=-1*n+"px",t.doc.css(d.trstyle,"translate3d("+t.doc.translate.tx+","+t.doc.translate.ty+",0px)"),e||t.notifyScrollEvent(t.win[0])},this.setScrollLeft=function(n,e){t.doc.translate.x=n,t.doc.translate.tx=-1*n+"px",t.doc.css(d.trstyle,"translate3d("+t.doc.translate.tx+","+t.doc.translate.ty+",0px)"),e||t.notifyScrollEvent(t.win[0])}):(this.setScrollTop=function(n,e){t.doc.translate.y=n,t.doc.translate.ty=-1*n+"px",t.doc.css(d.trstyle,"translate("+t.doc.translate.tx+","+t.doc.translate.ty+")"),e||t.notifyScrollEvent(t.win[0])},this.setScrollLeft=function(n,e){t.doc.translate.x=n,t.doc.translate.tx=-1*n+"px",t.doc.css(d.trstyle,"translate("+t.doc.translate.tx+","+t.doc.translate.ty+")"),e||t.notifyScrollEvent(t.win[0])})):(this.getScrollTop=function(){return t.docscroll.scrollTop()},this.setScrollTop=function(n){return t.docscroll.scrollTop(n)},this.getScrollLeft=function(){return t.docscroll.scrollLeft()},this.setScrollLeft=function(n){return t.docscroll.scrollLeft(n)}),this.getTarget=function(n){return n?n.target?n.target:n.srcElement?n.srcElement:!1:!1},this.hasParent=function(n,e){if(!n)return!1;for(var a=n.target||n.srcElement||n||!1;a&&a.id!=e;)a=a.parentNode||!1;return a!==!1};var H={thin:1,medium:3,thick:5};this.getOffset=function(){if(t.isfixed)return{top:parseFloat(t.win.css("top")),left:parseFloat(t.win.css("left"))};if(!t.viewport)return t.win.offset();var n=t.win.offset(),e=t.viewport.offset();return{top:n.top-e.top+t.viewport.scrollTop(),left:n.left-e.left+t.viewport.scrollLeft()}},this.updateScrollBar=function(n){if(t.ishwscroll)t.rail.css({height:t.win.innerHeight()}),t.railh&&t.railh.css({width:t.win.innerWidth()});else{var e=t.getOffset(),a={top:e.top,left:e.left};a.top+=S(t.win,"border-top-width",!0);(t.win.outerWidth()-t.win.innerWidth())/2;a.left+=t.rail.align?t.win.outerWidth()-S(t.win,"border-right-width")-t.rail.width:S(t.win,"border-left-width");var i=t.opt.railoffset;if(i&&(i.top&&(a.top+=i.top),t.rail.align&&i.left&&(a.left+=i.left)),t.locked||t.rail.css({top:a.top,left:a.left,height:n?n.h:t.win.innerHeight()}),t.zoom&&t.zoom.css({top:a.top+1,left:1==t.rail.align?a.left-20:a.left+t.rail.width+4}),t.railh&&!t.locked){var a={top:e.top,left:e.left},s=t.railh.align?a.top+S(t.win,"border-top-width",!0)+t.win.innerHeight()-t.railh.height:a.top+S(t.win,"border-top-width",!0),l=a.left+S(t.win,"border-left-width");t.railh.css({top:s,left:l,width:t.railh.width})}}},this.doRailClick=function(n,e,a){var r,i,s,l;t.locked||(t.cancelEvent(n),e?(r=a?t.doScrollLeft:t.doScrollTop,s=a?(n.pageX-t.railh.offset().left-t.cursorwidth/2)*t.scrollratio.x:(n.pageY-t.rail.offset().top-t.cursorheight/2)*t.scrollratio.y,r(s)):(r=a?t.doScrollLeftBy:t.doScrollBy,s=a?t.scroll.x:t.scroll.y,l=a?n.pageX-t.railh.offset().left:n.pageY-t.rail.offset().top,i=a?t.view.w:t.view.h,r(s>=l?i:-i)))},t.hasanimationframe=c,t.hascancelanimationframe=g,t.hasanimationframe?t.hascancelanimationframe||(g=function(){t.cancelAnimationFrame=!0}):(c=function(n){return setTimeout(n,15-Math.floor(+new Date/1e3)%16)},g=clearInterval),this.init=function(){function D(n){if(t.selectiondrag){if(n){var e=t.win.outerHeight(),a=n.pageY-t.selectiondrag.top;a>0&&e>a&&(a=0),a>=e&&(a-=e),t.selectiondrag.df=a}if(0!=t.selectiondrag.df){var r=2*-Math.floor(t.selectiondrag.df/6);t.doScrollBy(r),t.debounced("doselectionscroll",function(){D()},50)}}}function B(n){t.iframexd=!1;try{var e="contentDocument"in this?this.contentDocument:this.contentWindow.document;e.domain}catch(n){t.iframexd=!0,e=!1}if(t.iframexd)return"console"in window&&console.log("NiceScroll error: policy restriced iframe"),!0;if(t.forcescreen=!0,t.isiframe&&(t.iframe={doc:o(e),html:t.doc.contents().find("html")[0],body:t.doc.contents().find("body")[0]},t.getContentSize=function(){return{w:Math.max(t.iframe.html.scrollWidth,t.iframe.body.scrollWidth),h:Math.max(t.iframe.html.scrollHeight,t.iframe.body.scrollHeight)}},t.docscroll=o(t.iframe.body)),!d.isios&&t.opt.iframeautoresize&&!t.isiframe){t.win.scrollTop(0),t.doc.height("");var r=Math.max(e.getElementsByTagName("html")[0].scrollHeight,e.body.scrollHeight);t.doc.height(r)}t.lazyResize(30),d.isie7&&t.css(o(t.iframe.html),{"overflow-y":"hidden"}),t.css(o(t.iframe.body),{"overflow-y":"hidden"}),d.isios&&t.haswrapper&&(t.css(o(e.body),{"-webkit-transform":"translate3d(0,0,0)"}),console.log(1)),"contentWindow"in this?t.bind(this.contentWindow,"scroll",t.onscroll):t.bind(e,"scroll",t.onscroll),t.opt.enablemousewheel&&t.bind(e,"mousewheel",t.onmousewheel),t.opt.enablekeyboard&&t.bind(e,d.isopera?"keypress":"keydown",t.onkeypress),(d.cantouch||t.opt.touchbehavior)&&(t.bind(e,"mousedown",t.ontouchstart),t.bind(e,"mousemove",function(n){t.ontouchmove(n,!0)}),t.opt.grabcursorenabled&&d.cursorgrabvalue&&t.css(o(e.body),{cursor:d.cursorgrabvalue})),t.bind(e,"mouseup",t.ontouchend),t.zoom&&(t.opt.dblclickzoom&&t.bind(e,"dblclick",t.doZoom),t.ongesturezoom&&t.bind(e,"gestureend",t.ongesturezoom))}if(t.saved.css=[],d.isie7mobile)return!0;if(d.isoperamini)return!0;if(d.hasmstouch&&t.css(t.ispage?o("html"):t.win,{"-ms-touch-action":"none"}),t.zindex="auto",t.ispage||"auto"!=t.opt.zindex?t.zindex=t.opt.zindex:t.zindex=m()||"auto",t.ispage||"auto"==t.zindex||t.zindex>l&&(l=t.zindex),t.isie&&0==t.zindex&&"auto"==t.opt.zindex&&(t.zindex="auto"),!t.ispage||!d.cantouch&&!d.isieold&&!d.isie9mobile){var n=t.docscroll;t.ispage&&(n=t.haswrapper?t.win:t.doc),d.isie9mobile||t.css(n,{"overflow-y":"hidden"}),t.ispage&&d.isie7&&("BODY"==t.doc[0].nodeName?t.css(o("html"),{"overflow-y":"hidden"}):"HTML"==t.doc[0].nodeName&&t.css(o("body"),{"overflow-y":"hidden"})),!d.isios||t.ispage||t.haswrapper||t.css(o("body"),{"-webkit-overflow-scrolling":"touch"});var a=o(document.createElement("div"));a.css({position:"relative",top:0,"float":"right",width:t.opt.cursorwidth,height:"0px","background-color":t.opt.cursorcolor,border:t.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":t.opt.cursorborderradius,"-moz-border-radius":t.opt.cursorborderradius,"border-radius":t.opt.cursorborderradius}),a.hborder=parseFloat(a.outerHeight()-a.innerHeight()),t.cursor=a;var s=o(document.createElement("div"));s.attr("id",t.id),s.addClass("nicescroll-rails");var u,c,g=["left","right"];for(var f in g)c=g[f],u=t.opt.railpadding[c],u?s.css("padding-"+c,u+"px"):t.opt.railpadding[c]=0;s.append(a),s.width=Math.max(parseFloat(t.opt.cursorwidth),a.outerWidth())+t.opt.railpadding.left+t.opt.railpadding.right,s.css({width:s.width+"px",zIndex:t.zindex,background:t.opt.background,cursor:"default"}),s.visibility=!0,s.scrollable=!0,s.align="left"==t.opt.railalign?0:1,t.rail=s,t.rail.drag=!1;var b=!1;if(!t.opt.boxzoom||t.ispage||d.isieold||(b=document.createElement("div"),t.bind(b,"click",t.doZoom),t.zoom=o(b),t.zoom.css({cursor:"pointer","z-index":t.zindex,backgroundImage:"url("+h+"zoomico.png)",height:18,width:18,backgroundPosition:"0px 0px"}),t.opt.dblclickzoom&&t.bind(t.win,"dblclick",t.doZoom),d.cantouch&&t.opt.gesturezoom&&(t.ongesturezoom=function(n){return n.scale>1.5&&t.doZoomIn(n),n.scale<.8&&t.doZoomOut(n),t.cancelEvent(n)},t.bind(t.win,"gestureend",t.ongesturezoom))),t.railh=!1,t.opt.horizrailenabled){t.css(n,{"overflow-x":"hidden"});var a=o(document.createElement("div"));a.css({position:"relative",top:0,height:t.opt.cursorwidth,width:"0px","background-color":t.opt.cursorcolor,border:t.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":t.opt.cursorborderradius,"-moz-border-radius":t.opt.cursorborderradius,"border-radius":t.opt.cursorborderradius}),a.wborder=parseFloat(a.outerWidth()-a.innerWidth()),t.cursorh=a;var H=o(document.createElement("div"));H.attr("id",t.id+"-hr"),H.addClass("nicescroll-rails"),H.height=Math.max(parseFloat(t.opt.cursorwidth),a.outerHeight()),H.css({height:H.height+"px",zIndex:t.zindex,background:t.opt.background}),H.append(a),H.visibility=!0,H.scrollable=!0,H.align="top"==t.opt.railvalign?0:1,t.railh=H,t.railh.drag=!1}if(t.ispage)s.css({position:"fixed",top:"0px",height:"100%"}),s.align?s.css({right:"0px"}):s.css({left:"0px"}),t.body.append(s),t.railh&&(H.css({position:"fixed",left:"0px",width:"100%"}),H.align?H.css({bottom:"0px"}):H.css({top:"0px"}),t.body.append(H));else{if(t.ishwscroll){"static"==t.win.css("position")&&t.css(t.win,{position:"relative"});var k="HTML"==t.win[0].nodeName?t.body:t.win;t.zoom&&(t.zoom.css({position:"absolute",top:1,right:0,"margin-right":s.width+4}),k.append(t.zoom)),s.css({position:"absolute",top:0}),s.align?s.css({right:0}):s.css({left:0}),k.append(s),H&&(H.css({position:"absolute",left:0,bottom:0}),H.align?H.css({bottom:0}):H.css({top:0}),k.append(H))}else{t.isfixed="fixed"==t.win.css("position");var S=t.isfixed?"fixed":"absolute";t.isfixed||(t.viewport=t.getViewport(t.win[0])),t.viewport&&(t.body=t.viewport,0==/relative|absolute/.test(t.viewport.css("position"))&&t.css(t.viewport,{position:"relative"})),s.css({position:S}),t.zoom&&t.zoom.css({position:S}),t.updateScrollBar(),t.body.append(s),t.zoom&&t.body.append(t.zoom),t.railh&&(H.css({position:S}),t.body.append(H))}d.isios&&t.css(t.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),d.isie&&t.opt.disableoutline&&t.win.attr("hideFocus","true"),d.iswebkit&&t.opt.disableoutline&&t.win.css({outline:"none"})}if(t.opt.autohidemode===!1?(t.autohidedom=!1,t.rail.css({opacity:t.opt.cursoropacitymax}),t.railh&&t.railh.css({opacity:t.opt.cursoropacitymax})):t.opt.autohidemode===!0?(t.autohidedom=o().add(t.rail),d.isie8&&(t.autohidedom=t.autohidedom.add(t.cursor)),t.railh&&(t.autohidedom=t.autohidedom.add(t.railh)),t.railh&&d.isie8&&(t.autohidedom=t.autohidedom.add(t.cursorh))):"scroll"==t.opt.autohidemode?(t.autohidedom=o().add(t.rail),t.railh&&(t.autohidedom=t.autohidedom.add(t.railh))):"cursor"==t.opt.autohidemode?(t.autohidedom=o().add(t.cursor),t.railh&&(t.autohidedom=t.autohidedom.add(t.cursorh))):"hidden"==t.opt.autohidemode&&(t.autohidedom=!1,t.hide(),t.locked=!1),d.isie9mobile){t.scrollmom=new v(t),t.onmangotouch=function(n){var e=t.getScrollTop(),a=t.getScrollLeft();if(e==t.scrollmom.lastscrolly&&a==t.scrollmom.lastscrollx)return!0;var r=e-t.mangotouch.sy,i=a-t.mangotouch.sx,s=Math.round(Math.sqrt(Math.pow(i,2)+Math.pow(r,2)));if(0!=s){var l=0>r?-1:1,o=0>i?-1:1,u=+new Date;if(t.mangotouch.lazy&&clearTimeout(t.mangotouch.lazy),u-t.mangotouch.tm>80||t.mangotouch.dry!=l||t.mangotouch.drx!=o)t.scrollmom.stop(),t.scrollmom.reset(a,e),t.mangotouch.sy=e,t.mangotouch.ly=e,t.mangotouch.sx=a,t.mangotouch.lx=a,t.mangotouch.dry=l,t.mangotouch.drx=o,t.mangotouch.tm=u;else{t.scrollmom.stop(),t.scrollmom.update(t.mangotouch.sx-i,t.mangotouch.sy-r);u-t.mangotouch.tm;t.mangotouch.tm=u;var d=Math.max(Math.abs(t.mangotouch.ly-e),Math.abs(t.mangotouch.lx-a));t.mangotouch.ly=e,t.mangotouch.lx=a,d>2&&(t.mangotouch.lazy=setTimeout(function(){t.mangotouch.lazy=!1,t.mangotouch.dry=0,t.mangotouch.drx=0,t.mangotouch.tm=0,t.scrollmom.doMomentum(30)},100))}}};var w=t.getScrollTop(),z=t.getScrollLeft();t.mangotouch={sy:w,ly:w,dry:0,sx:z,lx:z,drx:0,lazy:!1,tm:0},t.bind(t.docscroll,"scroll",t.onmangotouch)}else{if(d.cantouch||t.istouchcapable||t.opt.touchbehavior||d.hasmstouch){t.scrollmom=new v(t),t.ontouchstart=function(n){if(n.pointerType&&2!=n.pointerType)return!1;if(!t.locked){if(d.hasmstouch)for(var e=n.target?n.target:!1;e;){var a=o(e).getNiceScroll();if(a.length>0&&a[0].me==t.me)break;if(a.length>0)return!1;if("DIV"==e.nodeName&&e.id==t.id)break;e=e.parentNode?e.parentNode:!1}t.cancelScroll();var e=t.getTarget(n);if(e){var r=/INPUT/i.test(e.nodeName)&&/range/i.test(e.type);if(r)return t.stopPropagation(n)}if(!("clientX"in n)&&"changedTouches"in n&&(n.clientX=n.changedTouches[0].clientX,n.clientY=n.changedTouches[0].clientY),t.forcescreen){var i=n,n={original:n.original?n.original:n};n.clientX=i.screenX,n.clientY=i.screenY}if(t.rail.drag={x:n.clientX,y:n.clientY,sx:t.scroll.x,sy:t.scroll.y,st:t.getScrollTop(),sl:t.getScrollLeft(),pt:2,dl:!1},t.ispage||!t.opt.directionlockdeadzone)t.rail.drag.dl="f";else{var s={w:o(window).width(),h:o(window).height()},l={w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},u=Math.max(0,l.h-s.h),h=Math.max(0,l.w-s.w);!t.rail.scrollable&&t.railh.scrollable?t.rail.drag.ck=u>0?"v":!1:t.rail.scrollable&&!t.railh.scrollable?t.rail.drag.ck=h>0?"h":!1:t.rail.drag.ck=!1,t.rail.drag.ck||(t.rail.drag.dl="f")}if(t.opt.touchbehavior&&t.isiframe&&d.isie){var c=t.win.position();t.rail.drag.x+=c.left,t.rail.drag.y+=c.top}if(t.hasmoving=!1,t.lastmouseup=!1,t.scrollmom.reset(n.clientX,n.clientY),!d.cantouch&&!this.istouchcapable&&!d.hasmstouch){var g=e?/INPUT|SELECT|TEXTAREA/i.test(e.nodeName):!1;if(!g)return!t.ispage&&d.hasmousecapture&&e.setCapture(),t.opt.touchbehavior?t.cancelEvent(n):t.stopPropagation(n);/SUBMIT|CANCEL|BUTTON/i.test(o(e).attr("type"))&&(pc={tg:e,click:!1},t.preventclick=pc)}}},t.ontouchend=function(n){return n.pointerType&&2!=n.pointerType?!1:t.rail.drag&&2==t.rail.drag.pt&&(t.scrollmom.doMomentum(),t.rail.drag=!1,t.hasmoving&&(t.hasmoving=!1,t.lastmouseup=!0,t.hideCursor(),d.hasmousecapture&&document.releaseCapture(),!d.cantouch))?t.cancelEvent(n):void 0};var M=t.opt.touchbehavior&&t.isiframe&&!d.hasmousecapture;t.ontouchmove=function(n,e){if(n.pointerType&&2!=n.pointerType)return!1;if(t.rail.drag&&2==t.rail.drag.pt){if(d.cantouch&&"undefined"==typeof n.original)return!0;t.hasmoving=!0,t.preventclick&&!t.preventclick.click&&(t.preventclick.click=t.preventclick.tg.onclick||!1,t.preventclick.tg.onclick=t.onpreventclick);var a=o.extend({original:n},n);if(n=a,"changedTouches"in n&&(n.clientX=n.changedTouches[0].clientX,n.clientY=n.changedTouches[0].clientY),t.forcescreen){var r=n,n={original:n.original?n.original:n};n.clientX=r.screenX,n.clientY=r.screenY}var i=ofy=0;if(M&&!e){var s=t.win.position();i=-s.left,ofy=-s.top}var l=n.clientY+ofy,u=l-t.rail.drag.y,h=n.clientX+i,c=h-t.rail.drag.x,g=t.rail.drag.st-u;if(t.ishwscroll&&t.opt.bouncescroll?0>g?g=Math.round(g/2):g>t.page.maxh&&(g=t.page.maxh+Math.round((g-t.page.maxh)/2)):(0>g&&(g=0,l=0),g>t.page.maxh&&(g=t.page.maxh,l=0)),t.railh&&t.railh.scrollable){var f=t.rail.drag.sl-c;t.ishwscroll&&t.opt.bouncescroll?0>f?f=Math.round(f/2):f>t.page.maxw&&(f=t.page.maxw+Math.round((f-t.page.maxw)/2)):(0>f&&(f=0,h=0),f>t.page.maxw&&(f=t.page.maxw,h=0))}var m=!1;if(t.rail.drag.dl)m=!0,"v"==t.rail.drag.dl?f=t.rail.drag.sl:"h"==t.rail.drag.dl&&(g=t.rail.drag.st);else{var p=Math.abs(u),b=Math.abs(c),H=t.opt.directionlockdeadzone;if("v"==t.rail.drag.ck){if(p>H&&.3*p>=b)return t.rail.drag=!1,!0;b>H&&(t.rail.drag.dl="f",o("body").scrollTop(o("body").scrollTop()))}else if("h"==t.rail.drag.ck){if(b>H&&.3*b>=p)return t.rail.drag=!1,!0;p>H&&(t.rail.drag.dl="f",o("body").scrollLeft(o("body").scrollLeft()))}}if(t.synched("touchmove",function(){t.rail.drag&&2==t.rail.drag.pt&&(t.prepareTransition&&t.prepareTransition(0),t.rail.scrollable&&t.setScrollTop(g),t.scrollmom.update(h,l),t.railh&&t.railh.scrollable?(t.setScrollLeft(f),t.showCursor(g,f)):t.showCursor(g),d.isie10&&document.selection.clear())}),d.ischrome&&t.istouchcapable&&(m=!1),m)return t.cancelEvent(n)}}}t.onmousedown=function(n,e){if(!t.rail.drag||1==t.rail.drag.pt){if(t.locked)return t.cancelEvent(n);t.cancelScroll(),t.rail.drag={x:n.clientX,y:n.clientY,sx:t.scroll.x,sy:t.scroll.y,pt:1,hr:!!e};var a=t.getTarget(n);return!t.ispage&&d.hasmousecapture&&a.setCapture(),t.isiframe&&!d.hasmousecapture&&(t.saved.csspointerevents=t.doc.css("pointer-events"),t.css(t.doc,{"pointer-events":"none"})),t.cancelEvent(n)}},t.onmouseup=function(n){if(t.rail.drag){if(d.hasmousecapture&&document.releaseCapture(),t.isiframe&&!d.hasmousecapture&&t.doc.css("pointer-events",t.saved.csspointerevents),1!=t.rail.drag.pt)return;return t.rail.drag=!1,t.cancelEvent(n)}},t.onmousemove=function(n){if(t.rail.drag){if(1!=t.rail.drag.pt)return;if(d.ischrome&&0==n.which)return t.onmouseup(n);if(t.cursorfreezed=!0,t.rail.drag.hr){t.scroll.x=t.rail.drag.sx+(n.clientX-t.rail.drag.x),t.scroll.x<0&&(t.scroll.x=0);var e=t.scrollvaluemaxw;t.scroll.x>e&&(t.scroll.x=e)}else{t.scroll.y=t.rail.drag.sy+(n.clientY-t.rail.drag.y),t.scroll.y<0&&(t.scroll.y=0);var a=t.scrollvaluemax;t.scroll.y>a&&(t.scroll.y=a)}return t.synched("mousemove",function(){t.rail.drag&&1==t.rail.drag.pt&&(t.showCursor(),t.rail.drag.hr?t.doScrollLeft(Math.round(t.scroll.x*t.scrollratio.x),t.opt.cursordragspeed):t.doScrollTop(Math.round(t.scroll.y*t.scrollratio.y),t.opt.cursordragspeed))}),t.cancelEvent(n)}},d.cantouch||t.opt.touchbehavior?(t.onpreventclick=function(n){return t.preventclick?(t.preventclick.tg.onclick=t.preventclick.click,t.preventclick=!1,t.cancelEvent(n)):void 0},t.bind(t.win,"mousedown",t.ontouchstart),t.onclick=d.isios?!1:function(n){return t.lastmouseup?(t.lastmouseup=!1,t.cancelEvent(n)):!0},t.opt.grabcursorenabled&&d.cursorgrabvalue&&(t.css(t.ispage?t.doc:t.win,{cursor:d.cursorgrabvalue}),t.css(t.rail,{cursor:d.cursorgrabvalue}))):("getSelection"in document?t.hasTextSelected=function(){return document.getSelection().rangeCount>0}:"selection"in document?t.hasTextSelected=function(){return"None"!=document.selection.type}:t.hasTextSelected=function(){return!1},t.onselectionstart=function(n){t.ispage||(t.selectiondrag=t.win.offset())},t.onselectionend=function(n){t.selectiondrag=!1},t.onselectiondrag=function(n){t.selectiondrag&&t.hasTextSelected()&&t.debounced("selectionscroll",function(){D(n)},250)}),d.hasmstouch&&(t.css(t.rail,{"-ms-touch-action":"none"}),t.css(t.cursor,{"-ms-touch-action":"none"}),t.bind(t.win,"MSPointerDown",t.ontouchstart),t.bind(document,"MSPointerUp",t.ontouchend),t.bind(document,"MSPointerMove",t.ontouchmove),t.bind(t.cursor,"MSGestureHold",function(n){n.preventDefault()}),t.bind(t.cursor,"contextmenu",function(n){n.preventDefault()})),this.istouchcapable&&(t.bind(t.win,"touchstart",t.ontouchstart),t.bind(document,"touchend",t.ontouchend),t.bind(document,"touchcancel",t.ontouchend),t.bind(document,"touchmove",t.ontouchmove)),t.bind(t.cursor,"mousedown",t.onmousedown),t.bind(t.cursor,"mouseup",t.onmouseup),t.railh&&(t.bind(t.cursorh,"mousedown",function(n){t.onmousedown(n,!0)}),t.bind(t.cursorh,"mouseup",function(n){return t.rail.drag&&2==t.rail.drag.pt?void 0:(t.rail.drag=!1,t.hasmoving=!1,t.hideCursor(),d.hasmousecapture&&document.releaseCapture(),t.cancelEvent(n))})),(t.opt.cursordragontouch||!d.cantouch&&!t.opt.touchbehavior)&&(t.rail.css({cursor:"default"}),t.railh&&t.railh.css({cursor:"default"}),t.jqbind(t.rail,"mouseenter",function(){t.canshowonmouseevent&&t.showCursor(),t.rail.active=!0}),t.jqbind(t.rail,"mouseleave",function(){t.rail.active=!1,t.rail.drag||t.hideCursor()}),t.opt.sensitiverail&&(t.bind(t.rail,"click",function(n){t.doRailClick(n,!1,!1)}),t.bind(t.rail,"dblclick",function(n){t.doRailClick(n,!0,!1)}),t.bind(t.cursor,"click",function(n){t.cancelEvent(n)}),t.bind(t.cursor,"dblclick",function(n){t.cancelEvent(n)})),t.railh&&(t.jqbind(t.railh,"mouseenter",function(){t.canshowonmouseevent&&t.showCursor(),t.rail.active=!0}),t.jqbind(t.railh,"mouseleave",function(){t.rail.active=!1,t.rail.drag||t.hideCursor()}),t.opt.sensitiverail&&(t.bind(t.railh,"click",function(n){t.doRailClick(n,!1,!0)}),t.bind(t.railh,"dblclick",function(n){t.doRailClick(n,!0,!0)}),t.bind(t.cursorh,"click",function(n){t.cancelEvent(n)}),t.bind(t.cursorh,"dblclick",function(n){t.cancelEvent(n)})))),d.cantouch||t.opt.touchbehavior?(t.bind(d.hasmousecapture?t.win:document,"mouseup",t.ontouchend),t.bind(document,"mousemove",t.ontouchmove),t.onclick&&t.bind(document,"click",t.onclick),t.opt.cursordragontouch&&(t.bind(t.cursor,"mousedown",t.onmousedown),t.bind(t.cursor,"mousemove",t.onmousemove),t.cursorh&&t.bind(t.cursorh,"mousedown",t.onmousedown),t.cursorh&&t.bind(t.cursorh,"mousemove",t.onmousemove))):(t.bind(d.hasmousecapture?t.win:document,"mouseup",t.onmouseup),t.bind(document,"mousemove",t.onmousemove),t.onclick&&t.bind(document,"click",t.onclick),!t.ispage&&t.opt.enablescrollonselection&&(t.bind(t.win[0],"mousedown",t.onselectionstart),t.bind(document,"mouseup",t.onselectionend),t.bind(t.cursor,"mouseup",t.onselectionend),t.cursorh&&t.bind(t.cursorh,"mouseup",t.onselectionend),t.bind(document,"mousemove",t.onselectiondrag)),t.zoom&&(t.jqbind(t.zoom,"mouseenter",function(){t.canshowonmouseevent&&t.showCursor(),t.rail.active=!0}),t.jqbind(t.zoom,"mouseleave",function(){t.rail.active=!1,t.rail.drag||t.hideCursor()}))),t.opt.enablemousewheel&&(t.isiframe||t.bind(d.isie&&t.ispage?document:t.win,"mousewheel",t.onmousewheel),t.bind(t.rail,"mousewheel",t.onmousewheel),t.railh&&t.bind(t.railh,"mousewheel",t.onmousewheelhr)),t.ispage||d.cantouch||/HTML|BODY/.test(t.win[0].nodeName)||(t.win.attr("tabindex")||t.win.attr({tabindex:i++}),t.jqbind(t.win,"focus",function(n){e=t.getTarget(n).id||!0,t.hasfocus=!0,t.canshowonmouseevent&&t.noticeCursor()}),t.jqbind(t.win,"blur",function(n){e=!1,t.hasfocus=!1}),t.jqbind(t.win,"mouseenter",function(n){r=t.getTarget(n).id||!0,t.hasmousefocus=!0,t.canshowonmouseevent&&t.noticeCursor()}),t.jqbind(t.win,"mouseleave",function(){r=!1,t.hasmousefocus=!1}))}if(t.onkeypress=function(n){if(t.locked&&0==t.page.maxh)return!0;
n=n?n:window.e;var a=t.getTarget(n);if(a&&/INPUT|TEXTAREA|SELECT|OPTION/.test(a.nodeName)){var i=a.getAttribute("type")||a.type||!1;if(!i||!/submit|button|cancel/i.tp)return!0}if(t.hasfocus||t.hasmousefocus&&!e||t.ispage&&!e&&!r){var s=n.keyCode;if(t.locked&&27!=s)return t.cancelEvent(n);var l=n.ctrlKey||!1,o=n.shiftKey||!1,u=!1;switch(s){case 38:case 63233:t.doScrollBy(72),u=!0;break;case 40:case 63235:t.doScrollBy(-72),u=!0;break;case 37:case 63232:t.railh&&(l?t.doScrollLeft(0):t.doScrollLeftBy(72),u=!0);break;case 39:case 63234:t.railh&&(l?t.doScrollLeft(t.page.maxw):t.doScrollLeftBy(-72),u=!0);break;case 33:case 63276:t.doScrollBy(t.view.h),u=!0;break;case 34:case 63277:t.doScrollBy(-t.view.h),u=!0;break;case 36:case 63273:t.railh&&l?t.doScrollPos(0,0):t.doScrollTo(0),u=!0;break;case 35:case 63275:t.railh&&l?t.doScrollPos(t.page.maxw,t.page.maxh):t.doScrollTo(t.page.maxh),u=!0;break;case 32:t.opt.spacebarenabled&&(o?t.doScrollBy(t.view.h):t.doScrollBy(-t.view.h),u=!0);break;case 27:t.zoomactive&&(t.doZoom(),u=!0)}if(u)return t.cancelEvent(n)}},t.opt.enablekeyboard&&t.bind(document,d.isopera&&!d.isopera12?"keypress":"keydown",t.onkeypress),t.bind(window,"resize",t.lazyResize),t.bind(window,"orientationchange",t.lazyResize),t.bind(window,"load",t.lazyResize),d.ischrome&&!t.ispage&&!t.haswrapper){var F=t.win.attr("style"),T=parseFloat(t.win.css("width"))+1;t.win.css("width",T),t.synched("chromefix",function(){t.win.attr("style",F)})}t.onAttributeChange=function(n){t.lazyResize(250)},t.ispage||t.haswrapper||(p!==!1?(t.observer=new p(function(n){n.forEach(t.onAttributeChange)}),t.observer.observe(t.win[0],{childList:!0,characterData:!1,attributes:!0,subtree:!1}),t.observerremover=new p(function(n){n.forEach(function(n){if(n.removedNodes.length>0)for(var e in n.removedNodes)if(n.removedNodes[e]==t.win[0])return t.remove()})}),t.observerremover.observe(t.win[0].parentNode,{childList:!0,characterData:!1,attributes:!1,subtree:!1})):(t.bind(t.win,d.isie&&!d.isie9?"propertychange":"DOMAttrModified",t.onAttributeChange),d.isie9&&t.win[0].attachEvent("onpropertychange",t.onAttributeChange),t.bind(t.win,"DOMNodeRemoved",function(n){n.target==t.win[0]&&t.remove()}))),!t.ispage&&t.opt.boxzoom&&t.bind(window,"resize",t.resizeZoom),t.istextarea&&t.bind(t.win,"mouseup",t.lazyResize),t.checkrtlmode=!0,t.lazyResize(30)}"IFRAME"==this.doc[0].nodeName&&(this.doc[0].readyState&&"complete"==this.doc[0].readyState&&setTimeout(function(){B.call(t.doc[0],!1)},500),t.bind(this.doc,"load",B))},this.showCursor=function(n,e){t.cursortimeout&&(clearTimeout(t.cursortimeout),t.cursortimeout=0),t.rail&&(t.autohidedom&&(t.autohidedom.stop().css({opacity:t.opt.cursoropacitymax}),t.cursoractive=!0),t.rail.drag&&1==t.rail.drag.pt||("undefined"!=typeof n&&n!==!1&&(t.scroll.y=Math.round(1*n/t.scrollratio.y)),"undefined"!=typeof e&&(t.scroll.x=Math.round(1*e/t.scrollratio.x))),t.cursor.css({height:t.cursorheight,top:t.scroll.y}),t.cursorh&&(!t.rail.align&&t.rail.visibility?t.cursorh.css({width:t.cursorwidth,left:t.scroll.x+t.rail.width}):t.cursorh.css({width:t.cursorwidth,left:t.scroll.x}),t.cursoractive=!0),t.zoom&&t.zoom.stop().css({opacity:t.opt.cursoropacitymax}))},this.hideCursor=function(n){t.cursortimeout||t.rail&&t.autohidedom&&(t.cursortimeout=setTimeout(function(){t.rail.active&&t.showonmouseevent||(t.autohidedom.stop().animate({opacity:t.opt.cursoropacitymin}),t.zoom&&t.zoom.stop().animate({opacity:t.opt.cursoropacitymin}),t.cursoractive=!1),t.cursortimeout=0},n||t.opt.hidecursordelay))},this.noticeCursor=function(n,e,a){t.showCursor(e,a),t.rail.active||t.hideCursor(n)},this.getContentSize=t.ispage?function(){return{w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}:t.haswrapper?function(){return{w:t.doc.outerWidth()+parseInt(t.win.css("paddingLeft"))+parseInt(t.win.css("paddingRight")),h:t.doc.outerHeight()+parseInt(t.win.css("paddingTop"))+parseInt(t.win.css("paddingBottom"))}}:function(){return{w:t.docscroll[0].scrollWidth,h:t.docscroll[0].scrollHeight}},this.onResize=function(n,e){if(!t.win)return!1;if(!t.haswrapper&&!t.ispage){if("none"==t.win.css("display"))return t.visibility&&t.hideRail().hideRailHr(),!1;t.hidden||t.visibility||t.showRail().showRailHr()}var a=t.page.maxh,r=t.page.maxw,i={h:t.view.h,w:t.view.w};if(t.view={w:t.ispage?t.win.width():parseInt(t.win[0].clientWidth),h:t.ispage?t.win.height():parseInt(t.win[0].clientHeight)},t.page=e?e:t.getContentSize(),t.page.maxh=Math.max(0,t.page.h-t.view.h),t.page.maxw=Math.max(0,t.page.w-t.view.w),t.page.maxh==a&&t.page.maxw==r&&t.view.w==i.w){if(t.ispage)return t;var s=t.win.offset();if(t.lastposition){var l=t.lastposition;if(l.top==s.top&&l.left==s.left)return t}t.lastposition=s}if(0==t.page.maxh?(t.hideRail(),t.scrollvaluemax=0,t.scroll.y=0,t.scrollratio.y=0,t.cursorheight=0,t.setScrollTop(0),t.rail.scrollable=!1):t.rail.scrollable=!0,0==t.page.maxw?(t.hideRailHr(),t.scrollvaluemaxw=0,t.scroll.x=0,t.scrollratio.x=0,t.cursorwidth=0,t.setScrollLeft(0),t.railh.scrollable=!1):t.railh.scrollable=!0,t.locked=0==t.page.maxh&&0==t.page.maxw,t.locked)return t.ispage||t.updateScrollBar(t.view),!1;t.hidden||t.visibility?t.hidden||t.railh.visibility||t.showRailHr():t.showRail().showRailHr(),t.istextarea&&t.win.css("resize")&&"none"!=t.win.css("resize")&&(t.view.h-=20),t.cursorheight=Math.min(t.view.h,Math.round(t.view.h*(t.view.h/t.page.h))),t.cursorheight=t.opt.cursorfixedheight?t.opt.cursorfixedheight:Math.max(t.opt.cursorminheight,t.cursorheight),t.cursorwidth=Math.min(t.view.w,Math.round(t.view.w*(t.view.w/t.page.w))),t.cursorwidth=t.opt.cursorfixedheight?t.opt.cursorfixedheight:Math.max(t.opt.cursorminheight,t.cursorwidth),t.scrollvaluemax=t.view.h-t.cursorheight-t.cursor.hborder,t.railh&&(t.railh.width=t.page.maxh>0?t.view.w-t.rail.width:t.view.w,t.scrollvaluemaxw=t.railh.width-t.cursorwidth-t.cursorh.wborder),t.checkrtlmode&&t.railh&&(t.checkrtlmode=!1,t.opt.rtlmode&&0==t.scroll.x&&t.setScrollLeft(t.page.maxw)),t.ispage||t.updateScrollBar(t.view),t.scrollratio={x:t.page.maxw/t.scrollvaluemaxw,y:t.page.maxh/t.scrollvaluemax};var o=t.getScrollTop();return o>t.page.maxh?t.doScrollTop(t.page.maxh):(t.scroll.y=Math.round(t.getScrollTop()*(1/t.scrollratio.y)),t.scroll.x=Math.round(t.getScrollLeft()*(1/t.scrollratio.x)),t.cursoractive&&t.noticeCursor()),t.scroll.y&&0==t.getScrollTop()&&t.doScrollTo(Math.floor(t.scroll.y*t.scrollratio.y)),t},this.resize=t.onResize,this.lazyResize=function(n){return n=isNaN(n)?30:n,t.delayed("resize",t.resize,n),t},this._bind=function(n,e,a,r){t.events.push({e:n,n:e,f:a,b:r,q:!1}),n.addEventListener?n.addEventListener(e,a,r||!1):n.attachEvent?n.attachEvent("on"+e,a):n["on"+e]=a},this.jqbind=function(n,e,a){t.events.push({e:n,n:e,f:a,q:!0}),o(n).bind(e,a)},this.bind=function(n,e,a,r){var i="jquery"in n?n[0]:n;if("mousewheel"==e)if("onwheel"in t.win)t._bind(i,"wheel",a,r||!1);else{var s="undefined"!=typeof document.onmousewheel?"mousewheel":"DOMMouseScroll";w(i,s,a,r||!1),"DOMMouseScroll"==s&&w(i,"MozMousePixelScroll",a,r||!1)}else if(i.addEventListener){if(d.cantouch&&/mouseup|mousedown|mousemove/.test(e)){var l="mousedown"==e?"touchstart":"mouseup"==e?"touchend":"touchmove";t._bind(i,l,function(n){if(n.touches){if(n.touches.length<2){var e=n.touches.length?n.touches[0]:n;e.original=n,a.call(this,e)}}else if(n.changedTouches){var e=n.changedTouches[0];e.original=n,a.call(this,e)}},r||!1)}t._bind(i,e,a,r||!1),d.cantouch&&"mouseup"==e&&t._bind(i,"touchcancel",a,r||!1)}else t._bind(i,e,function(n){return n=n||window.event||!1,n&&n.srcElement&&(n.target=n.srcElement),"pageY"in n||(n.pageX=n.clientX+document.documentElement.scrollLeft,n.pageY=n.clientY+document.documentElement.scrollTop),a.call(i,n)===!1||r===!1?t.cancelEvent(n):!0})},this._unbind=function(n,e,a,r){n.removeEventListener?n.removeEventListener(e,a,r):n.detachEvent?n.detachEvent("on"+e,a):n["on"+e]=!1},this.unbindAll=function(){for(var n=0;n<t.events.length;n++){var e=t.events[n];e.q?e.e.unbind(e.n,e.f):t._unbind(e.e,e.n,e.f,e.b)}},this.cancelEvent=function(n){var n=n.original?n.original:n?n:window.event||!1;return n?(n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.preventManipulation&&n.preventManipulation(),n.cancelBubble=!0,n.cancel=!0,n.returnValue=!1,!1):!1},this.stopPropagation=function(n){var n=n.original?n.original:n?n:window.event||!1;return n?n.stopPropagation?n.stopPropagation():(n.cancelBubble&&(n.cancelBubble=!0),!1):!1},this.showRail=function(){return 0==t.page.maxh||!t.ispage&&"none"==t.win.css("display")||(t.visibility=!0,t.rail.visibility=!0,t.rail.css("display","block")),t},this.showRailHr=function(){return t.railh?(0==t.page.maxw||!t.ispage&&"none"==t.win.css("display")||(t.railh.visibility=!0,t.railh.css("display","block")),t):t},this.hideRail=function(){return t.visibility=!1,t.rail.visibility=!1,t.rail.css("display","none"),t},this.hideRailHr=function(){return t.railh?(t.railh.visibility=!1,t.railh.css("display","none"),t):t},this.show=function(){return t.hidden=!1,t.locked=!1,t.showRail().showRailHr()},this.hide=function(){return t.hidden=!0,t.locked=!0,t.hideRail().hideRailHr()},this.toggle=function(){return t.hidden?t.show():t.hide()},this.remove=function(){t.stop(),t.cursortimeout&&clearTimeout(t.cursortimeout),t.doZoomOut(),t.unbindAll(),d.isie9&&t.win[0].detachEvent("onpropertychange",t.onAttributeChange),t.observer!==!1&&t.observer.disconnect(),t.observerremover!==!1&&t.observerremover.disconnect(),t.events=null,t.cursor&&t.cursor.remove(),t.cursorh&&t.cursorh.remove(),t.rail&&t.rail.remove(),t.railh&&t.railh.remove(),t.zoom&&t.zoom.remove();for(var n=0;n<t.saved.css.length;n++){var e=t.saved.css[n];e[0].css(e[1],"undefined"==typeof e[2]?"":e[2])}t.saved=!1,t.me.data("__nicescroll","");var a=o.nicescroll;a.each(function(n){if(this&&this.id===t.id){delete a[n];for(var e=++n;e<a.length;e++,n++)a[n]=a[e];a.length--,a.length&&delete a[a.length]}});for(var r in t)t[r]=null,delete t[r];t=null},this.scrollstart=function(n){return this.onscrollstart=n,t},this.scrollend=function(n){return this.onscrollend=n,t},this.scrollcancel=function(n){return this.onscrollcancel=n,t},this.zoomin=function(n){return this.onzoomin=n,t},this.zoomout=function(n){return this.onzoomout=n,t},this.isScrollable=function(n){var e=n.target?n.target:n;if("OPTION"==e.nodeName)return!0;for(;e&&1==e.nodeType&&!/BODY|HTML/.test(e.nodeName);){var a=o(e),r=a.css("overflowY")||a.css("overflowX")||a.css("overflow")||"";if(/scroll|auto/.test(r))return e.clientHeight!=e.scrollHeight;e=e.parentNode?e.parentNode:!1}return!1},this.getViewport=function(n){for(var e=n&&n.parentNode?n.parentNode:!1;e&&1==e.nodeType&&!/BODY|HTML/.test(e.nodeName);){var a=o(e),r=a.css("overflowY")||a.css("overflowX")||a.css("overflow")||"";if(/scroll|auto/.test(r)&&e.clientHeight!=e.scrollHeight)return a;if(a.getNiceScroll().length>0)return a;e=e.parentNode?e.parentNode:!1}return!1},this.onmousewheel=function(n){if(t.locked)return t.debounced("checkunlock",t.resize,250),!0;if(t.rail.drag)return t.cancelEvent(n);if("auto"==t.opt.oneaxismousemode&&0!=n.deltaX&&(t.opt.oneaxismousemode=!1),t.opt.oneaxismousemode&&0==n.deltaX&&!t.rail.scrollable)return t.railh&&t.railh.scrollable?t.onmousewheelhr(n):!0;var e=+new Date,a=!1;if(t.opt.preservenativescrolling&&t.checkarea+600<e&&(t.nativescrollingarea=t.isScrollable(n),a=!0),t.checkarea=e,t.nativescrollingarea)return!0;var r=z(n,!1,a);return r&&(t.checkarea=0),r},this.onmousewheelhr=function(n){if(t.locked||!t.railh.scrollable)return!0;if(t.rail.drag)return t.cancelEvent(n);var e=+new Date,a=!1;return t.opt.preservenativescrolling&&t.checkarea+600<e&&(t.nativescrollingarea=t.isScrollable(n),a=!0),t.checkarea=e,t.nativescrollingarea?!0:t.locked?t.cancelEvent(n):z(n,!0,a)},this.stop=function(){return t.cancelScroll(),t.scrollmon&&t.scrollmon.stop(),t.cursorfreezed=!1,t.scroll.y=Math.round(t.getScrollTop()*(1/t.scrollratio.y)),t.noticeCursor(),t},this.getTransitionSpeed=function(n){var e=Math.round(10*t.opt.scrollspeed),a=Math.min(e,Math.round(n/20*t.opt.scrollspeed));return a>20?a:0},t.opt.smoothscroll?t.ishwscroll&&d.hastransition&&t.opt.usetransition?(this.prepareTransition=function(n,e){var a=e?n>20?n:0:t.getTransitionSpeed(n),r=a?d.prefixstyle+"transform "+a+"ms ease-out":"";return t.lasttransitionstyle&&t.lasttransitionstyle==r||(t.lasttransitionstyle=r,t.doc.css(d.transitionstyle,r)),a},this.doScrollLeft=function(n,e){var a=t.scrollrunning?t.newscrolly:t.getScrollTop();t.doScrollPos(n,a,e)},this.doScrollTop=function(n,e){var a=t.scrollrunning?t.newscrollx:t.getScrollLeft();t.doScrollPos(a,n,e)},this.doScrollPos=function(n,e,a){var r=t.getScrollTop(),i=t.getScrollLeft();return((t.newscrolly-r)*(e-r)<0||(t.newscrollx-i)*(n-i)<0)&&t.cancelScroll(),0==t.opt.bouncescroll&&(0>e?e=0:e>t.page.maxh&&(e=t.page.maxh),0>n?n=0:n>t.page.maxw&&(n=t.page.maxw)),t.scrollrunning&&n==t.newscrollx&&e==t.newscrolly?!1:(t.newscrolly=e,t.newscrollx=n,t.newscrollspeed=a||!1,t.timer?!1:void(t.timer=setTimeout(function(){var a=t.getScrollTop(),r=t.getScrollLeft(),i={};i.x=n-r,i.y=e-a,i.px=r,i.py=a;var s=Math.round(Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))),l=t.newscrollspeed&&t.newscrollspeed>1?t.newscrollspeed:t.getTransitionSpeed(s);if(t.newscrollspeed&&t.newscrollspeed<=1&&(l*=t.newscrollspeed),t.prepareTransition(l,!0),t.timerscroll&&t.timerscroll.tm&&clearInterval(t.timerscroll.tm),l>0){if(!t.scrollrunning&&t.onscrollstart){var o={type:"scrollstart",current:{x:r,y:a},request:{x:n,y:e},end:{x:t.newscrollx,y:t.newscrolly},speed:l};t.onscrollstart.call(t,o)}d.transitionend?t.scrollendtrapped||(t.scrollendtrapped=!0,t.bind(t.doc,d.transitionend,t.onScrollEnd,!1)):(t.scrollendtrapped&&clearTimeout(t.scrollendtrapped),t.scrollendtrapped=setTimeout(t.onScrollEnd,l));var u=a,h=r;t.timerscroll={bz:new BezierClass(u,t.newscrolly,l,0,0,.58,1),bh:new BezierClass(h,t.newscrollx,l,0,0,.58,1)},t.cursorfreezed||(t.timerscroll.tm=setInterval(function(){t.showCursor(t.getScrollTop(),t.getScrollLeft())},60))}t.synched("doScroll-set",function(){t.timer=0,t.scrollendtrapped&&(t.scrollrunning=!0),t.setScrollTop(t.newscrolly),t.setScrollLeft(t.newscrollx),t.scrollendtrapped||t.onScrollEnd()})},50)))},this.cancelScroll=function(){if(!t.scrollendtrapped)return!0;var n=t.getScrollTop(),e=t.getScrollLeft();return t.scrollrunning=!1,d.transitionend||clearTimeout(d.transitionend),t.scrollendtrapped=!1,t._unbind(t.doc,d.transitionend,t.onScrollEnd),t.prepareTransition(0),t.setScrollTop(n),t.railh&&t.setScrollLeft(e),t.timerscroll&&t.timerscroll.tm&&clearInterval(t.timerscroll.tm),t.timerscroll=!1,t.cursorfreezed=!1,t.showCursor(n,e),t},this.onScrollEnd=function(){t.scrollendtrapped&&t._unbind(t.doc,d.transitionend,t.onScrollEnd),t.scrollendtrapped=!1,t.prepareTransition(0),t.timerscroll&&t.timerscroll.tm&&clearInterval(t.timerscroll.tm),t.timerscroll=!1;var n=t.getScrollTop(),e=t.getScrollLeft();if(t.setScrollTop(n),t.railh&&t.setScrollLeft(e),t.noticeCursor(!1,n,e),t.cursorfreezed=!1,0>n?n=0:n>t.page.maxh&&(n=t.page.maxh),0>e?e=0:e>t.page.maxw&&(e=t.page.maxw),n!=t.newscrolly||e!=t.newscrollx)return t.doScrollPos(e,n,t.opt.snapbackspeed);if(t.onscrollend&&t.scrollrunning){var a={type:"scrollend",current:{x:e,y:n},end:{x:t.newscrollx,y:t.newscrolly}};t.onscrollend.call(t,a)}t.scrollrunning=!1}):(this.doScrollLeft=function(n,e){var a=t.scrollrunning?t.newscrolly:t.getScrollTop();t.doScrollPos(n,a,e)},this.doScrollTop=function(n,e){var a=t.scrollrunning?t.newscrollx:t.getScrollLeft();t.doScrollPos(a,n,e)},this.doScrollPos=function(n,e,a){function d(){if(t.cancelAnimationFrame)return!0;if(t.scrollrunning=!0,h=1-h)return t.timer=c(d)||1;var n=0,e=sy=t.getScrollTop();if(t.dst.ay){e=t.bzscroll?t.dst.py+t.bzscroll.getNow()*t.dst.ay:t.newscrolly;var a=e-sy;(0>a&&e<t.newscrolly||a>0&&e>t.newscrolly)&&(e=t.newscrolly),t.setScrollTop(e),e==t.newscrolly&&(n=1)}else n=1;var r=sx=t.getScrollLeft();if(t.dst.ax){r=t.bzscroll?t.dst.px+t.bzscroll.getNow()*t.dst.ax:t.newscrollx;var a=r-sx;(0>a&&r<t.newscrollx||a>0&&r>t.newscrollx)&&(r=t.newscrollx),t.setScrollLeft(r),r==t.newscrollx&&(n+=1)}else n+=1;if(2==n){if(t.timer=0,t.cursorfreezed=!1,t.bzscroll=!1,t.scrollrunning=!1,0>e?e=0:e>t.page.maxh&&(e=t.page.maxh),0>r?r=0:r>t.page.maxw&&(r=t.page.maxw),r!=t.newscrollx||e!=t.newscrolly)t.doScrollPos(r,e);else if(t.onscrollend){var i={type:"scrollend",current:{x:sx,y:sy},end:{x:t.newscrollx,y:t.newscrolly}};t.onscrollend.call(t,i)}}else t.timer=c(d)||1}var e="undefined"==typeof e||e===!1?t.getScrollTop(!0):e;if(t.timer&&t.newscrolly==e&&t.newscrollx==n)return!0;t.timer&&g(t.timer),t.timer=0;var r=t.getScrollTop(),i=t.getScrollLeft();((t.newscrolly-r)*(e-r)<0||(t.newscrollx-i)*(n-i)<0)&&t.cancelScroll(),t.newscrolly=e,t.newscrollx=n,t.bouncescroll&&t.rail.visibility||(t.newscrolly<0?t.newscrolly=0:t.newscrolly>t.page.maxh&&(t.newscrolly=t.page.maxh)),t.bouncescroll&&t.railh.visibility||(t.newscrollx<0?t.newscrollx=0:t.newscrollx>t.page.maxw&&(t.newscrollx=t.page.maxw)),t.dst={},t.dst.x=n-i,t.dst.y=e-r,t.dst.px=i,t.dst.py=r;var s=Math.round(Math.sqrt(Math.pow(t.dst.x,2)+Math.pow(t.dst.y,2)));t.dst.ax=t.dst.x/s,t.dst.ay=t.dst.y/s;var l=0,o=s;0==t.dst.x?(l=r,o=e,t.dst.ay=1,t.dst.py=0):0==t.dst.y&&(l=i,o=n,t.dst.ax=1,t.dst.px=0);var u=t.getTransitionSpeed(s);if(a&&1>=a&&(u*=a),u>0?t.bzscroll=t.bzscroll?t.bzscroll.update(o,u):new BezierClass(l,o,u,0,1,0,1):t.bzscroll=!1,!t.timer){(r==t.page.maxh&&e>=t.page.maxh||i==t.page.maxw&&n>=t.page.maxw)&&t.checkContentSize();var h=1;if(t.cancelAnimationFrame=!1,t.timer=1,t.onscrollstart&&!t.scrollrunning){var f={type:"scrollstart",current:{x:i,y:r},request:{x:n,y:e},end:{x:t.newscrollx,y:t.newscrolly},speed:u};t.onscrollstart.call(t,f)}d(),(r==t.page.maxh&&e>=r||i==t.page.maxw&&n>=i)&&t.checkContentSize(),t.noticeCursor()}},this.cancelScroll=function(){return t.timer&&g(t.timer),t.timer=0,t.bzscroll=!1,t.scrollrunning=!1,t}):(this.doScrollLeft=function(n,e){var a=t.getScrollTop();t.doScrollPos(n,a,e)},this.doScrollTop=function(n,e){var a=t.getScrollLeft();t.doScrollPos(a,n,e)},this.doScrollPos=function(n,e,a){var r=n>t.page.maxw?t.page.maxw:n;0>r&&(r=0);var i=e>t.page.maxh?t.page.maxh:e;0>i&&(i=0),t.synched("scroll",function(){t.setScrollTop(i),t.setScrollLeft(r)})},this.cancelScroll=function(){}),this.doScrollBy=function(n,e){var a=0;if(e)a=Math.floor((t.scroll.y-n)*t.scrollratio.y);else{var r=t.timer?t.newscrolly:t.getScrollTop(!0);a=r-n}if(t.bouncescroll){var i=Math.round(t.view.h/2);-i>a?a=-i:a>t.page.maxh+i&&(a=t.page.maxh+i)}return t.cursorfreezed=!1,py=t.getScrollTop(!0),0>a&&py<=0?t.noticeCursor():a>t.page.maxh&&py>=t.page.maxh?(t.checkContentSize(),t.noticeCursor()):void t.doScrollTop(a)},this.doScrollLeftBy=function(n,e){var a=0;if(e)a=Math.floor((t.scroll.x-n)*t.scrollratio.x);else{var r=t.timer?t.newscrollx:t.getScrollLeft(!0);a=r-n}if(t.bouncescroll){var i=Math.round(t.view.w/2);-i>a?a=-i:a>t.page.maxw+i&&(a=t.page.maxw+i)}return t.cursorfreezed=!1,px=t.getScrollLeft(!0),0>a&&px<=0?t.noticeCursor():a>t.page.maxw&&px>=t.page.maxw?t.noticeCursor():void t.doScrollLeft(a)},this.doScrollTo=function(n,e){var a=e?Math.round(n*t.scrollratio.y):n;0>a?a=0:a>t.page.maxh&&(a=t.page.maxh),t.cursorfreezed=!1,t.doScrollTop(n)},this.checkContentSize=function(){var n=t.getContentSize();(n.h!=t.page.h||n.w!=t.page.w)&&t.resize(!1,n)},t.onscroll=function(n){t.rail.drag||t.cursorfreezed||t.synched("scroll",function(){t.scroll.y=Math.round(t.getScrollTop()*(1/t.scrollratio.y)),t.railh&&(t.scroll.x=Math.round(t.getScrollLeft()*(1/t.scrollratio.x))),t.noticeCursor()})},t.bind(t.docscroll,"scroll",t.onscroll),this.doZoomIn=function(n){if(!t.zoomactive){t.zoomactive=!0,t.zoomrestore={style:{}};var e=["position","top","left","zIndex","backgroundColor","marginTop","marginBottom","marginLeft","marginRight"],a=t.win[0].style;for(var r in e){var i=e[r];t.zoomrestore.style[i]="undefined"!=typeof a[i]?a[i]:""}t.zoomrestore.style.width=t.win.css("width"),t.zoomrestore.style.height=t.win.css("height"),t.zoomrestore.padding={w:t.win.outerWidth()-t.win.width(),h:t.win.outerHeight()-t.win.height()},d.isios4&&(t.zoomrestore.scrollTop=o(window).scrollTop(),o(window).scrollTop(0)),t.win.css({position:d.isios4?"absolute":"fixed",top:0,left:0,"z-index":l+100,margin:"0px"});var s=t.win.css("backgroundColor");return(""==s||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(s))&&t.win.css("backgroundColor","#fff"),t.rail.css({"z-index":l+101}),t.zoom.css({"z-index":l+102}),t.zoom.css("backgroundPosition","0px -18px"),t.resizeZoom(),t.onzoomin&&t.onzoomin.call(t),t.cancelEvent(n)}},this.doZoomOut=function(n){return t.zoomactive?(t.zoomactive=!1,t.win.css("margin",""),t.win.css(t.zoomrestore.style),d.isios4&&o(window).scrollTop(t.zoomrestore.scrollTop),t.rail.css({"z-index":t.zindex}),t.zoom.css({"z-index":t.zindex}),t.zoomrestore=!1,t.zoom.css("backgroundPosition","0px 0px"),t.onResize(),t.onzoomout&&t.onzoomout.call(t),t.cancelEvent(n)):void 0},this.doZoom=function(n){return t.zoomactive?t.doZoomOut(n):t.doZoomIn(n)},this.resizeZoom=function(){if(t.zoomactive){var n=t.getScrollTop();t.win.css({width:o(window).width()-t.zoomrestore.padding.w+"px",height:o(window).height()-t.zoomrestore.padding.h+"px"}),t.onResize(),t.setScrollTop(Math.min(t.page.maxh,n))}},this.init(),o.nicescroll.push(this)},v=function(n){var e=this;this.nc=n,this.lastx=0,this.lasty=0,this.speedx=0,this.speedy=0,this.lasttime=0,this.steptime=0,this.snapx=!1,this.snapy=!1,this.demulx=0,this.demuly=0,this.lastscrollx=-1,this.lastscrolly=-1,this.chkx=0,this.chky=0,this.timer=0,this.time=function(){return+new Date},this.reset=function(n,a){e.stop();var r=e.time();e.steptime=0,e.lasttime=r,e.speedx=0,e.speedy=0,e.lastx=n,e.lasty=a,e.lastscrollx=-1,e.lastscrolly=-1},this.update=function(n,a){var r=e.time();e.steptime=r-e.lasttime,e.lasttime=r;var t=a-e.lasty,i=n-e.lastx,s=e.nc.getScrollTop(),l=e.nc.getScrollLeft(),o=s+t,u=l+i;e.snapx=0>u||u>e.nc.page.maxw,e.snapy=0>o||o>e.nc.page.maxh,e.speedx=i,e.speedy=t,e.lastx=n,e.lasty=a},this.stop=function(){e.nc.unsynched("domomentum2d"),e.timer&&clearTimeout(e.timer),e.timer=0,e.lastscrollx=-1,e.lastscrolly=-1},this.doSnapy=function(n,a){var r=!1;0>a?(a=0,r=!0):a>e.nc.page.maxh&&(a=e.nc.page.maxh,r=!0),0>n?(n=0,r=!0):n>e.nc.page.maxw&&(n=e.nc.page.maxw,r=!0),r&&e.nc.doScrollPos(n,a,e.nc.opt.snapbackspeed)},this.doMomentum=function(n){var a=e.time(),r=n?a+n:e.lasttime,t=e.nc.getScrollLeft(),i=e.nc.getScrollTop(),s=e.nc.page.maxh,l=e.nc.page.maxw;e.speedx=l>0?Math.min(60,e.speedx):0,e.speedy=s>0?Math.min(60,e.speedy):0;var o=r&&60>=a-r;(0>i||i>s||0>t||t>l)&&(o=!1);var u=e.speedy&&o?e.speedy:!1,h=e.speedx&&o?e.speedx:!1;if(u||h){var d=Math.max(16,e.steptime);if(d>50){var c=d/50;e.speedx*=c,e.speedy*=c,d=50}e.demulxy=0,e.lastscrollx=e.nc.getScrollLeft(),e.chkx=e.lastscrollx,e.lastscrolly=e.nc.getScrollTop(),e.chky=e.lastscrolly;var g=e.lastscrollx,f=e.lastscrolly,m=function(){var n=e.time()-a>600?.04:.02;e.speedx&&(g=Math.floor(e.lastscrollx-e.speedx*(1-e.demulxy)),e.lastscrollx=g,(0>g||g>l)&&(n=.1)),e.speedy&&(f=Math.floor(e.lastscrolly-e.speedy*(1-e.demulxy)),e.lastscrolly=f,(0>f||f>s)&&(n=.1)),e.demulxy=Math.min(1,e.demulxy+n),e.nc.synched("domomentum2d",function(){if(e.speedx){var n=e.nc.getScrollLeft();n!=e.chkx&&e.stop(),e.chkx=g,e.nc.setScrollLeft(g)}if(e.speedy){var a=e.nc.getScrollTop();a!=e.chky&&e.stop(),e.chky=f,e.nc.setScrollTop(f)}e.timer||(e.nc.hideCursor(),e.doSnapy(g,f))}),e.demulxy<1?e.timer=setTimeout(m,d):(e.stop(),e.nc.hideCursor(),e.doSnapy(g,f))};m()}else e.doSnapy(e.nc.getScrollLeft(),e.nc.getScrollTop())}},w=n.fn.scrollTop;n.cssHooks.pageYOffset={get:function(n,e,a){var r=o.data(n,"__nicescroll")||!1;return r&&r.ishwscroll?r.getScrollTop():w.call(n)},set:function(n,e){var a=o.data(n,"__nicescroll")||!1;return a&&a.ishwscroll?a.setScrollTop(parseInt(e)):w.call(n,e),this}},n.fn.scrollTop=function(n){if("undefined"==typeof n){var e=this[0]?o.data(this[0],"__nicescroll")||!1:!1;return e&&e.ishwscroll?e.getScrollTop():w.call(this)}return this.each(function(){var e=o.data(this,"__nicescroll")||!1;e&&e.ishwscroll?e.setScrollTop(parseInt(n)):w.call(o(this),n)})};var z=n.fn.scrollLeft;o.cssHooks.pageXOffset={get:function(n,e,a){var r=o.data(n,"__nicescroll")||!1;return r&&r.ishwscroll?r.getScrollLeft():z.call(n)},set:function(n,e){var a=o.data(n,"__nicescroll")||!1;return a&&a.ishwscroll?a.setScrollLeft(parseInt(e)):z.call(n,e),this}},n.fn.scrollLeft=function(n){if("undefined"==typeof n){var e=this[0]?o.data(this[0],"__nicescroll")||!1:!1;return e&&e.ishwscroll?e.getScrollLeft():z.call(this)}return this.each(function(){var e=o.data(this,"__nicescroll")||!1;e&&e.ishwscroll?e.setScrollLeft(parseInt(n)):z.call(o(this),n)})};var M=function(n){var e=this;if(this.length=0,this.name="nicescrollarray",this.each=function(n){for(var a=0,r=0;a<e.length;a++)n.call(e[a],r++);return e},this.push=function(n){e[e.length]=n,e.length++},this.eq=function(n){return e[n]},n)for(a=0;a<n.length;a++){var r=o.data(n[a],"__nicescroll")||!1;r&&(this[this.length]=r,this.length++)}return this};D(M.prototype,["show","hide","toggle","onResize","resize","remove","stop","doScrollPos"],function(n,e){n[e]=function(){var n=arguments;return this.each(function(){this[e].apply(this,n)})}}),n.fn.getNiceScroll=function(n){if("undefined"==typeof n)return new M(this);var e=this[n]&&o.data(this[n],"__nicescroll")||!1;return e},n.extend(n.expr[":"],{nicescroll:function(n){return o.data(n,"__nicescroll")?!0:!1}}),o.fn.niceScroll=function(n,e){"undefined"==typeof e&&("object"!=typeof n||"jquery"in n||(e=n,n=!1));var a=new M;"undefined"==typeof e&&(e={}),n&&(e.doc=o(n),e.win=o(this));var r=!("doc"in e);return r||"win"in e||(e.win=o(this)),this.each(function(){var n=o(this).data("__nicescroll")||!1;n||(e.doc=r?o(this):e.doc,n=new S(e,o(this)),o(this).data("__nicescroll",n)),a.push(n)}),1==a.length?a[0]:a},window.NiceScroll={getjQuery:function(){return n}},o.nicescroll||(o.nicescroll=new M,o.nicescroll.options=b)}(jQuery);