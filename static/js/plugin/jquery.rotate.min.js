jQuery.fn.rotate=function(n,e){var a=this.get(0);if(e?a.angle=n:a.angle=((void 0==a.angle?0:a.angle)+n)%360,a.angle>=0)var r=Math.PI*a.angle/180;else var r=Math.PI*(360+a.angle)/180;var t=Math.cos(r),i=Math.sin(r);if(document.all&&!window.opera){var s=document.createElement("img");s.src=a.src,s.height=a.height,s.width=a.width,s.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+t+",M12="+-i+",M21="+i+",M22="+t+",SizingMethod='auto expand')"}else{var s=document.createElement("canvas");a.oImage?s.oImage=a.oImage:(s.oImage=new Image,s.oImage.src=a.src),s.style.width=s.width=Math.abs(t*s.oImage.width)+Math.abs(i*s.oImage.height),s.style.height=s.height=Math.abs(t*s.oImage.height)+Math.abs(i*s.oImage.width);var l=s.getContext("2d");l.save(),r<=Math.PI/2?l.translate(i*s.oImage.height,0):r<=Math.PI?l.translate(s.width,-t*s.oImage.height):r<=1.5*Math.PI?l.translate(-t*s.oImage.width,s.height):l.translate(0,-i*s.oImage.width),l.rotate(r),l.drawImage(s.oImage,0,0,s.oImage.width,s.oImage.height),l.restore()}s.id=a.id,s.angle=a.angle,a.parentNode.replaceChild(s,a)},jQuery.fn.rotateRight=function(n){this.rotate(void 0==n?90:n)},jQuery.fn.rotateLeft=function(n){this.rotate(void 0==n?-90:-n)};